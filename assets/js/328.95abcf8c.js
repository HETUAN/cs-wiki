(window.webpackJsonp=window.webpackJsonp||[]).push([[328],{796:function(s,t,r){"use strict";r.r(t);var _=r(29),a=Object(_.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"order-by-åŸç†åŠä¼˜åŒ–"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#order-by-åŸç†åŠä¼˜åŒ–"}},[s._v("#")]),s._v(" order by åŸç†åŠä¼˜åŒ–")]),s._v(" "),r("hr"),s._v(" "),r("p",[s._v("å‡è®¾æœ‰è¿™ä¹ˆä¸€å¼ ç”¨æˆ·è¡¨ userï¼š")]),s._v(" "),r("ul",[r("li",[s._v("id int(11)ï¼šä¸»é”®")]),s._v(" "),r("li",[s._v("username varchar(16)ï¼šç”¨æˆ·å")]),s._v(" "),r("li",[s._v("age int(11)ï¼šå¹´é¾„")]),s._v(" "),r("li",[s._v("city varchar(16)ï¼šåŸå¸‚")])]),s._v(" "),r("p",[s._v("å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼šæŸ¥è¯¢å‡ºåŸå¸‚æ˜¯ â€œå—äº¬â€ çš„æ‰€æœ‰ç”¨æˆ·åï¼Œå¹¶ä¸”æŒ‰ç…§ç”¨æˆ·åè¿›è¡Œæ’åºï¼Œè¿”å›å‰ 1000 ä¸ªäººçš„å§“åã€å¹´é¾„ã€‚")]),s._v(" "),r("p",[s._v("ä¼—æ‰€å‘¨çŸ¥ï¼Œæ’åºä½¿ç”¨çš„å…³é”®å­—æ˜¯ "),r("code",[s._v("order by")]),s._v("ï¼Œä¸éš¾å†™å‡ºè¿™æ ·çš„ SQL è¯­å¥ï¼š")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" age "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'å—äº¬'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" username "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±æ¥è§£é‡Šä¸‹ï¼Œæ¶‰åŠ order by çš„è¯­å¥å…·ä½“æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Œä»¥åŠæœ‰ä»€ä¹ˆå‚æ•°ä¼šå½±å“æ‰§è¡Œçš„è¡Œä¸º")]),s._v(" "),r("blockquote",[r("p",[s._v("è€è§„çŸ©ï¼ŒèƒŒè¯µç‰ˆåœ¨æ–‡æœ«ã€‚ç‚¹å‡»é˜…è¯»åŸæ–‡å¯ä»¥ç›´è¾¾æˆ‘æ”¶å½•æ•´ç†çš„å„å¤§å‚é¢è¯•çœŸé¢˜")])]),s._v(" "),r("h2",{attrs:{id:"å…¨å­—æ®µæ’åº"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å…¨å­—æ®µæ’åº"}},[s._v("#")]),s._v(" å…¨å­—æ®µæ’åº")]),s._v(" "),r("p",[s._v("ä¸ºé¿å…å…¨è¡¨æ‰«æï¼Œæˆ‘ä»¬åœ¨æŸ¥è¯¢æ¡ä»¶çš„ city å­—æ®µä¸Šé¢å»ºç«‹ç´¢å¼•ã€‚ç„¶åç”¨ explain å‘½ä»¤æ¥çœ‹çœ‹è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæƒ…å†µï¼š")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219165523.png",alt:""}})]),s._v(" "),r("blockquote",[r("p",[s._v("å·ä¸ªæ‡’ï¼Œå› ä¸ºæˆ‘å…¶å®ä¸€æ¡æ•°æ®ä¹Ÿæ²¡æ’å…¥ï¼ˆç‹—å¤´ä¿å‘½ï¼‰ï¼Œæ‰€ä»¥å¤§ä¼™å„¿åœ¨ä¸Šå›¾ä¸­çœ‹è§çš„ explain åˆ†æå‡ºæ¥çš„è¿™æ¡ SQL çš„å½±å“è¡Œæ•° rows æ˜¯ 1")])]),s._v(" "),r("p",[s._v("Extra è¿™ä¸ªå­—æ®µä¸­çš„ "),r("code",[s._v("Using filesort")]),s._v(" è¡¨ç¤ºçš„å°±æ˜¯éœ€è¦æ’åºï¼Œ"),r("strong",[s._v("MySQL ä¼šç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€å—å†…å­˜ç”¨äºæ’åºï¼Œç§°ä¸º sort_buffer")]),s._v("ã€‚")]),s._v(" "),r("p",[s._v("é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¯­å¥æ‰§è¡Œæµç¨‹å¦‚ä¸‹æ‰€ç¤º ï¼š")]),s._v(" "),r("p",[s._v("1ï¼‰åˆå§‹åŒ– sort_bufferï¼Œæ”¾å…¥ cityã€usernameã€age è¿™ä¸‰ä¸ªå­—æ®µï¼›")]),s._v(" "),r("p",[s._v("2ï¼‰ä»ç´¢å¼• city æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city='å—äº¬' æ¡ä»¶çš„ä¸»é”® id")]),s._v(" "),r("p",[s._v("3ï¼‰åˆ°ä¸»é”® id çš„ç´¢å¼•æ ‘ä¸ŠæŸ¥æ‰¾åˆ°å¯¹åº”çš„æ•´è¡Œæ•°æ®ï¼ˆå›è¡¨æŸ¥è¯¢ï¼‰ï¼Œç„¶åå–å‡º cityã€usernameã€age ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œå­˜å…¥ sort_buffer ä¸­")]),s._v(" "),r("p",[s._v("4ï¼‰ä»ç´¢å¼• city å–ä¸‹ä¸€ä¸ªè®°å½•çš„ä¸»é”® id")]),s._v(" "),r("p",[s._v("5ï¼‰é‡å¤æ­¥éª¤ 3ã€4 ç›´åˆ° city çš„å€¼ä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ä¸ºæ­¢")]),s._v(" "),r("p",[s._v("6ï¼‰"),r("strong",[s._v("å¯¹ sort_buffer ä¸­çš„æ•°æ®æŒ‰ç…§å­—æ®µ username åšå¿«é€Ÿæ’åº")])]),s._v(" "),r("p",[s._v("æŒ‰ç…§å­—æ®µ username åšå¿«é€Ÿæ’åºè¿™ä¸ªåŠ¨ä½œï¼Œå¯èƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œä¹Ÿå¯èƒ½éœ€è¦ä½¿ç”¨å¤–éƒ¨æ’åºï¼Œè¿™å–å†³äºæ’åºæ‰€éœ€çš„å†…å­˜å’Œ sort_buffer çš„å¤§å°ï¼Œç”±å‚æ•° "),r("code",[s._v("sort_buffer_size")]),s._v(" å†³å®šã€‚")]),s._v(" "),r("p",[r("u",[s._v("å¦‚æœè¦æ’åºçš„æ•°æ®é‡å°äº sort_buffer_sizeï¼Œæ’åºå°±åœ¨å†…å­˜ä¸­å®Œæˆã€‚ä½†å¦‚æœæ’åºæ•°æ®é‡å¤ªå¤§ï¼Œå†…å­˜æ”¾ä¸ä¸‹ï¼Œåˆ™å°±éœ€è¦åˆ©ç”¨"),r("strong",[s._v("ç£ç›˜ä¸´æ—¶æ–‡ä»¶")]),s._v("æ¥è¾…åŠ©æ’åº")]),s._v("ã€‚")]),s._v(" "),r("p",[s._v("è§£é‡Šä¸‹è¿™é‡Œä½¿ç”¨ç£ç›˜ä¸´æ—¶æ–‡ä»¶æ¥è¿›è¡Œè¾…åŠ©æ’åºçš„å«ä¹‰ï¼Œå¤–éƒ¨æ’åºå¸¸ç”¨çš„æ’åºç®—æ³•æ˜¯å¤šè·¯å½’å¹¶æ’åºç®—æ³•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š")]),s._v(" "),r("ul",[r("li",[s._v("åˆ°ä¸»é”® id ç´¢å¼•æ ‘ä¸ŠæŸ¥æ‰¾åˆ°å¯¹åº”çš„æ•´è¡Œæ•°æ®åï¼Œå– cityã€usernameã€age ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œå­˜å…¥ sort_buffer ä¸­ï¼Œèƒ½å­˜å¤šå°‘æ˜¯å¤šå°‘ï¼Œå½“ sort_buffer å¿«è¦æ»¡æ—¶ï¼Œå°±å¯¹ sort_buffer ä¸­çš„æ•°æ®è¿›è¡Œæ’åºï¼Œæ’å®Œåï¼ŒæŠŠæ•°æ®ä¸´æ—¶æ”¾åˆ°ç£ç›˜çš„ä¸€ä¸ªå°æ–‡ä»¶ä¸­ï¼Œç„¶åæ¸…ç©º sort_bufferï¼ˆè¿™æ ·çš„è¯ï¼Œä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®ï¼Œå°±ä¼šè¢«åˆ†æˆè‹¥å¹²ä¸ªä¸´æ—¶ç£ç›˜æ–‡ä»¶ï¼‰")]),s._v(" "),r("li",[s._v("ç»§ç»­å›åˆ°ä¸»é”® id ç´¢å¼•æ ‘å–æ•°æ®ï¼Œé‡å¤ä¸Šä¸€æ­¥ï¼Œç›´åˆ°å–å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„æ•°æ®")]),s._v(" "),r("li",[s._v("æœ€åï¼Œå½’å¹¶å·²ç»æœ‰åºçš„è‹¥å¹²ä¸ªä¸´æ—¶ç£ç›˜æ–‡ä»¶ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„æœ‰åºå¤§æ–‡ä»¶")])]),s._v(" "),r("p",[s._v("7ï¼‰æŒ‰ç…§æ’åºç»“æœå–å‰ 1000 è¡Œè¿”å›ç»™å®¢æˆ·ç«¯")]),s._v(" "),r("p",[s._v("å¯ä»¥çœ‹å‡ºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢çš„ cityã€usernameã€age å…¨éƒ½å‚ä¸äº†ï¼Œæ‰€ä»¥ï¼Œæš‚ä¸”æŠŠè¿™ä¸ªæ’åºè¿‡ç¨‹ï¼Œç§°ä¸º"),r("strong",[s._v("å…¨å­—æ®µæ’åº")])]),s._v(" "),r("p",[s._v("æ•´æ¡è¯­å¥çš„æ‰§è¡Œæµç¨‹çš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219171147.png",alt:""}})]),s._v(" "),r("p",[s._v("é’ˆå¯¹ä¸Šé¢åˆ©ç”¨ç£ç›˜ä¸´æ—¶æ–‡ä»¶è¿›è¡Œè¾…åŠ©æ’åºçš„è¿‡ç¨‹ï¼Œä¸çŸ¥é“å¤§å®¶ä¼šä¸ä¼šæœ‰ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•ï¼šsort_buffer å†…å­˜æ”¾ä¸ä¸‹ï¼Œéœ€è¦ç”¨åˆ°ä¸´æ—¶ç£ç›˜æ–‡ä»¶ï¼Œç£ç›˜æ–‡ä»¶è¶Šå¤šï¼Œæ’åºæ•ˆç‡æ˜¾ç„¶å°±ä¼šè¶Šä½ä¸‹ã€‚é‚£ä¸ºä»€ä¹ˆè¿˜è¦æŠŠæ’åºä¸ç›¸å…³çš„å­—æ®µ cityã€username æ”¾åˆ° sort_buffer ä¸­å‘¢ï¼Ÿåªå­˜æ”¾æ’åºç›¸å…³çš„ age å­—æ®µï¼Œè¿™æ ·åˆ’åˆ†çš„ç£ç›˜æ–‡ä»¶ä¸å°±ç›¸å¯¹å˜å°‘äº†å˜›~")]),s._v(" "),r("p",[s._v("è¿™å°±æ˜¯ "),r("strong",[s._v("rowid æ’åº ğŸ‘‡")])]),s._v(" "),r("h2",{attrs:{id:"rowid-æ’åº"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rowid-æ’åº"}},[s._v("#")]),s._v(" rowid æ’åº")]),s._v(" "),r("p",[s._v("rowid æ’åºï¼Œå¬åå­—å¤§æ¦‚å°±èƒ½ç†è§£ï¼Œå°±æ˜¯ï¼ŒåªæŠŠéœ€è¦ç”¨äºæ’åºçš„å­—æ®µå’Œå¯¹åº”çš„ä¸»é”® idï¼Œæ”¾åˆ° sort_buffer ä¸­ã€‚")]),s._v(" "),r("p",[s._v("é‚£æ€ä¹ˆç¡®å®šèµ°çš„æ˜¯å…¨å­—æ®µæ’åºè¿˜æ˜¯ rowid æ’åºå‘¢ï¼Ÿ")]),s._v(" "),r("p",[s._v("å®é™…ä¸Šæœ‰ä¸ªå‚æ•°æ§åˆ¶çš„ã€‚è¿™ä¸ªå‚æ•°å°±æ˜¯ "),r("strong",[r("code",[s._v("max_length_for_sort_data")])]),s._v("ï¼Œæ˜¯ MySQL ä¸­ä¸“é—¨æ§åˆ¶ç”¨äºæ’åºçš„è¡Œæ•°æ®çš„é•¿åº¦çš„ä¸€ä¸ªå‚æ•°ã€‚å®ƒçš„æ„æ€æ˜¯ï¼Œå¦‚æœå•è¡Œçš„é•¿åº¦è¶…è¿‡è¿™ä¸ªå€¼ï¼ŒMySQL å°±è®¤ä¸ºå•è¡Œå¤ªå¤§ï¼ˆé‚£ä¹ˆæ•°æ®é‡è‚¯å®šå°±è¶Šå¤§ï¼Œsort_buffer å¯èƒ½ä¸å¤Ÿç”¨ï¼‰ï¼Œä¸èƒ½å†åƒä¹‹å‰é‚£æ ·æŠŠæ‰€æœ‰ select çš„å­—æ®µéƒ½å­˜è¿› sort_buffer äº†ï¼Œè¦æ¢ä¸€ä¸ªç®—æ³•ï¼Œåªå­˜æ’åºç›¸å…³çš„å­—æ®µ")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'max_length_for_sort_data'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219171608.png",alt:""}})]),s._v(" "),r("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œmax_length_for_sort_data çš„é»˜è®¤å€¼æ˜¯ 1024")]),s._v(" "),r("p",[s._v("å¯ä»¥é€šè¿‡ä¸‹é¢è¿™è¡Œå‘½ä»¤è¿›è¡Œä¿®æ”¹")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" max_length_for_sort_data "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("è¡¨ä¸­æˆ‘ä»¬å®šä¹‰çš„è¿™ä¸‰ä¸ªå­—æ®µ cityã€usernameã€age çš„æ€»é•¿åº¦æ˜¯ 36ï¼Œæˆ‘æŠŠ max_length_for_sort_data è®¾ç½®ä¸º 16ï¼Œæ˜¾ç„¶ï¼Œå•è¡Œçš„é•¿åº¦å·²ç»è¶…è¿‡è¿™ä¸ªå€¼äº†ï¼Œæ’åºç®—æ³•åº”è¯¥ç”±å…¨å­—æ®µæ’åºè½¬æˆäº† rowid æ’åºã€‚")]),s._v(" "),r("p",[s._v("æ•´ä¸ªæ‰§è¡Œæµç¨‹å°±å˜æˆå¦‚ä¸‹æ‰€ç¤ºçš„æ ·å­ï¼š")]),s._v(" "),r("p",[s._v("1ï¼‰åˆå§‹åŒ– sort_bufferï¼Œæ”¾å…¥ä¸¤ä¸ªå­—æ®µï¼Œå³ username å’Œä¸»é”® id")]),s._v(" "),r("p",[s._v("2ï¼‰ä» city ç´¢å¼•ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city='å—äº¬' æ¡ä»¶çš„ä¸»é”® id")]),s._v(" "),r("p",[s._v("3ï¼‰åˆ°ä¸»é”® id çš„ç´¢å¼•æ ‘ä¸ŠæŸ¥æ‰¾åˆ°å¯¹åº”çš„æ•´è¡Œæ•°æ®ï¼ˆå›è¡¨æŸ¥è¯¢ï¼‰ï¼Œå–å‡º username å’Œ id è¿™ä¸¤ä¸ªå­—æ®µï¼Œå­˜å…¥ sort_buffer ä¸­")]),s._v(" "),r("p",[s._v("4ï¼‰ä» city ç´¢å¼•ä¸­å–ä¸‹ä¸€ä¸ªè®°å½•çš„ä¸»é”® idï¼›é‡å¤æ­¥éª¤ 3ã€4 ç›´åˆ°ä¸æ»¡è¶³ city='å—äº¬' çš„æ¡ä»¶ä¸ºæ­¢")]),s._v(" "),r("p",[s._v("5ï¼‰å¯¹ sort_buffer ä¸­çš„æ•°æ®æŒ‰ç…§å­—æ®µ username è¿›è¡Œæ’åº")]),s._v(" "),r("p",[s._v("6ï¼‰"),r("strong",[s._v("éå†æ’åºç»“æœï¼Œå–å‰ 1000 è¡Œï¼Œå¹¶æŒ‰ç…§ id çš„å€¼å›åˆ°ä¸»é”® id çš„ç´¢å¼•æ ‘ä¸­å–å‡º cityã€username å’Œ age ä¸‰ä¸ªå­—æ®µè¿”å›ç»™å®¢æˆ·ç«¯")])]),s._v(" "),r("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œæ–°çš„ rowid ç®—æ³•æ”¾å…¥ sort_buffer çš„å­—æ®µï¼Œåªæœ‰è¦æ’åºçš„åˆ—ï¼ˆå³ username å­—æ®µï¼‰å’Œä¸»é”® idã€‚ä½†æœ‰åˆ©æœ‰å¼Šï¼Œå­˜æ”¾åœ¨ sort_buffer ä¸­çš„æ•°æ®å› ä¸ºå°‘äº† city å’Œ age å­—æ®µçš„å€¼ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯äº†ï¼Œéœ€è¦å†è¿›è¡Œä¸€æ¬¡å›è¡¨æŸ¥è¯¢ã€‚")]),s._v(" "),r("p",[s._v("è¿™ä¸ªæ‰§è¡Œæµç¨‹çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219172449.png",alt:""}})]),s._v(" "),r("p",[s._v("ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œäº‹å®ä¸Šï¼Œå¦‚æœå†…å­˜è¶³å¤Ÿå¤§çš„è¯ï¼ŒMySQL ä¼˜å…ˆé€‰æ‹©çš„ä»ç„¶æ˜¯å…¨å­—æ®µæ’åºï¼ŒæŠŠéœ€è¦çš„å­—æ®µéƒ½æ”¾åˆ° sort_buffer ä¸­ï¼Œè¿™æ ·æ’åºåå°±ä¼šç›´æ¥ä»å†…å­˜é‡Œé¢è¿”å›æŸ¥è¯¢ç»“æœäº†ï¼Œä¸ç”¨å†å›è¡¨æŸ¥è¯¢ï¼Œå‡å°‘ç£ç›˜è®¿é—®ã€‚")]),s._v(" "),r("blockquote",[r("p",[s._v("å›è¡¨çš„è¯åº”è¯¥é¦–å…ˆå»ç¼“å†²æ±  Buffer Pool ä¸­æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„æ•°æ®ï¼Œè‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™éœ€è¦è¿›è¡Œç£ç›˜è¯»ï¼ˆç´¢å¼•æ–‡ä»¶æ˜¯ç£ç›˜æ–‡ä»¶ï¼‰ï¼Œç†è®ºä¸Šä¸ä¼šè§¦å‘ç£ç›˜è¯»ï¼Œå› ä¸ºå– id çš„æ—¶å€™å·²ç»ä»ç£ç›˜è¯»å–äº†ä¸€æ¬¡æ”¾åˆ°äº†ç¼“å†²æ±  Buffer Pool ä¸­äº†ï¼Œä½†ä¸æ’é™¤ï¼Œç¬¬ä¸€æ¬¡å–å®Œæ•°æ®æ”¾åˆ° sort buffer åç¼“å­˜ä¸­çš„æ•°æ®é¡µè¢«æ·˜æ±°äº†ï¼Œå¯èƒ½ä¼šè§¦å‘ç£ç›˜è¯»")])]),s._v(" "),r("h2",{attrs:{id:"order-by-ä¼˜åŒ–"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#order-by-ä¼˜åŒ–"}},[s._v("#")]),s._v(" order by ä¼˜åŒ–")]),s._v(" "),r("p",[s._v("å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœä¸æ’åºå°±èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œé‚£å¯¹ç³»ç»Ÿçš„æ¶ˆè€—ä¼šå°å¾ˆå¤šï¼Œè¯­å¥çš„æ‰§è¡Œæ—¶é—´ä¹Ÿä¼šå˜å¾—æ›´çŸ­ã€‚")]),s._v(" "),r("p",[s._v("é‚£ä¹ˆï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰çš„ order by éƒ½éœ€è¦æ’åºæ“ä½œå‘¢ï¼Ÿ")]),s._v(" "),r("p",[s._v("å¹¶ä¸æ˜¯ï¼")]),s._v(" "),r("p",[s._v("ä»ä¸Šé¢åˆ†æçš„æ‰§è¡Œè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒMySQL ä¹‹æ‰€ä»¥éœ€è¦ sort_bufferï¼Œå¹¶ä¸”åœ¨ sort_buffer ä¸Šåšæ’åºæ“ä½œï¼Œå…¶åŸå› æ˜¯åŸæ¥çš„æ•°æ®éƒ½æ˜¯æ— åºçš„ã€‚")]),s._v(" "),r("p",[s._v("å›é¡¾ä¸‹æˆ‘ä»¬çš„éœ€æ±‚ï¼šæŸ¥è¯¢å‡º city æ˜¯ â€œå—äº¬â€ çš„æ‰€æœ‰ usernameï¼Œå¹¶ä¸”æŒ‰ç…§ username è¿›è¡Œæ’åºï¼Œè¿”å›å‰ 1000 ä¸ªäººçš„å§“åã€å¹´é¾„ã€‚")]),s._v(" "),r("p",[s._v("é‚£ï¼Œ"),r("strong",[s._v("å¦‚æœèƒ½å¤Ÿä¿è¯ä» city è¿™ä¸ªç´¢å¼•ä¸Šå–å‡ºæ¥çš„æ•°æ®è¡Œï¼Œå·²ç»å¤©ç„¶å°±æ˜¯æŒ‰ç…§ username è¿›è¡Œé€’å¢æ’åºçš„è¯ï¼Œä¸å°±ä¸ç”¨å†æ’åºäº†å—")])]),s._v(" "),r("p",[s._v("æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å¼ è¡¨ä¸Šåˆ›å»ºä¸€ä¸ª "),r("strong",[s._v("city å’Œ username çš„è”åˆç´¢å¼•")]),s._v("ï¼š")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_city_username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("åœ¨è¿™ä¸ªè”åˆç´¢å¼•ä¸Šï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ç”¨æ ‘æœç´¢çš„æ–¹å¼å®šä½åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city='å—äº¬' çš„è®°å½•ï¼Œå¹¶ä¸”é¢å¤–ç¡®ä¿äº†ï¼Œæ¥ä¸‹æ¥æŒ‰é¡ºåºå– â€œä¸‹ä¸€æ¡è®°å½•â€ çš„éå†è¿‡ç¨‹ä¸­ï¼Œåªè¦ city çš„å€¼æ˜¯å—äº¬ï¼Œusername çš„å€¼å°±ä¸€å®šæ˜¯æœ‰åºçš„ï¼ˆä¸æ¸…æ¥šçš„å°ä¼™ä¼´å¯ä»¥å›çœ‹ä¸‹è”åˆç´¢å¼•ç›¸å…³çš„çŸ¥è¯†ï¼‰ã€‚")]),s._v(" "),r("p",[s._v("è¿™æ ·æ•´ä¸ªæŸ¥è¯¢è¿‡ç¨‹çš„æµç¨‹å°±å˜æˆäº†ï¼š")]),s._v(" "),r("p",[s._v("1ï¼‰ä»è”åˆç´¢å¼• (city, username) ä¸Šæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city='å—äº¬' æ¡ä»¶çš„ä¸»é”® id")]),s._v(" "),r("p",[s._v("2ï¼‰åˆ°ä¸»é”® id çš„ç´¢å¼•æ ‘ä¸ŠæŸ¥æ‰¾åˆ°å¯¹åº”çš„æ•´è¡Œæ•°æ®ï¼ˆå›è¡¨æŸ¥è¯¢ï¼‰ï¼Œå–å‡º usernameã€city å’Œ age è¿™ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ç›´æ¥è¿”å›")]),s._v(" "),r("p",[s._v("3ï¼‰ä»è”åˆç´¢å¼• (city, username) ä¸Šå–ä¸‹ä¸€ä¸ªè®°å½•ä¸»é”® idï¼›")]),s._v(" "),r("p",[s._v("4ï¼‰é‡å¤æ­¥éª¤ 2ã€3ï¼Œç›´åˆ°æŸ¥åˆ°ç¬¬ 1000 æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯ä¸æ»¡è¶³ city='å—äº¬' æ¡ä»¶æ—¶å¾ªç¯ç»“æŸ")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219230014.png",alt:""}})]),s._v(" "),r("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæŸ¥è¯¢è¿‡ç¨‹ä¸éœ€è¦ sort_bufferï¼Œä¹Ÿä¸éœ€è¦æ’åºï¼Œæ•´ä¸ªæµç¨‹è¢«å¤§å¤§ç¼©çŸ­äº†ã€‚")]),s._v(" "),r("p",[s._v("å†ç”¨ explain åˆ†æä¸‹è¿™æ¡è¯­å¥ï¼š")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219230206.png",alt:""}})]),s._v(" "),r("p",[s._v("ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒExtra å­—æ®µä¸­æ²¡æœ‰ Using filesort äº†ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦æ’åºäº†ã€‚")]),s._v(" "),r("p",[s._v("è€Œä¸”ç”±äº (city,username) è¿™ä¸ªè”åˆç´¢å¼•æœ¬èº«æœ‰åºï¼Œæ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢ä¹Ÿä¸ç”¨æŠŠ 4000 è¡Œå…¨éƒ½è¯»ä¸€éï¼Œåªè¦æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å‰ 1000 æ¡è®°å½•å°±å¯ä»¥é€€å‡ºäº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œï¼Œåªéœ€è¦æ‰«æ 1000 æ¬¡å°±å¯ä»¥äº†ã€‚")]),s._v(" "),r("p",[s._v("è¯´åˆ°è¿™é‡Œï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰å°ä¼™ä¼´èƒ½å¤Ÿå¯Ÿè§‰ç‚¹ä»€ä¹ˆ")]),s._v(" "),r("p",[s._v("å›è¡¨æŸ¥è¯¢ï¼")]),s._v(" "),r("p",[s._v("æ˜¯çš„ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œå›è¡¨æŸ¥è¯¢è¿™ä¸ªä¸œè¥¿ä¸€ç›´éƒ½åœ¨å•Šï¼Œå®Œå…¨å¯ä»¥ç”¨ä¸Š "),r("strong",[s._v("è¦†ç›–ç´¢å¼•")]),s._v(" æ¥å»æ‰å›è¡¨è¿‡ç¨‹å•Š~")]),s._v(" "),r("p",[s._v("ä¸å°±æ˜¯è¦å›è¡¨å–å‡º usernameã€city å’Œ age è¿™ä¸‰ä¸ªå­—æ®µçš„å€¼å—ï¼Œå’±å°±ç›´æ¥åˆ›å»ºä¸€ä¸ª cityã€name å’Œ age çš„è”åˆç´¢å¼•ï¼Œå¯¹åº”çš„ SQL è¯­å¥å°±æ˜¯ï¼š")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_city_username_age"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" age"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("è¿™æ ·ï¼Œæ•´ä¸ªæµç¨‹å°±è¢«è¿›ä¸€æ­¥ç®€åŒ–ï¼š")]),s._v(" "),r("p",[s._v("1ï¼‰ä»è”åˆç´¢å¼• (city, username, age) æ ‘ä¸Šæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city='å—äº¬' æ¡ä»¶çš„è®°å½•ï¼ŒæŠŠè¿™æ¡è®°å½•ä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ç›´æ¥è¿”å›ï¼›")]),s._v(" "),r("p",[s._v("2ï¼‰ä»è”åˆç´¢å¼• (city, username, age) æ ‘ä¸Šå–ä¸‹ä¸€ä¸ªè®°å½•ï¼ŒåŒæ ·å°†è¿™æ¡è®°å½•ä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ç›´æ¥è¿”å›")]),s._v(" "),r("p",[s._v("3ï¼‰é‡å¤æ‰§è¡Œæ­¥éª¤ 2ï¼Œç›´åˆ°æŸ¥åˆ°ç¬¬ 1000 æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯ä¸æ»¡è¶³ city='å—äº¬' æ¡ä»¶æ—¶å¾ªç¯ç»“æŸ")]),s._v(" "),r("p",[s._v("å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),s._v(" "),r("p",[r("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220219230809.png",alt:""}})]),s._v(" "),r("p",[s._v("å½“ç„¶äº†ï¼Œä½¿ç”¨è¦†ç›–ç´¢å¼•æ€§èƒ½ä¸Šä¼šå¿«å¾ˆå¤šï¼Œä½†æ˜¯ç´¢å¼•çš„ç»´æŠ¤ä¹Ÿæ˜¯éœ€è¦ä»£ä»·çš„ï¼Œè¿™é‡Œéœ€è¦è‡ªå·±åšä¸€ä¸ªæƒè¡¡å–èˆ~")]),s._v(" "),r("hr"),s._v(" "),r("p",[s._v("æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š")]),s._v(" "),r("blockquote",[r("p",[s._v("ğŸ¥¸ "),r("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šSQL ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ")]),s._v(" "),r("p",[s._v("ğŸ˜ "),r("strong",[s._v("å°ç‰›è‚‰")]),s._v("ï¼šæˆ‘æ¥è¯´ä¸€ä¸‹ order by è¯­å¥çš„ä¼˜åŒ–ã€‚")]),s._v(" "),r("ol",[r("li",[s._v("order by çš„åŸºæœ¬åŸç†å…¶å®å°±æ˜¯ MySQL ä¼šç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€å—å†…å­˜ä¹Ÿå°±æ˜¯ sort_buffer ç”¨äºæ’åºï¼Œsort_buffer ä¸­å­˜å‚¨çš„æ˜¯ select æ¶‰åŠåˆ°çš„æ‰€æœ‰çš„å­—æ®µï¼Œå¯ä»¥ç§°ä¸ºå…¨å­—æ®µæ’åºå§ã€‚æ’åºè¿™ä¸ªåŠ¨ä½œï¼Œå¯èƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œä¹Ÿå¯èƒ½éœ€è¦ä½¿ç”¨å¤–éƒ¨æ’åºï¼Œè¿™å–å†³äºæ’åºæ‰€éœ€çš„å†…å­˜å’Œ sort_buffer çš„å¤§å°ï¼Œç”±å‚æ•° "),r("code",[s._v("sort_buffer_size")]),s._v(" å†³å®šã€‚å¦‚æœè¦æ’åºçš„æ•°æ®é‡å°äº sort_buffer_sizeï¼Œæ’åºå°±åœ¨å†…å­˜ä¸­å®Œæˆã€‚ä½†å¦‚æœæ’åºæ•°æ®é‡å¤ªå¤§ï¼Œå†…å­˜æ”¾ä¸ä¸‹ï¼Œå°±éœ€è¦åˆ©ç”¨ç£ç›˜ä¸´æ—¶æ–‡ä»¶æ¥è¾…åŠ©æ’åºã€‚")]),s._v(" "),r("li",[s._v("è¿™é‡Œå…¶å®å¯ä»¥ä¼˜åŒ–ä¸‹ï¼Œåªå­˜æ”¾æ’åºç›¸å…³çš„å­—æ®µï¼Œè€Œä¸æ˜¯ select æ¶‰åŠçš„æ‰€æœ‰å­—æ®µï¼Œè¿™æ · sort_buffer ä¸­å­˜æ”¾çš„ä¸œè¥¿å°±å¤šä¸€ç‚¹ï¼Œå°±å°½å¯èƒ½é¿å…ä½¿ç”¨ç£ç›˜è¿›è¡Œå¤–éƒ¨æ’åºï¼Œæˆ–è€…è¯´ä½¿å¾—åˆ’åˆ†çš„ç£ç›˜æ–‡ä»¶ç›¸å¯¹å˜å°‘ï¼Œå‡å°‘ç£ç›˜è®¿é—®ã€‚è¿™ç§æ’åºç§°ä¸º rowid æ’åºã€‚ å¦‚æœè¡¨ä¸­å•è¡Œçš„é•¿åº¦è¶…è¿‡ "),r("code",[s._v("max_length_for_sort_data")]),s._v(" å®šä¹‰çš„å€¼ï¼Œé‚£ MySQL å°±è®¤ä¸ºå•è¡Œå¤ªå¤§ï¼ˆé‚£ä¹ˆæ•°æ®é‡è‚¯å®šå°±è¶Šå¤§ï¼Œsort_buffer å¯èƒ½ä¸å¤Ÿç”¨ï¼‰ï¼Œç”±å…¨å­—æ®µæ’åºæ”¹ä¸º rowid æ’åºã€‚")])]),s._v(" "),r("p",[s._v("ä»¥ä¸Šæ˜¯æˆ‘ä»¬è¯´çš„å…³äº order by çš„ä¸¤ä¸ªå‚æ•°ä¼˜åŒ–ï¼Œè¿˜å¯ä»¥æ ¹æ®ç´¢å¼•è¿›è¡Œä¸€äº›ä¼˜åŒ–")]),s._v(" "),r("ol",[r("li",[s._v("ä»¥ "),r("code",[s._v("select a, b, c from table where a = xxxx order by b")]),s._v(" ä¸ºä¾‹ï¼Œæˆ‘ä»¬ä¸ºæŸ¥è¯¢æ¡ä»¶ a å’Œæ’åºæ¡ä»¶ b å»ºç«‹è”åˆç´¢å¼•ï¼Œè”åˆç´¢å¼•å°±æ˜¯ a æ˜¯ä»å°åˆ°å¤§ç»å¯¹æœ‰åºçš„ï¼Œå¦‚æœ a ç›¸åŒï¼Œå†æŒ‰ b ä»å°åˆ°å¤§æ’åºï¼Œè¿™æ ·å°±ä¸éœ€è¦æ’åºäº†ï¼Œç›´æ¥é¿å…äº†æ’åºè¿™ä¸ªæ“ä½œã€‚")]),s._v(" "),r("li",[s._v("è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œç”±äºè”åˆç´¢å¼• (a, b) ä¸­æ²¡æœ‰ c çš„å€¼ï¼Œæ‰€ä»¥ä»è”åˆç´¢å¼•æ ‘ä¸Šè·å–ç¬¦åˆæ¡ä»¶çš„å¯¹åº”ä¸»é”® id åï¼Œè¿˜éœ€è¦å›è¡¨æŸ¥è¯¢å–å‡º a b c çš„å€¼ï¼Œè¿™ä¸ªå›è¡¨æŸ¥è¯¢çš„è¿‡ç¨‹å¯ä»¥é€šè¿‡å»ºç«‹ (a,b,c) è¦†ç›–ç´¢å¼•æ¥é¿å…ã€‚")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);