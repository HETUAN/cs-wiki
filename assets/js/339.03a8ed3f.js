(window.webpackJsonp=window.webpackJsonp||[]).push([[339],{807:function(s,t,a){"use strict";a.r(t);var n=a(29),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"å­—èŠ‚ä¸€é¢-â€¢-ä½œæ–‡é¢˜-â€¢-åŠ¨æ€ä»£ç†å…·ä½“æ˜¯æ€ä¹ˆå®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å­—èŠ‚ä¸€é¢-â€¢-ä½œæ–‡é¢˜-â€¢-åŠ¨æ€ä»£ç†å…·ä½“æ˜¯æ€ä¹ˆå®ç°"}},[s._v("#")]),s._v(" å­—èŠ‚ä¸€é¢ â€¢ ä½œæ–‡é¢˜ â€¢ åŠ¨æ€ä»£ç†å…·ä½“æ˜¯æ€ä¹ˆå®ç°")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[s._v("å› ä¸ºæˆ‘æ˜å¹´ä¹Ÿè¦å¼€å§‹ç§‹æ‹›äº†ï¼Œæ‰€ä»¥æœ€è¿‘å‡†å¤‡ä»¥é¢è¯•ä¸ºå¯¼å‘å¼€å§‹å†™æ–‡ç« ")]),s._v(" "),a("p",[s._v("è€ƒè™‘åˆ°ç›®å‰ç½‘ç»œä¸Šæä¾›çš„é¢è¯•é¢˜å¤§éƒ¨åˆ†éƒ½æ˜¯çŸ­çŸ­çš„å‡ è¡Œå­—ï¼Œä¹Ÿå³èƒŒè¯µç‰ˆï¼Œä¿—ç§°å…«è‚¡æ–‡ï¼Œæˆ‘è§‰å¾—è¿™æ— æ³•æ»¡è¶³å¤§éƒ¨åˆ†åŒå­¦çš„è¯‰æ±‚ï¼ŒçŸ¥å…¶ç„¶è€Œä¸çŸ¥æ‰€ä»¥ç„¶")]),s._v(" "),a("p",[s._v("æˆ‘å¸Œæœ›çš„æ˜¯"),a("strong",[s._v("ä»¥é¢è¯•é¢˜ä¸ºå¯¼å‘ï¼Œå»ºç«‹å®Œæ•´çš„çŸ¥è¯†ä½“ç³»ï¼Œè®©å…«è‚¡æ–‡å˜å¾—æœ‰ä»·å€¼")]),s._v("ï¼Œè€Œä¸æ˜¯ä¸œä¸€é”¤è¥¿ä¸€æ£’ï¼Œæ‰€ä»¥åç»­å‡†å¤‡ä»¥ç‰›å®¢ä¸Šçš„é¢ç»å¸–ä¸ºå¯¼å‘ï¼Œå¯¹æ¯ä¸ªé¢è¯•é¢˜æä¾›"),a("strong",[s._v("èƒŒè¯µç‰ˆ + è¯¦è§£ç‰ˆ")]),s._v("ï¼Œå·²ç»ä¼šçš„åŒå­¦å‘¢å¯ä»¥ç›´æ¥çœ‹èƒŒè¯µç‰ˆï¼Œè¿˜ä¸å¤ªäº†è§£çš„åŒå­¦å‘¢å¯ä»¥ç»“åˆè¯¦è§£ç‰ˆä¸€èµ·çœ‹")]),s._v(" "),a("p",[s._v("æ‰€æœ‰çš„é¢è¯•é¢˜éƒ½å·²ç»æŒ‰ç…§çŸ¥è¯†ä½“ç³»çš„é¡ºåºè¿›è¡Œè¿‡æ’åºï¼Œå¹¶ä¸”æˆ‘ä¼šåŠ å…¥ä¸€äº›è¡¥å……é¢˜ç”¨äºå®Œå–„")]),s._v(" "),a("p",[s._v("ç›®å‰å·²ç»æ•´ç†äº†ä¸€éƒ¨åˆ†æ±‡æ€»åœ¨ Notion ä¸Šï¼Œå„ä½å°ä¼™ä¼´å¯ä»¥"),a("strong",[s._v("ç¿»åˆ°æ–‡æœ«ç‚¹å‡» "),a("code",[s._v("é˜…è¯»åŸæ–‡")]),s._v(" ç›´è¾¾")])])]),s._v(" "),a("p",[s._v("ä»€ä¹ˆæ˜¯ä½œæ–‡é¢˜ï¼Ÿå°±æ˜¯è¦å›ç­”çš„å†…å®¹å¤ªç‰¹ä¹ˆå¤šäº†ï¼Œæˆ‘çœ‹äº†ä¸‹èƒŒè¯µç‰ˆçš„å­—æ•°å·²ç»åˆ° 1500 äº†")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tse1-mm.cn.bing.net/th/id/R-C.21ce091d37ac209d2feecbb64fac2966?rik=XRNy2x5lrJu8iw&riu=http%3a%2f%2fwww.yutudou.com%2fuploads%2fallimg%2f180306%2f1-1P306220614.jpg&ehk=jkbqVEqTX81NCDKc1hor3ttzM3EsJouBfNg6gORBLxo%3d&risl=&pid=ImgRaw&r=0",alt:""}})]),s._v(" "),a("p",[s._v("åœ¨åå°„é‚£ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°±æåˆ°è¿‡ï¼ŒåŠ¨æ€ä»£ç†æœºåˆ¶ä½¿ç”¨äº†åå°„ï¼ŒSpring ä¸­çš„ AOP ç”±äºä½¿ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥ä¹Ÿç›¸å½“äºä½¿ç”¨äº†åå°„æœºåˆ¶ã€‚é‚£ä¹ˆï¼Œä»£ç†æ˜¯ä»€ä¹ˆï¼ŸåŠ¨æ€ä»£ç†åˆæ˜¯ä»€ä¹ˆï¼ŸåŠ¨æ€ä»£ç†ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨åå°„çš„ï¼Ÿå…¨æ–‡è„‰ç»œæ€ç»´å¯¼å›¾å¦‚ä¸‹ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("ğŸ”ˆ æ–‡ç« æœ«å°¾è´´äº†æœ¬é¢˜çš„èƒŒè¯µç‰ˆ")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221224531.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"å¸¸è§„ç¼–ç æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§„ç¼–ç æ–¹å¼"}},[s._v("#")]),s._v(" å¸¸è§„ç¼–ç æ–¹å¼")]),s._v(" "),a("p",[s._v("åœ¨å­¦ä¹ ä»£ç†ä¹‹å‰ï¼Œå…ˆå›é¡¾ä»¥ä¸‹æˆ‘ä»¬çš„å¸¸è§„ç¼–ç æ–¹å¼ï¼šæ‰€æœ‰ "),a("code",[s._v("interface")]),s._v(" ç±»å‹çš„å˜é‡æ€»æ˜¯é€šè¿‡å‘ä¸Šè½¬å‹å¹¶æŒ‡å‘æŸä¸ªå®ä¾‹çš„ã€‚")]),s._v(" "),a("p",[s._v("1ï¼‰é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£ï¼š")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("2ï¼‰ç„¶åç¼–å†™å…¶å®ç°ç±»ï¼š")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServicseImpl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("3ï¼‰æœ€ååˆ›å»ºè¯¥å®ç°ç±»çš„å®ä¾‹ï¼Œè½¬å‹ä¸ºæ¥å£å¹¶è°ƒç”¨ï¼š")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServicseImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("ä¸Šè¿°è¿™ç§æ–¹å¼å°±æ˜¯æˆ‘ä»¬é€šå¸¸ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚è€Œä»£ç†æ¨¡å¼å’Œè¿™ç§æ–¹å¼æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œä¸”çœ‹ä¸‹æ–‡ã€‚")]),s._v(" "),a("h2",{attrs:{id:"ä»£ç†æ¨¡å¼æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç†æ¨¡å¼æ¦‚è¿°"}},[s._v("#")]),s._v(" ä»£ç†æ¨¡å¼æ¦‚è¿°")]),s._v(" "),a("p",[s._v("ç®€å•æ¥è¯´ï¼Œä»£ç†æ¨¡å¼å°±æ˜¯ "),a("strong",[s._v("ä½¿ç”¨ä»£ç†å¯¹è±¡æ¥ä»£æ›¿å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚")])]),s._v(" "),a("p",[s._v("ä»£ç†æ¨¡å¼å¤§è‡´æœ‰ä¸‰ç§è§’è‰²ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Real Subjectï¼šçœŸå®ç±»ï¼Œä¹Ÿå°±æ˜¯è¢«ä»£ç†ç±»ã€å§”æ‰˜ç±»ã€‚ç”¨æ¥çœŸæ­£å®Œæˆä¸šåŠ¡æœåŠ¡åŠŸèƒ½ï¼›")]),s._v(" "),a("li",[s._v("Proxyï¼šä»£ç†ç±»ã€‚å°†è‡ªèº«çš„è¯·æ±‚ç”¨ Real Subject å¯¹åº”çš„åŠŸèƒ½æ¥å®ç°ï¼Œä»£ç†ç±»å¯¹è±¡å¹¶ä¸çœŸæ­£çš„å»å®ç°å…¶ä¸šåŠ¡åŠŸèƒ½ï¼›")]),s._v(" "),a("li",[s._v("Subjectï¼šå®šä¹‰ RealSubject å’Œ Proxy è§’è‰²éƒ½åº”è¯¥å®ç°çš„æ¥å£ã€‚")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221222746.png",alt:""}})]),s._v(" "),a("p",[s._v("é€šä¿—æ¥è¯´ï¼Œ"),a("strong",[s._v("ä»£ç†æ¨¡å¼çš„ä¸»è¦ä½œç”¨æ˜¯æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´åœ¨ç›®æ ‡å¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰åä½ å¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œå¹¶ä¸”ä¸ç”¨ä¿®æ”¹è¿™ä¸ªæ–¹æ³•çš„åŸæœ‰ä»£ç ")]),s._v("ã€‚å¦‚æœå¤§å®¶å­¦è¿‡ Spring çš„ AOPï¼Œä¸€å®šèƒ½å¤Ÿå¾ˆå¥½çš„ç†è§£è¿™å¥è¯ã€‚")]),s._v(" "),a("p",[s._v("ä¸¾ä¸ªä¾‹å­ï¼šä½ æ‰¾äº†å°çº¢æ¥å¸®ä½ å‘å°ç»¿é—®è¯ï¼Œå°çº¢å°±çœ‹ä½œæ˜¯ä»£ç†æˆ‘çš„ä»£ç†ç±» Proxyï¼Œè€Œä½ æ˜¯ Real Subjectï¼Œå› ä¸ºå°çº¢è¦ä¼ è¾¾çš„è¯å…¶å®æ˜¯ä½ è¯´çš„ã€‚é‚£ä¹ˆä½ å’Œå°çº¢éƒ½éœ€è¦å®ç°çš„æ¥å£ï¼ˆSubjectï¼‰å°±æ˜¯è¯´è¯ï¼Œç”±äºä½ ä¿©éƒ½èƒ½è¯´è¯ï¼Œåœ¨å¤–ç•Œçœ‹æ¥ä½ ä¿©å°±æ˜¯ä¸€æ ·çš„ï¼ˆæ»‘ç¨½ï¼Œå¤§å®¶ç†è§£å°±å¥½ï¼Œä¸ç”¨è¾ƒçœŸï¼‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221155754.png",alt:""}})]),s._v(" "),a("p",[s._v("çœ‹åˆ°è¿™é‡Œï¼Œä¸çŸ¥é“å¤§å®¶èƒ½ä¸èƒ½ç†è§£äº†ä¸ºä»€ä¹ˆå§”æ‰˜ç±»å’Œä»£ç†ç±»éƒ½éœ€è¦å®ç°ç›¸åŒçš„æ¥å£ï¼Ÿ")]),s._v(" "),a("p",[s._v("é‚£æ˜¯ä¸ºäº†ä¿æŒè¡Œä¸ºçš„ä¸€è‡´æ€§ï¼Œåœ¨è®¿é—®è€…çœ‹æ¥ä¸¤è€…ä¹‹é—´å°±æ²¡æœ‰åŒºåˆ«ã€‚è¿™æ ·ï¼Œé€šè¿‡ä»£ç†ç±»è¿™ä¸ªä¸­é—´å±‚ï¼Œå¾ˆå¥½åœ°éšè—å’Œä¿æŠ¤äº†å§”æ‰˜ç±»å¯¹è±¡ï¼Œèƒ½"),a("strong",[s._v("æœ‰æ•ˆå±è”½å¤–ç•Œå¯¹å§”æ‰˜ç±»å¯¹è±¡çš„ç›´æ¥è®¿é—®")]),s._v("ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ä»£ç†ç±»ä¸ŠåŠ ä¸Šé¢å¤–çš„æ“ä½œï¼Œæ¯”å¦‚"),a("strong",[s._v("å°çº¢åœ¨è¯´è¯ä¹‹å‰ä¼šè·³ä¸€æ®µèˆï¼Œå¤–ç•Œå°±ä¼šè§‰å¾—ä½ åœ¨è¯´è¯å‰ä¼šè·³ä¸€æ®µèˆï¼Œæ‰€ä»¥ï¼Œè¿™å°±å®ç°äº†å§”æ‰˜ç±»çš„åŠŸèƒ½å¢å¼º")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("ä»£ç†æ¨¡å¼æœ‰é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ä¸¤ç§å®ç°æ–¹å¼ã€‚")]),s._v(" "),a("h2",{attrs:{id:"é™æ€ä»£ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€ä»£ç†"}},[s._v("#")]),s._v(" é™æ€ä»£ç†")]),s._v(" "),a("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯é™æ€ä»£ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯é™æ€ä»£ç†"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯é™æ€ä»£ç†")]),s._v(" "),a("p",[s._v("å…ˆæ¥çœ‹é™æ€ä»£ç†çš„å®ç°æ­¥éª¤ï¼š")]),s._v(" "),a("p",[s._v("1ï¼‰å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ˆSubjectï¼‰")]),s._v(" "),a("p",[s._v("2ï¼‰åˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),a("p",[s._v("3ï¼‰åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼ˆProxyï¼‰åŒæ ·å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),a("p",[s._v("4ï¼‰"),a("strong",[s._v("å°†å§”æ‰˜ç±» Real Subject æ³¨å…¥è¿›ä»£ç†ç±» Proxy")]),s._v("ï¼Œåœ¨ä»£ç†ç±»çš„æ–¹æ³•ä¸­è°ƒç”¨ Real Subject ä¸­çš„å¯¹åº”æ–¹æ³•ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†ç±»å±è”½å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰ååšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚")]),s._v(" "),a("p",[s._v("ä»å®ç°å’Œåº”ç”¨è§’åº¦æ¥è¯´ï¼Œé™æ€ä»£ç†ä¸­ï¼Œæˆ‘ä»¬å¯¹ç›®æ ‡å¯¹è±¡çš„æ¯ä¸ªæ–¹æ³•çš„å¢å¼ºéƒ½æ˜¯æ‰‹åŠ¨å®Œæˆçš„ï¼Œéå¸¸ä¸çµæ´»ï¼ˆæ¯”å¦‚æ¥å£ä¸€æ—¦æ–°å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ï¼‰ä¸”éº»çƒ¦ï¼ˆéœ€è¦å¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½å•ç‹¬å†™ä¸€ä¸ªä»£ç†ç±»ï¼‰ã€‚ å®é™…åº”ç”¨åœºæ™¯éå¸¸éå¸¸å°‘ï¼Œæ—¥å¸¸å¼€å‘å‡ ä¹çœ‹ä¸åˆ°ä½¿ç”¨é™æ€ä»£ç†çš„åœºæ™¯ã€‚")]),s._v(" "),a("p",[s._v("ä» JVM å±‚é¢æ¥è¯´ï¼Œ "),a("strong",[s._v("é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥å£ã€å§”æ‰˜ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†ä¸€ä¸ªä¸ªå®é™…çš„ "),a("code",[s._v(".class")]),s._v(" æ–‡ä»¶ã€‚")])]),s._v(" "),a("h3",{attrs:{id:"ä»£ç ç¤ºä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç ç¤ºä¾‹"}},[s._v("#")]),s._v(" ä»£ç ç¤ºä¾‹")]),s._v(" "),a("p",[s._v("1ï¼‰å®šä¹‰å‘é€çŸ­ä¿¡çš„æ¥å£")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("2ï¼‰åˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("3ï¼‰åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼ˆProxyï¼‰åŒæ ·å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),a("p",[s._v("4ï¼‰å°†å§”æ‰˜ç±» Real Subject æ³¨å…¥è¿›ä»£ç†ç±» Proxyï¼Œåœ¨ä»£ç†ç±»çš„æ–¹æ³•ä¸­è°ƒç”¨ Real Subject ä¸­çš„å¯¹åº”æ–¹æ³•ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†ç±»å±è”½å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰ååšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†å§”æ‰˜ç±»æ³¨å…¥è¿›ä»£ç†ç±»")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"before method send()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•")]),s._v("\n        smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"after method send()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("é‚£ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨è¿™ä¸ªè¢«å¢å¼ºçš„ "),a("code",[s._v("send")]),s._v(" æ–¹æ³•å‘¢ï¼Ÿ")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),s._v(" smsProxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        smsProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("before method send"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nsend message:java\nafter method send"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å·²ç»å¢å¼ºäº†å§”æ‰˜ç±» "),a("code",[s._v("SmsServiceImpl")]),s._v("  çš„ "),a("code",[s._v("send()")]),s._v(" æ–¹æ³•ã€‚")]),s._v(" "),a("p",[s._v("å½“ç„¶ï¼Œä»ä¸Šè¿°ä»£ç æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œé™æ€ä»£ç†å­˜åœ¨ä¸€å®šçš„å¼Šç«¯ã€‚å‡å¦‚è¯´æˆ‘ä»¬ç°åœ¨æ–°å¢äº†ä¸€ä¸ªå§”æ‰˜ç±»å®ç°äº† "),a("code",[s._v("SmsService")]),s._v(" æ¥å£ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹è¿™ä¸ªå§”æ‰˜ç±»è¿›è¡Œå¢å¼ºï¼Œå°±éœ€è¦é‡æ–°å†™ä¸€ä¸ªä»£ç†ç±»ï¼Œç„¶åæ³¨å…¥è¿™ä¸ªæ–°çš„å§”æ‰˜ç±»ï¼Œéå¸¸ä¸çµæ´»ã€‚ä¹Ÿå°±æ˜¯è¯´é™æ€ä»£ç†æ˜¯ä¸€ä¸ªå§”æ‰˜äº†å¯¹åº”ä¸€ä¸ªä»£ç†ç±»ï¼Œèƒ½ä¸èƒ½"),a("strong",[s._v("å°†ä»£ç†ç±»åšæˆä¸€ä¸ªé€šç”¨çš„")]),s._v("å‘¢ï¼Ÿä¸ºæ­¤ï¼ŒåŠ¨æ€ä»£ç†åº”ç”¨è€Œç”Ÿã€‚")]),s._v(" "),a("h2",{attrs:{id:"java-å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶"}},[s._v("#")]),s._v(" Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶")]),s._v(" "),a("p",[s._v("åœ¨è®²è§£åŠ¨æ€ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦è¯¦ç»†è¯´ä¸€ä¸‹ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶è¿™ä¸ªä¸œè¥¿ã€‚åŠ¨æ€ä»£ç†æœºåˆ¶å’Œ Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶æ¯æ¯ç›¸å…³ã€‚")]),s._v(" "),a("p",[s._v("åœ¨ä¸Šæ–‡åå°„ä¸­æˆ‘ä»¬æåˆ°ï¼Œä¸€ä¸ª "),a("code",[s._v("Class")]),s._v(" ç±»å¯¹åº”ä¸€ä¸ª "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼Œä¹Ÿå°±è¯´å­—èŠ‚ç æ–‡ä»¶ä¸­å­˜å‚¨äº†ä¸€ä¸ªç±»çš„å…¨éƒ¨ä¿¡æ¯ã€‚å­—èŠ‚ç å…¶å®æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†…å®¹æ˜¯åªæœ‰ JVM èƒ½å¤Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚")]),s._v(" "),a("p",[s._v("è§£æè¿‡ç¨‹è¿™æ ·çš„ï¼šJVM è¯»å– "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼Œå–å‡ºäºŒè¿›åˆ¶æ•°æ®ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè§£æå­—èŠ‚ç æ–‡ä»¶å†…çš„ä¿¡æ¯ï¼Œç”Ÿæˆå¯¹åº”çš„ "),a("code",[s._v("Class")]),s._v(" ç±»å¯¹è±¡ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221223435.png",alt:""}})]),s._v(" "),a("p",[s._v("æ˜¾ç„¶ï¼Œä¸Šè¿°è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æœŸå°±å‘ç”Ÿçš„ã€‚")]),s._v(" "),a("p",[s._v("é‚£ä¹ˆï¼Œç”±äºJVM æ˜¯é€šè¿‡ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯ï¼‰åŠ è½½ç±»çš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¿è¡ŒæœŸéµå¾ª Java ç¼–è¯‘ç³»ç»Ÿç»„ç»‡ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶çš„æ ¼å¼å’Œç»“æ„ï¼Œç”Ÿæˆç›¸åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œç„¶åå†æŠŠè¿™ä¸ªäºŒè¿›åˆ¶æ•°æ®åŠ è½½è½¬æ¢æˆå¯¹åº”çš„ç±»ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¸å°±å®Œæˆäº†åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªç±»ã€‚è¿™ä¸ªæ€æƒ³å…¶å®ä¹Ÿå°±æ˜¯åŠ¨æ€ä»£ç†çš„æ€æƒ³ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221223847.png",alt:""}})]),s._v(" "),a("p",[s._v("åœ¨è¿è¡Œæ—¶æœŸæŒ‰ç…§ JVM è§„èŒƒå¯¹ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶çš„ç»„ç»‡è§„åˆ™ï¼Œç”Ÿæˆå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®ã€‚å½“å‰æœ‰å¾ˆå¤šå¼€æºæ¡†æ¶å¯ä»¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼Œå¦‚")]),s._v(" "),a("ul",[a("li",[s._v("ASM")]),s._v(" "),a("li",[s._v("CGLIB")]),s._v(" "),a("li",[s._v("Javassist")]),s._v(" "),a("li",[s._v("......")])]),s._v(" "),a("p",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ"),a("strong",[s._v("CGLIB æ˜¯åŸºäº ASM çš„")]),s._v("ã€‚ è¿™é‡Œç®€å•å¯¹æ¯”ä¸€ä¸‹ ASM å’Œ Javassistï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Javassist æºä»£ç çº§ API æ¯” ASM ä¸­å®é™…çš„å­—èŠ‚ç æ“ä½œæ›´å®¹æ˜“ä½¿ç”¨")]),s._v(" "),a("li",[s._v("Javassist åœ¨å¤æ‚çš„å­—èŠ‚ç çº§æ“ä½œä¸Šæä¾›äº†æ›´é«˜çº§åˆ«çš„æŠ½è±¡å±‚ã€‚Javassist æºä»£ç çº§ API åªéœ€è¦å¾ˆå°‘çš„å­—èŠ‚ç çŸ¥è¯†ï¼Œç”šè‡³ä¸éœ€è¦ä»»ä½•å®é™…å­—èŠ‚ç çŸ¥è¯†ï¼Œå› æ­¤å®ç°èµ·æ¥æ›´å®¹æ˜“ã€æ›´å¿«ã€‚")]),s._v(" "),a("li",[s._v("Javassist ä½¿ç”¨åå°„æœºåˆ¶ï¼Œè¿™ä½¿å¾—å®ƒæ¯” ASM æ…¢ã€‚")])]),s._v(" "),a("p",[a("strong",[s._v("æ€»çš„æ¥è¯´ ASM æ¯” Javassist å¿«å¾—å¤šï¼Œå¹¶ä¸”æä¾›äº†æ›´å¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯ Javassist ç›¸å¯¹æ¥è¯´æ›´å®¹æ˜“ä½¿ç”¨")]),s._v("ï¼Œä¸¤è€…å„æœ‰åƒç§‹ã€‚")]),s._v(" "),a("p",[s._v("ä»¥ Javassist ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æ¡†æ¶åœ¨è¿è¡Œæ—¶ç”Ÿæˆ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶çš„å¼ºå¤§èƒ½åŠ›ã€‚")]),s._v(" "),a("p",[s._v("æ­£å¸¸æ¥è¯´ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("samples")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Programmer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I\'m a Programmer,Just Coding....."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("ä¸‹é¢é€šè¿‡ Javassist åˆ›å»ºå’Œä¸Šé¢ä¸€æ¨¡ä¸€æ ·çš„ "),a("code",[s._v("Programmer")]),s._v(" ç±»çš„å­—èŠ‚ç ï¼š")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("javassist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClassPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("javassist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CtClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("javassist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CtMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("javassist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CtNewMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyGenerator")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClassPool")]),s._v(" pool "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClassPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getDefault")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»º Programmer ç±»        ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CtClass")]),s._v(" cc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("makeClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.samples.Programmer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰æ–¹æ³•")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CtMethod")]),s._v(" method "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CtNewMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"public void code(){}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ’å…¥æ–¹æ³•ä»£ç ")]),s._v("\n        method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertBefore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"System.out.println(\\"I\'m a Programmer,Just Coding.....\\");"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        cc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¿å­˜ç”Ÿæˆçš„å­—èŠ‚ç ")]),s._v("\n        cc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("writeFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d://temp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("é€šè¿‡åç¼–è¯‘å·¥å…·æ‰“å¼€ "),a("code",[s._v("Programmer.class")]),s._v(" å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä»£ç ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221214349.png",alt:""}})]),s._v(" "),a("p",[s._v("ææ€–å¦‚æ–¯ï¼")]),s._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†")]),s._v(" "),a("p",[s._v("OKï¼Œäº†è§£äº† Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œå¯ä»¥å¼€å§‹å­¦ä¹ åŠ¨æ€ä»£ç†ï¼ˆDynamic Proxyï¼‰äº†ã€‚")]),s._v(" "),a("p",[s._v("å›é¡¾ä¸€ä¸‹é™æ€ä»£ç†ï¼Œæˆ‘ä»¬æŠŠé™æ€ä»£ç†çš„æ‰§è¡Œè¿‡ç¨‹æŠ½è±¡ä¸ºä¸‹å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221165344.png",alt:""}})]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹è§ï¼Œä»£ç†ç±»æ— éæ˜¯åœ¨è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•çš„å‰åå¢åŠ äº†ä¸€äº›æ“ä½œã€‚å§”æ‰˜ç±»çš„ä¸åŒï¼Œä¹Ÿå°±å¯¼è‡´ä»£ç†ç±»çš„ä¸åŒã€‚")]),s._v(" "),a("p",[s._v("é‚£ä¹ˆä¸ºäº†åšä¸€ä¸ªé€šç”¨æ€§çš„ä»£ç†ç±»å‡ºæ¥ï¼Œæˆ‘ä»¬æŠŠè°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•çš„è¿™ä¸ªåŠ¨ä½œæŠ½å–å‡ºæ¥ï¼ŒæŠŠå®ƒå°è£…æˆä¸€ä¸ªé€šç”¨æ€§çš„å¤„ç†ç±»ï¼Œäºæ˜¯å°±æœ‰äº†åŠ¨æ€ä»£ç†ä¸­çš„ "),a("code",[s._v("InvocationHandler")]),s._v(" è§’è‰²ï¼ˆå¤„ç†ç±»ï¼‰ã€‚")]),s._v(" "),a("p",[s._v("äºæ˜¯ï¼Œåœ¨ä»£ç†ç±»å’Œå§”æ‰˜ç±»ä¹‹é—´å°±å¤šäº†ä¸€ä¸ªå¤„ç†ç±»çš„è§’è‰²ï¼Œè¿™ä¸ªè§’è‰²ä¸»è¦æ˜¯"),a("strong",[s._v("å¯¹ä»£ç†ç±»è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•çš„è¿™ä¸ªåŠ¨ä½œè¿›è¡Œç»Ÿä¸€çš„è°ƒç”¨")]),s._v("ï¼Œä¹Ÿå°±æ˜¯ç”± "),a("code",[s._v("InvocationHandler")]),s._v(" æ¥ç»Ÿä¸€å¤„ç†ä»£ç†ç±»è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•è¿™ä¸ªæ“ä½œã€‚çœ‹ä¸‹å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221165429.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("ä» JVM è§’åº¦æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„")]),s._v("ã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨ Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ä¸­å·²ç»æåˆ°è¿‡ã€‚")]),s._v(" "),a("p",[s._v("è™½ç„¶åŠ¨æ€ä»£ç†åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„ç›¸å¯¹è¾ƒå°‘ï¼Œä½†æ˜¯åœ¨æ¡†æ¶ä¸­çš„å‡ ä¹æ˜¯å¿…ç”¨çš„ä¸€é—¨æŠ€æœ¯ã€‚å­¦ä¼šäº†åŠ¨æ€ä»£ç†ä¹‹åï¼Œå¯¹äºæˆ‘ä»¬ç†è§£å’Œå­¦ä¹ å„ç§æ¡†æ¶çš„åŸç†ä¹Ÿéå¸¸æœ‰å¸®åŠ©ï¼Œ"),a("strong",[s._v("Spring AOPã€RPC ç­‰æ¡†æ¶çš„å®ç°éƒ½ä¾èµ–äº†åŠ¨æ€ä»£ç†")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("å°± Java æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("JDK åŠ¨æ€ä»£ç†")]),s._v(" "),a("li",[s._v("CGLIB åŠ¨æ€ä»£ç†")]),s._v(" "),a("li",[s._v("Javassit åŠ¨æ€ä»£ç†")]),s._v(" "),a("li",[s._v("......")])]),s._v(" "),a("p",[s._v("ä¸‹é¢è¯¦ç»†è®²è§£è¿™ä¸‰ç§åŠ¨æ€ä»£ç†æœºåˆ¶ã€‚")]),s._v(" "),a("h2",{attrs:{id:"jdk-åŠ¨æ€ä»£ç†æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jdk-åŠ¨æ€ä»£ç†æœºåˆ¶"}},[s._v("#")]),s._v(" JDK åŠ¨æ€ä»£ç†æœºåˆ¶")]),s._v(" "),a("h3",{attrs:{id:"ä½¿ç”¨æ­¥éª¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨æ­¥éª¤"}},[s._v("#")]),s._v(" ä½¿ç”¨æ­¥éª¤")]),s._v(" "),a("p",[s._v("å…ˆæ¥çœ‹ä¸‹ JDK åŠ¨æ€ä»£ç†æœºåˆ¶çš„ä½¿ç”¨æ­¥éª¤ï¼š")]),s._v(" "),a("p",[s._v("1ï¼‰å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ˆSubjectï¼‰")]),s._v(" "),a("p",[s._v("2ï¼‰åˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),a("p",[s._v("3ï¼‰åˆ›å»ºä¸€ä¸ªå¤„ç†ç±»å¹¶å®ç° "),a("code",[s._v("InvocationHandler")]),s._v(" æ¥å£ï¼Œé‡å†™å…¶ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ï¼ˆåœ¨ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ä¸­åˆ©ç”¨åå°„æœºåˆ¶è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•ï¼Œå¹¶è‡ªå®šä¹‰ä¸€äº›å¤„ç†é€»è¾‘ï¼‰ï¼Œå¹¶å°†å§”æ‰˜ç±»æ³¨å…¥å¤„ç†ç±»")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221171412.png",alt:""}})]),s._v(" "),a("p",[s._v("è¯¥æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ä¸ªå‚æ•°ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("proxyï¼šä»£ç†ç±»å¯¹è±¡ï¼ˆè§ä¸‹ä¸€æ­¥ï¼‰")])]),s._v(" "),a("li",[a("p",[s._v("methodï¼šè¿˜è®°å¾—æˆ‘ä»¬åœ¨ä¸Šç¯‡æ–‡ç« åå°„ä¸­è®²åˆ°çš„ "),a("code",[s._v("Method.invoke")]),s._v(" å—ï¼Ÿå°±æ˜¯è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•ï¼ˆåå°„ï¼‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220210903.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("argsï¼šä¼ ç»™å§”æ‰˜ç±»æ–¹æ³•çš„å‚æ•°åˆ—è¡¨")])])]),s._v(" "),a("p",[s._v("4ï¼‰åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼šé€šè¿‡ "),a("code",[s._v("Proxy.newProxyInstance()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221171150.png",alt:""}})]),s._v(" "),a("p",[s._v("è¿™ä¸ªæ–¹æ³•éœ€è¦ 3 ä¸ªå‚æ•°ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("ç±»åŠ è½½å™¨ ClassLoader")]),s._v(" "),a("li",[s._v("å§”æ‰˜ç±»å®ç°çš„æ¥å£æ•°ç»„ï¼Œè‡³å°‘éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¥å£è¿›å»")]),s._v(" "),a("li",[s._v("è°ƒç”¨çš„ "),a("code",[s._v("InvocationHandler")]),s._v(" å®ä¾‹å¤„ç†æ¥å£æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ 3 æ­¥æˆ‘ä»¬åˆ›å»ºçš„ç±»çš„å®ä¾‹ï¼‰")])]),s._v(" "),a("p",[s._v("ä¹Ÿå°±æ˜¯è¯´ï¼šæˆ‘ä»¬åœ¨é€šè¿‡ "),a("code",[s._v("Proxy")]),s._v(" ç±»çš„ "),a("code",[s._v("newProxyInstance()")]),s._v(" åˆ›å»ºçš„ä»£ç†å¯¹è±¡åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…ä¼šè°ƒç”¨åˆ°å®ç°äº† "),a("code",[s._v("InvocationHandler")]),s._v(" æ¥å£çš„å¤„ç†ç±»çš„ "),a("code",[s._v("invoke()")]),s._v("æ–¹æ³•ï¼Œå¯ä»¥åœ¨ "),a("code",[s._v("invoke()")]),s._v(" æ–¹æ³•ä¸­è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰ååšä»€ä¹ˆäº‹æƒ…ã€‚")]),s._v(" "),a("h3",{attrs:{id:"ä»£ç ç¤ºä¾‹-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç ç¤ºä¾‹-2"}},[s._v("#")]),s._v(" ä»£ç ç¤ºä¾‹")]),s._v(" "),a("p",[s._v("1ï¼‰å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ˆSubjectï¼‰")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("2ï¼‰åˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("3ï¼‰åˆ›å»ºä¸€ä¸ªå¤„ç†ç±»ï¼Œå¹¶å°†å§”æ‰˜ç±»æ³¨å…¥å¤„ç†ç±»ï¼Œå¦å¤–ï¼Œè¿™ä¸ªå¤„ç†ç±»éœ€è¦å®ç° "),a("code",[s._v("InvocationHandler")]),s._v(" æ¥å£ï¼Œé‡å†™å…¶ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ï¼ˆåœ¨ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ä¸­åˆ©ç”¨åå°„æœºåˆ¶è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•ï¼Œå¹¶è‡ªå®šä¹‰ä¸€äº›å¤„ç†é€»è¾‘ï¼‰")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationTargetException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DebugInvocationHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†å§”æ‰˜ç±»æ³¨å…¥å¤„ç†ç±»ï¼ˆè¿™é‡Œæˆ‘ä»¬ç”¨ Object ä»£æ›¿ï¼Œæ–¹ä¾¿æ‰©å±•ï¼‰")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DebugInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é‡å†™ invoke æ–¹æ³•")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationTargetException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IllegalAccessException")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"before method "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"after method "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("4ï¼‰å®šä¹‰ä¸€ä¸ªåˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰çš„å·¥å‚ç±»ï¼šé€šè¿‡ "),a("code",[s._v("Proxy.newProxyInstance()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JdkProxyFactory")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("newProxyInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInterfaces")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DebugInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("5ï¼‰å®é™…ä½¿ç”¨")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JdkProxyFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsmsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("before method send\nsend message:Java\nafter method send\n")])])]),a("h2",{attrs:{id:"cglib-åŠ¨æ€ä»£ç†æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cglib-åŠ¨æ€ä»£ç†æœºåˆ¶"}},[s._v("#")]),s._v(" CGLIB åŠ¨æ€ä»£ç†æœºåˆ¶")]),s._v(" "),a("h3",{attrs:{id:"ä½¿ç”¨æ­¥éª¤-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨æ­¥éª¤-2"}},[s._v("#")]),s._v(" ä½¿ç”¨æ­¥éª¤")]),s._v(" "),a("p",[a("strong",[s._v("JDK åŠ¨æ€ä»£ç†æœ‰ä¸€ä¸ªæœ€è‡´å‘½çš„é—®é¢˜æ˜¯å®ƒåªèƒ½ä»£ç†å®ç°äº†æŸä¸ªæ¥å£çš„å®ç°ç±»ï¼Œå¹¶ä¸”ä»£ç†ç±»ä¹Ÿåªèƒ½ä»£ç†æ¥å£ä¸­å®ç°çš„æ–¹æ³•ï¼Œè¦æ˜¯å®ç°ç±»ä¸­æœ‰è‡ªå·±ç§æœ‰çš„æ–¹æ³•ï¼Œè€Œæ¥å£ä¸­æ²¡æœ‰çš„è¯ï¼Œè¯¥æ–¹æ³•ä¸èƒ½è¿›è¡Œä»£ç†è°ƒç”¨")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ CGLIB åŠ¨æ€ä»£ç†æœºåˆ¶ã€‚")]),s._v(" "),a("p",[s._v("ä¸Šæ–‡ä¹Ÿæåˆ°è¿‡ï¼ŒCGLIBï¼ˆCode Generation Libraryï¼‰æ˜¯ä¸€ä¸ªåŸºäº ASM çš„ Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹å’ŒåŠ¨æ€ç”Ÿæˆã€‚åŸç†å°±æ˜¯"),a("strong",[s._v("é€šè¿‡å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶åœ¨å­ç±»ä¸­æ‹¦æˆªçˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œç»‡å…¥é¢å¤–çš„ä¸šåŠ¡é€»è¾‘")]),s._v("ã€‚å…³é”®è¯å¤§å®¶æ³¨æ„åˆ°æ²¡æœ‰ï¼Œæ‹¦æˆªï¼CGLIB å¼•å…¥ä¸€ä¸ªæ–°çš„è§’è‰²å°±æ˜¯"),a("strong",[s._v("æ–¹æ³•æ‹¦æˆªå™¨")]),s._v(" "),a("code",[s._v("MethodInterceptor")]),s._v("ã€‚å’Œ JDK ä¸­çš„å¤„ç†ç±» "),a("code",[s._v("InvocationHandler")]),s._v(" å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ç”¨æ¥å®ç°æ–¹æ³•çš„ç»Ÿä¸€è°ƒç”¨çš„ã€‚çœ‹ä¸‹å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221204715.png",alt:""}})]),s._v(" "),a("p",[s._v("å¦å¤–ç”±äº CGLIB é‡‡ç”¨"),a("strong",[s._v("ç»§æ‰¿")]),s._v("çš„æ–¹å¼ï¼Œæ‰€ä»¥è¢«ä»£ç†çš„ç±»ä¸èƒ½è¢« "),a("code",[s._v("final")]),s._v(" ä¿®é¥°ã€‚")]),s._v(" "),a("p",[s._v("å¾ˆå¤šçŸ¥åçš„å¼€æºæ¡†æ¶éƒ½ä½¿ç”¨åˆ°äº† CGLIBï¼Œ ä¾‹å¦‚ "),a("strong",[s._v("Spring ä¸­çš„ AOP æ¨¡å—ä¸­ï¼šå¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œåˆ™é»˜è®¤é‡‡ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™é‡‡ç”¨ CGLIB åŠ¨æ€ä»£ç†")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("æ¥çœ‹ CGLIB åŠ¨æ€ä»£ç†çš„ä½¿ç”¨æ­¥éª¤ï¼š")]),s._v(" "),a("p",[s._v("1ï¼‰é¦–å…ˆåˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰")]),s._v(" "),a("p",[s._v("2ï¼‰åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ‹¦æˆªå™¨å®ç°æ¥å£ "),a("code",[s._v("MethodInterceptor")]),s._v("ï¼Œå¹¶é‡å†™ "),a("code",[s._v("intercept")]),s._v(" æ–¹æ³•ã€‚"),a("code",[s._v("intercept")]),s._v(" ç”¨äºæ‹¦æˆªå¹¶å¢å¼ºå§”æ‰˜ç±»çš„æ–¹æ³•ï¼ˆå’Œ JDK åŠ¨æ€ä»£ç† "),a("code",[s._v("InvocationHandler")]),s._v(" ä¸­çš„ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ç±»ä¼¼ï¼‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221202434.png",alt:""}})]),s._v(" "),a("p",[s._v("è¯¥æ–¹æ³•æ‹¥æœ‰å››ä¸ªå‚æ•°ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Object var1ï¼šå§”æ‰˜ç±»å¯¹è±¡")])]),s._v(" "),a("li",[a("p",[s._v("Method var2ï¼šè¢«æ‹¦æˆªçš„æ–¹æ³•ï¼ˆå§”æ‰˜ç±»ä¸­éœ€è¦å¢å¼ºçš„æ–¹æ³•ï¼‰")])]),s._v(" "),a("li",[a("p",[s._v("Object[] var3ï¼šæ–¹æ³•å…¥å‚")])]),s._v(" "),a("li",[a("p",[s._v("MethodProxy var4ï¼šç”¨äºè°ƒç”¨å§”æ‰˜ç±»çš„åŸå§‹æ–¹æ³•ï¼ˆåº•å±‚ä¹Ÿæ˜¯é€šè¿‡åå°„æœºåˆ¶ï¼Œä¸è¿‡ä¸æ˜¯ "),a("code",[s._v("Method.invoke")]),s._v(" äº†ï¼Œè€Œæ˜¯ä½¿ç”¨ "),a("code",[s._v("MethodProxy.invokeSuper")]),s._v(" æ–¹æ³•ï¼‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221202913.png",alt:""}})])])]),s._v(" "),a("p",[s._v("3ï¼‰åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼šé€šè¿‡ "),a("code",[s._v("Enhancer.create()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221203102.png",alt:""}})]),s._v(" "),a("p",[s._v("ä¹Ÿå°±æ˜¯è¯´ï¼šæˆ‘ä»¬åœ¨é€šè¿‡ "),a("code",[s._v("Enhancer")]),s._v(" ç±»çš„ "),a("code",[s._v("create()")]),s._v(" åˆ›å»ºçš„ä»£ç†å¯¹è±¡åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…ä¼šè°ƒç”¨åˆ°å®ç°äº† "),a("code",[s._v("MethodInterceptor")]),s._v(" æ¥å£çš„å¤„ç†ç±»çš„ "),a("code",[s._v("intercept()")]),s._v("æ–¹æ³•ï¼Œå¯ä»¥åœ¨ "),a("code",[s._v("intercept()")]),s._v(" æ–¹æ³•ä¸­è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰ååšä»€ä¹ˆäº‹æƒ…ã€‚")]),s._v(" "),a("blockquote",[a("p",[s._v("å¯ä»¥å‘ç°ï¼ŒCGLIB åŠ¨æ€ä»£ç†æœºåˆ¶å’Œ JDK åŠ¨æ€ä»£ç†æœºåˆ¶çš„æ­¥éª¤å·®ä¸å¤šï¼ŒCGLIB åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯æ–¹æ³•æ‹¦æˆªå™¨ "),a("code",[s._v("MethodInterceptor")]),s._v(" å’Œ "),a("code",[s._v("Enhancer")]),s._v("ï¼Œè€Œ JDK åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯å¤„ç†ç±» "),a("code",[s._v("InvocationHandler")]),s._v(" å’Œ "),a("code",[s._v("Proxy")]),s._v("ã€‚")])]),s._v(" "),a("h3",{attrs:{id:"ä»£ç ç¤ºä¾‹-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç ç¤ºä¾‹-3"}},[s._v("#")]),s._v(" ä»£ç ç¤ºä¾‹")]),s._v(" "),a("p",[s._v("ä¸åŒäº JDK åŠ¨æ€ä»£ç†ä¸éœ€è¦é¢å¤–çš„ä¾èµ–ã€‚CGLIB æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¦‚æœä½ è¦ä½¿ç”¨å®ƒçš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ç›¸å…³ä¾èµ–ã€‚")]),s._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("cglib"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("cglib"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("3.3.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])])]),a("p",[s._v("1ï¼‰é¦–å…ˆåˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AliSmsService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("2ï¼‰åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ‹¦æˆªå™¨å®ç°æ¥å£ "),a("code",[s._v("MethodInterceptor")]),s._v("ï¼Œå¹¶é‡å†™ "),a("code",[s._v("intercept")]),s._v(" æ–¹æ³•")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cglib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cglib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DebugMethodInterceptor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodInterceptor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("intercept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodProxy")]),s._v(" methodProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"before method "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é€šè¿‡åå°„è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" object "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" methodProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("invokeSuper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"after method "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("3ï¼‰åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼šé€šè¿‡ "),a("code",[s._v("Enhancer.create()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cglib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Enhancer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CglibProxyFactory")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" clazz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºåŠ¨æ€ä»£ç†å¢å¼ºç±»")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Enhancer")]),s._v(" enhancer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Enhancer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®ç±»åŠ è½½å™¨")]),s._v("\n        enhancer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clazz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®å§”æ‰˜ç±»ï¼ˆè®¾ç½®çˆ¶ç±»ï¼‰")]),s._v("\n        enhancer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setSuperclass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clazz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®æ–¹æ³•æ‹¦æˆªå™¨")]),s._v("\n        enhancer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DebugMethodInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºä»£ç†ç±»")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" enhancer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("ä» "),a("code",[s._v("setSuperclass")]),s._v(" æˆ‘ä»¬å°±èƒ½çœ‹å‡ºï¼Œä¸ºä»€ä¹ˆè¯´ CGLIB æ˜¯åŸºäºç»§æ‰¿çš„ã€‚")])]),s._v(" "),a("p",[s._v("4ï¼‰å®é™…ä½¿ç”¨")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AliSmsService")]),s._v(" aliSmsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AliSmsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CglibProxyFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AliSmsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\naliSmsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("before method send\nsend message:Java\nafter method send\n")])])]),a("h3",{attrs:{id:"jdk-åŠ¨æ€ä»£ç†å’Œ-cglib-åŠ¨æ€ä»£ç†å¯¹æ¯”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jdk-åŠ¨æ€ä»£ç†å’Œ-cglib-åŠ¨æ€ä»£ç†å¯¹æ¯”"}},[s._v("#")]),s._v(" JDK åŠ¨æ€ä»£ç†å’Œ CGLIB åŠ¨æ€ä»£ç†å¯¹æ¯”")]),s._v(" "),a("p",[s._v("1ï¼‰JDK åŠ¨æ€ä»£ç†æ˜¯åŸºäºå®ç°äº†æ¥å£çš„å§”æ‰˜ç±»ï¼Œé€šè¿‡æ¥å£å®ç°ä»£ç†ï¼›è€Œ CGLIB åŠ¨æ€ä»£ç†æ˜¯åŸºäºç»§æ‰¿äº†å§”æ‰˜ç±»çš„å­ç±»ï¼Œé€šè¿‡å­ç±»å®ç°ä»£ç†ã€‚")]),s._v(" "),a("p",[s._v("2ï¼‰JDK åŠ¨æ€ä»£ç†åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»ï¼Œä¸”åªèƒ½å¢å¼ºæ¥å£ä¸­ç°æœ‰çš„æ–¹æ³•ï¼›è€Œ CGLIB å¯ä»¥ä»£ç†æœªå®ç°ä»»ä½•æ¥å£çš„ç±»ã€‚")]),s._v(" "),a("p",[s._v("3ï¼‰å°±äºŒè€…çš„æ•ˆç‡æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯ JDK åŠ¨æ€ä»£ç†çš„æ•ˆç‡æ›´é«˜ï¼Œéšç€ JDK ç‰ˆæœ¬çš„å‡çº§ï¼Œè¿™ä¸ªä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚")]),s._v(" "),a("blockquote",[a("p",[s._v("æä¸€å˜´ï¼Œå¸¸è§çš„è¿˜æœ‰ "),a("strong",[s._v("Javassist åŠ¨æ€ä»£ç†æœºåˆ¶")]),s._v("ã€‚å’Œ CGLIB ä¸€æ ·ï¼Œä½œä¸ºä¸€ä¸ª Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼ŒJavassist å¤©ç”Ÿå°±æ‹¥æœ‰åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»çš„èƒ½åŠ›ï¼Œå®ç°åŠ¨æ€ä»£ç†è‡ªç„¶ä¸åœ¨è¯ä¸‹ã€‚ Dubbo å°±æ˜¯é»˜è®¤ä½¿ç”¨ Javassit æ¥è¿›è¡ŒåŠ¨æ€ä»£ç†çš„ã€‚")])]),s._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨åŠ¨æ€ä»£ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨åŠ¨æ€ä»£ç†"}},[s._v("#")]),s._v(" ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨åŠ¨æ€ä»£ç†")]),s._v(" "),a("p",[s._v("1ï¼‰è®¾è®¡æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªè®¾è®¡åŸåˆ™æ˜¯"),a("strong",[s._v("å¼€é—­åŸåˆ™")]),s._v("ï¼Œå³"),a("strong",[s._v("å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾")]),s._v("ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­æœ‰æ—¶ä¼šæ¥æ‰‹å¾ˆå¤šå‰äººçš„ä»£ç ï¼Œé‡Œé¢ä»£ç é€»è¾‘è®©äººæ‘¸ä¸ç€å¤´è„‘ï¼Œå°±å¾ˆéš¾å»ä¸‹æ‰‹ä¿®æ”¹ä»£ç ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†å¯¹ç±»è¿›è¡Œå¢å¼ºã€‚")]),s._v(" "),a("p",[s._v("2ï¼‰æˆ‘ä»¬åœ¨ä½¿ç”¨ "),a("strong",[s._v("RPC æ¡†æ¶")]),s._v("çš„æ—¶å€™ï¼Œæ¡†æ¶æœ¬èº«å¹¶ä¸èƒ½æå‰çŸ¥é“å„ä¸ªä¸šåŠ¡æ–¹è¦è°ƒç”¨å“ªäº›æ¥å£çš„å“ªäº›æ–¹æ³• ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ç”¨é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼æ¥å»ºç«‹ä¸€ä¸ªä¸­é—´äººç»™å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¹Ÿæ–¹ä¾¿æ¡†æ¶è¿›è¡Œæ­å»ºé€»è¾‘ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯å®¢æˆ·ç«¯ä»£ç å’Œæ¡†æ¶æ¾è€¦åˆçš„ä¸€ç§è¡¨ç°ã€‚")]),s._v(" "),a("p",[s._v("3ï¼‰"),a("strong",[s._v("Spring çš„ AOP")]),s._v(" æœºåˆ¶åŒæ ·ä¹Ÿæ˜¯é‡‡ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œæ­¤å¤„ä¸åšè¯¦ç»†è®¨è®ºã€‚")]),s._v(" "),a("h2",{attrs:{id:"é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†å¯¹æ¯”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†å¯¹æ¯”"}},[s._v("#")]),s._v(" é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†å¯¹æ¯”")]),s._v(" "),a("p",[s._v("1ï¼‰"),a("strong",[s._v("çµæ´»æ€§")]),s._v(" ï¼šåŠ¨æ€ä»£ç†æ›´åŠ çµæ´»ï¼Œä¸éœ€è¦å¿…é¡»å®ç°æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä»£ç†å®ç°ç±»ï¼Œå¹¶ä¸”å¯ä»¥ä¸éœ€è¦é’ˆå¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ã€‚å¦å¤–ï¼Œé™æ€ä»£ç†ä¸­ï¼Œæ¥å£ä¸€æ—¦æ–°å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ˜¯éå¸¸éº»çƒ¦çš„")]),s._v(" "),a("p",[s._v("2ï¼‰"),a("strong",[s._v("JVM å±‚é¢")]),s._v(" ï¼šé™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥å£ã€å®ç°ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†ä¸€ä¸ªä¸ªå®é™…çš„ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ã€‚è€ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),a("p",[s._v("å…¨éƒ¨æ‹ä¸€éä¸‹æ¥è¿˜æ˜¯æ”¶è·è›®å¤šçš„ï¼Œæˆ‘æ„Ÿè§‰åªè¦ç†è§£äº†å­—èŠ‚ç åœ¨ç¼–è¯‘æœŸç”Ÿæˆè¿˜æ˜¯åœ¨è¿è¡ŒæœŸç”Ÿæˆï¼Œå°±å·®ä¸å¤šèƒ½å¤ŸæŠŠæ¡ä½é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†äº†ã€‚æ€»ç»“ä¸€ä¸‹é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ä¸­çš„è§’è‰²ï¼š")]),s._v(" "),a("p",[s._v("é™æ€ä»£ç†ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Subjectï¼šå…¬å…±æ¥å£")]),s._v(" "),a("li",[s._v("Real Subjectï¼šå§”æ‰˜ç±»")]),s._v(" "),a("li",[s._v("Proxyï¼šä»£ç†ç±»")])]),s._v(" "),a("p",[s._v("JDK åŠ¨æ€ä»£ç†ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Subjectï¼šå…¬å…±æ¥å£")]),s._v(" "),a("li",[s._v("Real Subjectï¼šå§”æ‰˜ç±»")]),s._v(" "),a("li",[s._v("Proxyï¼šä»£ç†ç±»")]),s._v(" "),a("li",[a("strong",[s._v("InvocationHandler")]),s._v("ï¼šå¤„ç†ç±»ï¼Œç»Ÿä¸€è°ƒç”¨æ–¹æ³•")])]),s._v(" "),a("p",[s._v("CGLIB åŠ¨æ€ä»£ç†ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Subjectï¼šå…¬å…±æ¥å£")]),s._v(" "),a("li",[s._v("Real Subjectï¼šå§”æ‰˜ç±»")]),s._v(" "),a("li",[s._v("Proxyï¼šä»£ç†ç±»")]),s._v(" "),a("li",[a("strong",[s._v("MethodInterceptor")]),s._v("ï¼šæ–¹æ³•æ‹¦æˆªå™¨ï¼Œç»Ÿä¸€è°ƒç”¨æ–¹æ³•")])]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tse1-mm.cn.bing.net/th/id/R-C.ecf48f83dcedd409bf5f310cef6f01d4?rik=oYieDBCyO%2bhsuQ&riu=http%3a%2f%2fwww.youqu5.net%2fd%2ffile%2f2019-08-09%2f4fb1066bb180172c1594754834155dea.jpg&ehk=aPLxu9WiE%2bECcnkhAO7ahNeJpv6Rzm1NY0hDiNC4zkQ%3d&risl=&pid=ImgRaw&r=0",alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("ğŸ¥¸ "),a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šè®²ä¸€ä¸‹åŠ¨æ€ä»£ç†çš„å…·ä½“å®ç°ï¼ˆè¿™ä¸ªé—®é¢˜éå¸¸å®¹æ˜“å‡ºç°åœ¨é¢è¯•å®˜å’Œä½ èŠ Spring éƒ¨åˆ†çš„æ—¶å€™ï¼‰")]),s._v(" "),a("p",[s._v("ğŸ˜ "),a("strong",[s._v("å°ç‰›è‚‰")]),s._v("ï¼šé¦–å…ˆï¼ŒåŠ¨æ€ä»£ç†å®ƒæ˜¯ä»£ç†æ¨¡å¼çš„ä¸€ç§ï¼Œæ‰€è°“ä»£ç†æ¨¡å¼å°±æ˜¯ï¼Œä½¿ç”¨ä»£ç†å¯¹è±¡æ¥ä»£æ›¿å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚ä»£ç†æ¨¡å¼æœ‰ä¸‰å¤§è§’è‰²ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Real Subjectï¼šçœŸå®ç±»ï¼Œä¹Ÿå°±æ˜¯è¢«ä»£ç†ç±»ã€å§”æ‰˜ç±»ã€‚ç”¨æ¥çœŸæ­£å®Œæˆä¸šåŠ¡æœåŠ¡åŠŸèƒ½")]),s._v(" "),a("li",[s._v("Proxyï¼šä»£ç†ç±»ã€‚å°†è‡ªèº«çš„è¯·æ±‚ç”¨ Real Subject å¯¹åº”çš„åŠŸèƒ½æ¥å®ç°ï¼Œä»£ç†ç±»å¯¹è±¡å¹¶ä¸çœŸæ­£çš„å»å®ç°å…¶ä¸šåŠ¡åŠŸèƒ½")]),s._v(" "),a("li",[s._v("Subjectï¼šå®šä¹‰ RealSubject å’Œ Proxy è§’è‰²éƒ½åº”è¯¥å®ç°çš„æ¥å£")])]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("ä»£ç†æ¨¡å¼åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚")]),s._v(" "),a("p",[s._v("å…ˆæ¥è¯´é™æ€ä»£ç†ï¼š")]),s._v(" "),a("p",[s._v("é™æ€ä»£ç†å°±æ˜¯ï¼Œå¯¹äºä½ æƒ³è¦å¢å¼ºçš„å§”æ‰˜ç±»ï¼Œæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªä»£ç†ç±»ï¼Œè¿™ä¸¤ä¸ªç±»å®ç°ä¸€ä¸ªåŒæ ·çš„æ¥å£ï¼Œç„¶åå°†å§”æ‰˜ç±»æ³¨å…¥è¿›ä»£ç†ç±»ä¸­ï¼Œåœ¨ä»£ç†ç±»çš„æ–¹æ³•ä¸­è°ƒç”¨å§”æ‰˜ç±»ä¸­çš„å¯¹åº”æ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†ç±»å±è”½å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰ååšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚")]),s._v(" "),a("p",[s._v("ä» JVM å±‚é¢æ¥è¯´ï¼Œ é™æ€ä»£ç†å°±æ˜¯åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥å£ã€å§”æ‰˜ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†ä¸€ä¸ªä¸ªå®é™…çš„ "),a("code",[s._v(".class")]),s._v(" æ–‡ä»¶ã€‚")]),s._v(" "),a("p",[s._v("é™æ€ä»£ç†çš„å¼Šç«¯å¾ˆæ˜æ˜¾ï¼Œä¸€ä¸ªå§”æ‰˜ç±»å¯¹åº”ä¸€ä¸ªä»£ç†ç±»ï¼Œå¤šä¸ªå§”æ‰˜ç±»å°±éœ€è¦æ–°å»ºå¤šä¸ªä»£ç†ç±»ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½å°†ä»£ç†ç±»åšæˆä¸€ä¸ªé€šç”¨çš„å‘¢ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¸ºæ­¤ï¼ŒåŠ¨æ€ä»£ç†åº”ç”¨è€Œç”Ÿã€‚")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰ï¼šJDK åŠ¨æ€ä»£ç†å’Œ CGLIB åŠ¨æ€ä»£ç†")]),s._v(" "),a("p",[s._v("å…ˆæ¥è¯´ JDK åŠ¨æ€ä»£ç†ï¼š")]),s._v(" "),a("p",[s._v("åŒæ ·çš„ï¼ŒJDK åŠ¨æ€ä»£ç†éœ€è¦å§”æ‰˜ç±»å®ç°ä¸€ä¸ªæ¥å£ï¼Œä¸è¿‡ä»£ç†ç±»å°±ä¸éœ€è¦ä¹Ÿå®ç°åŒæ ·çš„æ¥å£äº†ï¼Œä½†æ˜¯ï¼ŒJDK åŠ¨æ€ä»£ç†æœºåˆ¶ä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°çš„è§’è‰²ï¼Œé‚£å°±æ˜¯å¤„ç†ç±»ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªå¤„ç†ç±»ï¼Œç„¶åå°†å§”æ‰˜ç±»æ³¨å…¥å¤„ç†ç±»ï¼Œå¦å¤–ï¼Œè¿™ä¸ªå¤„ç†ç±»éœ€è¦å®ç° "),a("code",[s._v("InvocationHandler")]),s._v(" æ¥å£ï¼Œå¹¶é‡å†™å…¶ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ï¼Œåœ¨ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ä¸­å¯ä»¥åˆ©ç”¨åå°„æœºåˆ¶è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•ï¼Œå¹¶å¯ä»¥åœ¨å…¶å‰åæ·»åŠ ä¸€äº›é¢å¤–çš„å¤„ç†é€»è¾‘ã€‚æœ€åï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåˆ›å»ºä»£ç†å¯¹è±¡çš„å·¥å‚ç±»ï¼ˆä»£ç†ç±»ï¼‰ï¼Œé€šè¿‡ "),a("code",[s._v("Proxy.newProxyInstance()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("JDK åŠ¨æ€ä»£ç†æœ‰ä¸€ä¸ªæœ€è‡´å‘½çš„é—®é¢˜æ˜¯å®ƒåªèƒ½ä»£ç†å®ç°äº†æŸä¸ªæ¥å£çš„å®ç°ç±»ï¼Œå¹¶ä¸”ä»£ç†ç±»ä¹Ÿåªèƒ½ä»£ç†æ¥å£ä¸­å®ç°çš„æ–¹æ³•ï¼Œè¦æ˜¯å®ç°ç±»ä¸­æœ‰è‡ªå·±ç§æœ‰çš„æ–¹æ³•ï¼Œè€Œæ¥å£ä¸­æ²¡æœ‰çš„è¯ï¼Œè¯¥æ–¹æ³•å°±ä¸èƒ½è¿›è¡Œä»£ç†è°ƒç”¨ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ CGLIB åŠ¨æ€ä»£ç†æœºåˆ¶ï¼ŒCGLIBï¼ˆCode Generation Libraryï¼‰å…¶å®å°±æ˜¯ä¸€ä¸ªåŸºäº ASM çš„ Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ã€‚")]),s._v(" "),a("p",[s._v("è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼š")]),s._v(" "),a("p",[s._v("ä¸€ä¸ª "),a("code",[s._v("Class")]),s._v(" ç±»å¯¹åº”ä¸€ä¸ª "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼Œå¯¹å§ï¼Œä¹Ÿå°±æ˜¯è¯´å­—èŠ‚ç æ–‡ä»¶ä¸­å­˜å‚¨äº†ä¸€ä¸ªç±»çš„å…¨éƒ¨ä¿¡æ¯ã€‚å­—èŠ‚ç å…¶å®æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†…å®¹æ˜¯åªæœ‰ JVM èƒ½å¤Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚")]),s._v(" "),a("p",[s._v("JVM è§£æå­—èŠ‚ç æ–‡ä»¶ä¹Ÿå°±æ˜¯åŠ è½½ç±»çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šJVM è¯»å– "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼Œå–å‡ºäºŒè¿›åˆ¶æ•°æ®ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè§£æå­—èŠ‚ç æ–‡ä»¶å†…çš„ä¿¡æ¯ï¼Œç„¶åç”Ÿæˆå¯¹åº”çš„ "),a("code",[s._v("Class")]),s._v(" ç±»å¯¹è±¡ã€‚")]),s._v(" "),a("p",[s._v("æ˜¾ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æœŸå°±å‘ç”Ÿçš„ã€‚")]),s._v(" "),a("p",[s._v("é‚£å¦‚æœæˆ‘ä»¬åœ¨è¿è¡ŒæœŸéµå¾ª Java ç¼–è¯‘ç³»ç»Ÿç»„ç»‡ "),a("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶çš„æ ¼å¼å’Œç»“æ„ï¼Œç”Ÿæˆç›¸åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆè¿™å°±æ˜¯å­—èŠ‚ç å·¥å…·åšçš„äº‹æƒ…ï¼‰ï¼Œç„¶åå†æŠŠè¿™ä¸ªäºŒè¿›åˆ¶æ•°æ®åŠ è½½è½¬æ¢æˆå¯¹åº”çš„ç±»ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¸å°±å®Œæˆäº†åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªç±»å—ã€‚è¿™ä¸ªæ€æƒ³å…¶å®ä¹Ÿå°±æ˜¯åŠ¨æ€ä»£ç†çš„æ€æƒ³ã€‚")]),s._v(" "),a("p",[s._v("ç®€å•æ¥è¯´ï¼ŒåŠ¨æ€ä»£å°±æ˜¯é€šè¿‡å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶åœ¨å­ç±»ä¸­æ‹¦æˆªçˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼ˆè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯´ CGLIB æ˜¯åŸºäºç»§æ‰¿çš„äº†ï¼‰ï¼Œç»‡å…¥é¢å¤–çš„ä¸šåŠ¡é€»è¾‘ã€‚å…³é”®è¯å°±æ˜¯æ‹¦æˆªï¼ŒCGLIB å¼•å…¥ä¸€ä¸ªæ–°çš„è§’è‰²æ–¹æ³•æ‹¦æˆªå™¨ï¼Œè®©å…¶å®ç°æ¥å£ "),a("code",[s._v("MethodInterceptor")]),s._v("ï¼Œå¹¶é‡å†™ "),a("code",[s._v("intercept")]),s._v(" æ–¹æ³•ï¼Œè¿™é‡Œçš„ "),a("code",[s._v("intercept")]),s._v(" ç”¨äºæ‹¦æˆªå¹¶å¢å¼ºå§”æ‰˜ç±»çš„æ–¹æ³•ï¼ˆå’Œ JDK åŠ¨æ€ä»£ç† "),a("code",[s._v("InvocationHandler")]),s._v(" ä¸­çš„ "),a("code",[s._v("invoke")]),s._v(" æ–¹æ³•ç±»ä¼¼ï¼‰ï¼Œæœ€åï¼Œé€šè¿‡ "),a("code",[s._v("Enhancer.create()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡ã€‚")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ä½¿ç”¨åŠ¨æ€ä»£ç†å‘¢ï¼Ÿ")]),s._v(" "),a("ol",[a("li",[s._v("è®¾è®¡æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªè®¾è®¡åŸåˆ™æ˜¯å¼€é—­åŸåˆ™ï¼Œå³å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­æœ‰æ—¶ä¼šæ¥æ‰‹å¾ˆå¤šå‰äººçš„ä»£ç ï¼Œé‡Œé¢ä»£ç é€»è¾‘è®©äººæ‘¸ä¸ç€å¤´è„‘ï¼Œå°±å¾ˆéš¾å»ä¸‹æ‰‹ä¿®æ”¹ä»£ç ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†å¯¹ç±»è¿›è¡Œå¢å¼ºã€‚")]),s._v(" "),a("li",[s._v("æˆ‘ä»¬åœ¨ä½¿ç”¨ RPC æ¡†æ¶çš„æ—¶å€™ï¼Œæ¡†æ¶æœ¬èº«å¹¶ä¸èƒ½æå‰çŸ¥é“å„ä¸ªä¸šåŠ¡æ–¹è¦è°ƒç”¨å“ªäº›æ¥å£çš„å“ªäº›æ–¹æ³•ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ç”¨é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼æ¥å»ºç«‹ä¸€ä¸ªä¸­é—´äººç»™å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¹Ÿæ–¹ä¾¿æ¡†æ¶è¿›è¡Œæ­å»ºé€»è¾‘ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯å®¢æˆ·ç«¯ä»£ç å’Œæ¡†æ¶æ¾è€¦åˆçš„ä¸€ç§è¡¨ç°ã€‚")]),s._v(" "),a("li",[s._v("Spring çš„ AOP æœºåˆ¶åŒæ ·ä¹Ÿæ˜¯é‡‡ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œbalabala......")])]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("å¦ˆçš„ï¼Œé•¿åä¸€å£æ°”ï¼Œè¦è¯´çš„çœŸ TM å¤šï¼Œæ±‚æ±‚é¢è¯•å®˜çœ‹åœ¨æˆ‘è¿™ä¹ˆç†Ÿç»ƒçš„ä»½ä¸Šé€Ÿåº¦æ‰“æ–­æˆ‘ï¼Œå¹¶å†™ä¸ªåŸºç¡€æ‰å®çš„é¢è¯„ï¼Œæ»‘ç¨½")])])])}),[],!1,null,null,null);t.default=e.exports}}]);