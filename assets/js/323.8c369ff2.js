(window.webpackJsonp=window.webpackJsonp||[]).push([[323],{791:function(s,a,t){"use strict";t.r(a);var e=t(29),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"å¹»è¯»ä¸ºä»€ä¹ˆä¼šè¢«-mysql-å•ç‹¬æ‹å‡ºæ¥è§£å†³"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¹»è¯»ä¸ºä»€ä¹ˆä¼šè¢«-mysql-å•ç‹¬æ‹å‡ºæ¥è§£å†³"}},[s._v("#")]),s._v(" å¹»è¯»ä¸ºä»€ä¹ˆä¼šè¢« MySQL å•ç‹¬æ‹å‡ºæ¥è§£å†³ï¼Ÿ")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("æ‰€è°“å¹»è¯»ï¼Œå³ä¸€ä¸ªäº‹åŠ¡åœ¨å‰åä¸¤æ¬¡æŸ¥è¯¢åŒä¸€ä¸ªèŒƒå›´çš„æ—¶å€™ï¼Œåä¸€æ¬¡æŸ¥è¯¢çœ‹åˆ°äº†å‰ä¸€æ¬¡æŸ¥è¯¢æ²¡æœ‰çœ‹åˆ°çš„è¡Œï¼Œè¿™ä¸ªå›ç­”ä¼°è®¡å¤§ä¼™å„¿å·²ç»èƒŒçƒ‚äº†ï¼Œä½†æ˜¯å®ƒå…·ä½“æœ‰ä»€ä¹ˆåæœå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¼šè¢« MySQL å•ç‹¬æ‹å‡ºæ¥è§£å†³å‘¢ï¼ŸMySQL åˆæ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ")]),s._v(" "),t("blockquote",[t("p",[s._v("è€è§„çŸ©ï¼ŒèƒŒè¯µç‰ˆåœ¨æ–‡æœ«ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"å½“å‰è¯»å’Œå¿«ç…§è¯»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å½“å‰è¯»å’Œå¿«ç…§è¯»"}},[s._v("#")]),s._v(" å½“å‰è¯»å’Œå¿«ç…§è¯»")]),s._v(" "),t("p",[s._v("åœ¨äº†è§£å¹»è¯»ä»¥åŠ MySQL æ˜¯å¦‚ä½•è§£å†³å¹»è¯»è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œä»€ä¹ˆæ˜¯"),t("strong",[s._v("å½“å‰è¯»")]),s._v("ã€ä»€ä¹ˆæ˜¯"),t("strong",[s._v("å¿«ç…§è¯»")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("å¿«ç…§è¯»ï¼šè¯»å–å¿«ç…§ä¸­çš„æ•°æ®ï¼Œä¸éœ€è¦è¿›è¡ŒåŠ é”ã€‚çœ‹åˆ°å¿«ç…§è¿™ä¸¤ä¸ªå­—ï¼Œå„ä½è‚¯å®šé©¬ä¸Šå°±æƒ³åˆ° MVCC äº†ï¼Œæ˜¯è¿™æ ·ï¼ŒMVCC ä½œç”¨äºè¯»å–å·²æäº¤å’Œå¯é‡å¤è¯»ï¼ˆé»˜è®¤ï¼‰è¿™ä¸¤ä¸ªéš”ç¦»çº§åˆ«ï¼Œè¿™ä¿©éš”ç¦»çº§åˆ«ä¸‹çš„æ™®é€š select æ“ä½œå°±æ˜¯å¿«ç…§è¯»")]),s._v(" "),t("p",[s._v("å½“å‰è¯»ï¼šè¯»å–çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®, å¹¶ä¸”å¯¹è¯»å–çš„è®°å½•åŠ é”, é˜»å¡å…¶ä»–äº‹åŠ¡åŒæ—¶æ”¹åŠ¨ç›¸åŒè®°å½•ï¼Œé¿å…å‡ºç°å®‰å…¨é—®é¢˜ã€‚")]),s._v(" "),t("p",[s._v("é™¤äº†è¯»å–å·²æäº¤å’Œå¯é‡å¤è¯»è¿™ä¿©éš”ç¦»çº§åˆ«ä¸‹çš„æ™®é€š select æ“ä½œï¼Œå…¶ä½™æ“ä½œéƒ½æ˜¯å½“å‰è¯»ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("share")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å…±äº«è¯»é”"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v("\n")])])]),t("p",[s._v("ä¸¾ä¸ªä¾‹å­ï¼Œæ¥ç›´è§‚æ„Ÿå—ä¸‹å¿«ç…§è¯»å’Œå½“å‰è¯»ï¼Œä»¥å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬ç›®å‰æœ‰ä¸€å¼  user è¡¨ï¼Œæœ‰å¦‚ä¸‹çš„æ•°æ®ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124161017.png",alt:""}})]),s._v(" "),t("p",[s._v("å¼€å¯ä¸¤ä¸ªäº‹åŠ¡ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124161505.png",alt:""}})]),s._v(" "),t("p",[s._v("äº‹åŠ¡ 1 å…ˆæ¥ä¸ªå¿«ç…§è¯»çœ‹çœ‹ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124161543.png",alt:""}})]),s._v(" "),t("p",[s._v("æ²¡æ¯›ç—…ï¼Œå¾ˆæ­£å¸¸ã€‚")]),s._v(" "),t("p",[s._v("äº‹åŠ¡ 2 ä¿®æ”¹ age = 99ï¼Œç„¶åæäº¤ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124161627.png",alt:""}})]),s._v(" "),t("p",[s._v("ä½ çŒœï¼Œè¿™æ—¶å€™ï¼Œäº‹åŠ¡ 1 å¿«ç…§è¯»å‡ºæ¥çš„æ•°æ®åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ˜¯çš„ï¼Œä»ç„¶æ˜¯æ—§æ•°æ®ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124161712.png",alt:""}})]),s._v(" "),t("p",[s._v("é‚£äº‹åŠ¡ 1 â€œå½“å‰è¯»â€ å‡ºæ¥çš„æ•°æ®è‚¯å®šæ˜¯æœ€æ–°çš„äº†ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124161807.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"å¹»è¯»åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¹»è¯»åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜"}},[s._v("#")]),s._v(" å¹»è¯»åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜")]),s._v(" "),t("p",[s._v("æ‰€è°“å¹»è¯»ï¼Œå³ä¸€ä¸ªäº‹åŠ¡åœ¨å‰åä¸¤æ¬¡æŸ¥è¯¢åŒä¸€ä¸ªèŒƒå›´çš„æ—¶å€™ï¼Œåä¸€æ¬¡æŸ¥è¯¢çœ‹åˆ°äº†å‰ä¸€æ¬¡æŸ¥è¯¢æ²¡æœ‰çœ‹åˆ°çš„è¡Œã€‚")]),s._v(" "),t("p",[s._v("åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ™®é€šçš„æŸ¥è¯¢æ˜¯å¿«ç…§è¯»ï¼Œå½“å‰äº‹åŠ¡æ˜¯ä¸ä¼šçœ‹åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®çš„ã€‚å› æ­¤ï¼Œ"),t("strong",[s._v("å¹»è¯»é—®é¢˜åœ¨ â€œå½“å‰è¯»â€ ä¸‹æ‰ä¼šå‡ºç°")]),s._v("ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v('ä¹Ÿæœ‰å¾ˆå¤šçš„æ–‡ç« è¯´ç”¨ MVCC æ¥è§£å†³ "å¿«ç…§è¯»" ä¸‹çš„å¹»è¯»é—®é¢˜ï¼Œæˆ‘è§‰å¾—æ²¡å¿…è¦çº ç»“å§ï¼Œç”šè‡³å¯èƒ½é¢è¯•å®˜æ›´å¯èƒ½æ„¿æ„å¬åˆ° MVCC çš„åŸç†ã€‚')]),s._v(" "),t("p",[s._v("ä¸è¿‡ï¼Œè¯è¯´å›æ¥ï¼Œæ²¡æœ‰ MVCC æœºåˆ¶ï¼Œå“ªæ¥å¿«ç…§è¯»è¿™ä¸ªä¸œè¥¿ï¼Ÿ")])]),s._v(" "),t("p",[s._v("é‚£ä¹ˆï¼Œå¹»è¯»åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå®ƒå…·ä½“æœ‰ä»€ä¹ˆåæœå‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("ä¸å¤šåºŸè¯ï¼Œç›´æ¥ä¸Šä¾‹å­ï¼š")]),s._v(" "),t("p",[s._v('æˆ‘ä»¬æœ‰ä¸€å¼ è¡¨ user(id, username, age)ï¼Œå·²ç»æœ‰ä¸¤æ¡æ•°æ® (1, "Jack", 20), (2, "Tom", 18)')]),s._v(" "),t("p",[s._v("æœ‰å¦‚ä¸‹ä¸‰ä¸ªäº‹åŠ¡ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124172554.png",alt:""}})]),s._v(" "),t("p",[s._v("ä¼—æ‰€å‘¨çŸ¥ï¼Œselect for update è¯­å¥ä¼šåŠ è¡Œé”ï¼Œ"),t("strong",[s._v("å‡è®¾ï¼Œæ³¨æ„è¿™é‡Œæ˜¯å‡è®¾å¥¥")]),s._v("ï¼ï¼ï¼å‡è®¾äº‹åŠ¡ 1 çš„ "),t("code",[s._v("select * from user where name = 'Jack' for update")]),s._v(" åªåœ¨ id = 1 çš„è¿™ä¸€è¡Œä¸ŠåŠ è¡Œé”")]),s._v(" "),t("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œäº‹åŠ¡ 1 æ‰§è¡Œäº†ä¸‰æ¬¡æŸ¥è¯¢ï¼Œéƒ½æ˜¯è¦æŸ¥å‡º name = \"Jack\" çš„è®°å½•è¡Œã€‚æ³¨æ„æˆ‘ä»¬å‡è®¾è¿™é‡Œåªåœ¨ name = 'Jack' è¡Œä¸ŠåŠ è¡Œé”")]),s._v(" "),t("ul",[t("li",[s._v("ç¬¬ä¸€æ¬¡æŸ¥è¯¢åªè¿”å›äº† id = 1 è¿™ä¸€è¡Œ")]),s._v(" "),t("li",[s._v('åœ¨ç¬¬äºŒæ¬¡æŸ¥è¯¢ä¹‹å‰ï¼Œäº‹åŠ¡ 2 æŠŠ id = 2 è¿™ä¸€è¡Œçš„ name å€¼æ”¹æˆäº† "Jack"ï¼Œå› æ­¤äº‹åŠ¡ 1 ç¬¬äºŒæ¬¡æŸ¥è¯¢çš„ç»“æœæ˜¯ id = 1 å’Œ id = 2 è¿™ä¸¤è¡Œ')]),s._v(" "),t("li",[s._v('åœ¨ç¬¬ä¸‰æ¬¡æŸ¥è¯¢ä¹‹å‰ï¼Œäº‹åŠ¡ 3 æ’å…¥äº†ä¸€ä¸ª name = "Jack" çš„æ–°æ•°æ®ï¼Œå› æ­¤äº‹åŠ¡ 1 ç¬¬ä¸‰æ¬¡æŸ¥è¯¢çš„ç»“æœæ˜¯ id = 1ã€id = 2 ä»¥åŠ id = 3 è¿™ä¸‰è¡Œ')])]),s._v(" "),t("p",[s._v("æ˜¾ç„¶ï¼Œç¬¬ä¸‰æ¬¡æŸ¥è¯¢è¯»åˆ°çš„ id = 3 è¿™ä¸€è¡Œçš„ç°è±¡ï¼Œå°±æ˜¯å¹»è¯»")]),s._v(" "),t("p",[t("strong",[s._v("ä½†å…¶å®ä»é€»è¾‘ä¸Šæ¥è¯´ï¼Œè¿™ä¼¼ä¹æ˜¯æ²¡æœ‰é—®é¢˜çš„")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("å› ä¸ºè¿™ä¸‰ä¸ªæŸ¥è¯¢éƒ½æ˜¯åŠ äº† for updateï¼Œéƒ½æ˜¯å½“å‰è¯»ã€‚è€Œå½“å‰è¯»çš„è§„åˆ™ï¼Œå°±æ˜¯è¦èƒ½è¯»åˆ°æ‰€æœ‰å·²ç»æäº¤çš„è®°å½•çš„æœ€æ–°å€¼ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡æŸ¥è¯¢å’Œç¬¬ä¸‰æ¬¡æŸ¥è¯¢å°±æ˜¯åº”è¯¥çœ‹åˆ°äº‹åŠ¡ 2 å’Œäº‹åŠ¡ 3 çš„æ“ä½œæ•ˆæœã€‚")]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("é‚£ä¹ˆï¼Œå¹»è¯»åˆ°åº•æœ‰å•¥é—®é¢˜ï¼Ÿ")]),s._v(" "),t("p",[t("strong",[s._v("é¦–å…ˆæ˜¯è¯­ä¹‰ä¸Šçš„")]),s._v('ã€‚äº‹åŠ¡ 1 åœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™å°±å£°æ˜äº†ï¼Œæˆ‘è¦æŠŠæ‰€æœ‰ name = "Jack" çš„è¡Œé”ä½ï¼Œæ‹’ç»åˆ«çš„äº‹åŠ¡å¯¹ name = "Jack" çš„è¡Œè¿›è¡Œè¯»å†™æ“ä½œã€‚')]),s._v(" "),t("p",[s._v("ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œè¿™ä¸ªè¯­ä¹‰è¢«ç ´åäº†ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘å†å¾€äº‹åŠ¡ 2 é‡ŒåŠ ä¸€æ¡ SQL è¯­å¥ï¼ˆé»„è‰²æ¡†æ¡†ï¼‰ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211129102716.png",alt:""}})]),s._v(" "),t("p",[s._v('äº‹åŠ¡ 2 çš„ç¬¬äºŒæ¡è¯­å¥çš„æ„æ€æ˜¯ "æŠŠ id = 2 è¿™ä¸€è¡Œçš„ age å€¼æ”¹æˆäº† 40"ï¼Œè¿™è¡Œçš„ name å€¼æ˜¯ "Jack"ã€‚')]),s._v(" "),t("p",[s._v("è€Œåœ¨è¿™ä¹‹å‰ï¼Œäº‹åŠ¡ 1 åªæ˜¯ç»™ id = 1 çš„è¿™ä¸€è¡ŒåŠ äº†è¡Œé”ï¼Œå¹¶æ²¡æœ‰ç»™ id = 2 è¿™è¡ŒåŠ é”ã€‚æ‰€ä»¥ï¼Œäº‹åŠ¡ 2 æ˜¯å¯ä»¥æ‰§è¡Œè¿™æ¡ update è¯­å¥çš„ã€‚")]),s._v(" "),t("p",[s._v('è¿™æ ·ï¼Œäº‹åŠ¡ 2 å…ˆå°† id = 2 çš„ name æ”¹ä¸º Jackï¼Œç„¶åå†å°† age æ”¹ä¸º 40ï¼Œç ´åäº†äº‹åŠ¡ 1 å¯¹è¦æŠŠæ‰€æœ‰ "name = Jack çš„è¡Œé”ä½" çš„å£°æ˜')]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("å…¶æ¬¡ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œæ˜¯"),t("strong",[s._v("æ•°æ®ä¸€è‡´æ€§")]),s._v("çš„é—®é¢˜ã€‚")]),s._v(" "),t("p",[s._v("ä¼—æ‰€å‘¨çŸ¥ï¼ŒåŠ é”æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿™ä¸ªä¸€è‡´æ€§ï¼Œä¸ä»…åŒ…æ‹¬æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿˜åŒ…æ‹¬æ•°æ®å’Œæ—¥å¿—çš„ä¸€è‡´æ€§ï¼Œä¸¾ä¸ªä¾‹å­ï¼š")]),s._v(" "),t("p",[s._v("ç»™äº‹åŠ¡ 1 å†åŠ ä¸Šä¸€æ¡ SQL è¯­å¥ï¼ˆé»„è‰²æ¡†æ¡†ï¼‰")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211129104503.png",alt:""}})]),s._v(" "),t("p",[s._v("æˆ‘åœ¨ä¸Šå›¾ä¸­åœˆå‡ºäº†å››ä¸ªæ—¶åˆ»ï¼Œ T1 T2 T3 å’Œ T4ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹ç»è¿‡è¿™å››ä¸ªæ—¶åˆ»çš„æ•°æ®åº“çŠ¶æ€ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ç»è¿‡ T1 æ—¶åˆ»ï¼Œid = 1 è¿™ä¸€è¡Œå˜æˆ (1, Tom, 20)ï¼Œæ³¨æ„è¿™æ˜¯åœ¨ T4 æ‰æ­£å¼æäº¤çš„")]),s._v(" "),t("li",[s._v("ç»è¿‡ T2 æ—¶åˆ»ï¼Œid = 2 è¿™ä¸€è¡Œå˜æˆ (2, Jack, 40)")]),s._v(" "),t("li",[s._v("ç»è¿‡ T3 æ—¶åˆ»ï¼Œè¡¨é‡Œé¢å¤šäº†ä¸€è¡Œ (3, Jack, 30)")])]),s._v(" "),t("p",[s._v("å†æ¥çœ‹çœ‹è¿™æ—¶å€™ binlog æ—¥å¿—é‡Œé¢çš„å†…å®¹ï¼Œbinlog å°±æ˜¯è®°å½•ä¸‹æˆ‘ä»¬åšäº†å“ªäº›æ“ä½œå˜›ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("T2 æ—¶åˆ»ï¼Œäº‹åŠ¡ 2 æäº¤ï¼Œå†™å…¥äº† 2 æ¡ update è¯­å¥ï¼›")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" age "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"40"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*(2, Jack, 40)*/")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("T3 æ—¶åˆ»ï¼Œäº‹åŠ¡ 3 æäº¤ï¼Œå†™å…¥äº† 1 æ¡è¯­å¥ï¼›")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*(3, Jack, 30)*/")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("T4 æ—¶åˆ»ï¼Œäº‹åŠ¡ 1 æäº¤ï¼Œbinlog ä¸­å†™å…¥äº† "),t("code",[s._v('update user set name = "Tom" where name = "Jack"')]),s._v(" è¿™æ¡è¯­å¥")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tom"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),s._v("\n")])])]),t("p",[s._v('å°±æ˜¯è¯´ï¼ŒæŠŠæ‰€æœ‰ name = Jack çš„è¡Œï¼Œéƒ½ç»™æˆ‘æ”¹æˆ name = "Tom"')])])]),s._v(" "),t("p",[s._v("è¿™æ ·ï¼Œé—®é¢˜å°±æ¥å–½ï¼Œbinlog ä¸€èˆ¬éƒ½æ˜¯ç”¨äºå¤‡åº“åŒæ­¥ä¸»åº“çš„å¯¹å§ï¼Œè¿™ä¸ª binlog ä¸€æ‰§è¡Œï¼Œé‚£å²‚ä¸æ˜¯åŸå…ˆ (2, Jack, 40) å’Œ (3, Jack, 30) è¿™ä¸¤è¡Œçš„ name å…¨éƒ½å˜æˆäº† Tomã€‚")]),s._v(" "),t("p",[s._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œid = 2 å’Œ id = 3 è¿™ä¸¤è¡Œï¼Œå‘ç”Ÿäº†æ•°æ®ä¸ä¸€è‡´ã€‚")]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("æ³¨æ„ï¼è¿™ä¸ªæ•°æ®ä¸ä¸€è‡´åˆ°åº•æ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿæ˜¯å‡è®¾äº‹åŠ¡ 1 çš„ "),t("code",[s._v("select * from user where name = 'Jack' for update")]),s._v(" åªåœ¨ id = 1 çš„è¿™ä¸€è¡Œä¸ŠåŠ è¡Œé”å¯¼è‡´çš„ã€‚")]),s._v(" "),t("p",[s._v("å¾ˆæ˜¾ç„¶ï¼Œåˆ†æåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æ˜ç™½ï¼Œåªé”è¿™ä¸€è¡Œæ˜¯ä¸åˆç†çš„ã€‚é‚£å¥½åŠï¼Œè®© select for update æŠŠæ‰€æœ‰æ‰«æåˆ°çš„è¡Œéƒ½ç»™é”ä½ä¸å°±è¡Œäº†ï¼Ÿ")]),s._v(" "),t("p",[s._v("è¿™æ ·ï¼Œäº‹åŠ¡ 2 åœ¨ T2 æ—¶åˆ»å°±ä¼šè¢«é˜»å¡ä½ï¼Œç›´åˆ°äº‹åŠ¡ 1 åœ¨ T4 æ—¶åˆ» commit é‡Šæ”¾é”")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211129105557.png",alt:"image-20211129105557057"}})]),s._v(" "),t("p",[s._v("ç”±äº session A æŠŠæ‰€æœ‰çš„è¡Œéƒ½åŠ äº†å†™é”ï¼Œæ‰€ä»¥ session B åœ¨æ‰§è¡Œç¬¬ä¸€ä¸ª update è¯­å¥çš„æ—¶å€™å°±è¢«é”ä½äº†ã€‚éœ€è¦ç­‰åˆ° T6 æ—¶åˆ» session A æäº¤ä»¥åï¼Œsession B æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚")]),s._v(" "),t("p",[s._v("Butï¼Œè¿™æ ·çœ‹ä¼¼æ²¡é—®é¢˜ï¼Œæ˜¯å¦çœŸçš„æ²¡é—®é¢˜å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ¥çœ‹ binlogï¼Œæ‰§è¡Œåºåˆ—æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("äº‹åŠ¡ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*(3, Jack, 30)*/")]),s._v("\n\näº‹åŠ¡ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tom"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),s._v("\n\näº‹åŠ¡ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" age "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"40"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*(2, Jack, 40)*/")]),s._v("\n")])])]),t("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œäº‹åŠ¡ 2 çš„é—®é¢˜ç¡®å®æ˜¯è§£å†³äº†ï¼ŒJack ä¿ä½äº†ï¼Œä»ç„¶æ˜¯ (2, Jack, 40)")]),s._v(" "),t("p",[s._v('ä½†æ˜¯ï¼ï¼ï¼æ³¨æ„äº‹åŠ¡ 3ï¼Œåœ¨æ•°æ®åº“é‡Œé¢çš„ç»“æœæ˜¯ (3, "Jack", 30)ï¼Œè€Œæ ¹æ® binlog çš„æ‰§è¡Œç»“æœæ˜¯ (3, Tom, 30)ï¼Œä¹Ÿå°±æ˜¯è¯´å¹»è¯»çš„é—®é¢˜è¿˜æ˜¯æ²¡æœ‰è§£å†³ã€‚')]),s._v(" "),t("p",[s._v("é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬å·²ç»æŠŠæ‰€æœ‰èƒ½å¤Ÿæ‰«æåˆ°çš„è®°å½•éƒ½åŠ ä¸Šäº†é”ï¼Œè¿˜æ˜¯é˜»æ­¢ä¸äº† id = 3 è¿™ä¸€è¡Œçš„æ’å…¥å’Œæ›´æ–°å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("å¾ˆç®€å•ã€‚"),t("strong",[s._v("åœ¨æˆ‘ä»¬ç»™æ‰€æœ‰è¡ŒåŠ é”çš„æ—¶å€™ï¼Œid = 3 è¿™ä¸€è¡Œè¿˜ä¸å­˜åœ¨ï¼Œæ•°æ®åº“æ‰«æä¸åˆ°ï¼Œä¹Ÿå°±å½“ç„¶åŠ ä¸ä¸Šé”äº†")]),s._v("ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211129110845.png",alt:""}})]),s._v(" "),t("p",[s._v("è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¹»è¯»é—®é¢˜ä¼šè¢«å•ç‹¬æ‹¿å‡ºæ¥è§£å†³çš„åŸå› ï¼Œå³ä½¿æˆ‘ä»¬æŠŠæ‰€æœ‰çš„çš„è®°å½•éƒ½åŠ ä¸Šé”ï¼Œè¿˜æ˜¯é˜»æ­¢ä¸äº†æ–°æ’å…¥çš„è®°å½•ã€‚")]),s._v(" "),t("h2",{attrs:{id:"mysql-å¦‚ä½•è§£å†³å¹»è¯»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-å¦‚ä½•è§£å†³å¹»è¯»"}},[s._v("#")]),s._v(" MySQL å¦‚ä½•è§£å†³å¹»è¯»")]),s._v(" "),t("p",[s._v("ç°åœ¨ä½ çŸ¥é“äº†ï¼Œäº§ç”Ÿå¹»è¯»çš„åŸå› æ˜¯ï¼Œè¡Œé”åªèƒ½é”ä½è¡Œï¼Œä½†æ˜¯æ–°æ’å…¥è®°å½•è¿™ä¸ªåŠ¨ä½œï¼Œæ“ä½œçš„æ˜¯é”ä½çš„è¡Œä¹‹é—´çš„ â€œé—´éš™â€ã€‚å› æ­¤ï¼Œä¸ºäº†è§£å†³å¹»è¯»é—®é¢˜ï¼ŒInnoDB åªå¥½å¼•å…¥æ–°çš„é”ï¼Œä¹Ÿå°±æ˜¯é—´éš™é” (Gap Lock)ã€‚")]),s._v(" "),t("p",[s._v("è¿™æ ·ï¼Œå½“ä½ æ‰§è¡Œ select * from user where name = 'Jack' for update çš„æ—¶å€™ï¼Œå°±ä¸æ­¢æ˜¯ç»™æ•°æ®åº“ä¸­å·²æœ‰çš„ n ä¸ªè®°å½•åŠ ä¸Šäº†è¡Œé”ï¼Œè¿˜åŒæ—¶åŠ äº† n + 1 ä¸ªé—´éš™é”ï¼ˆè¿™ä¸¤ä¸ªåˆèµ·æ¥ä¹Ÿæˆä¸º Next-Key Lock ä¸´é”®é”ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•°æ®åº“ä¸€è¡Œè¡Œæ‰«æçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä»…æ‰«æåˆ°çš„è¡ŒåŠ ä¸Šäº†è¡Œé”ï¼Œè¿˜ç»™è¡Œä¸¤è¾¹çš„ç©ºéš™ä¹ŸåŠ ä¸Šäº†é”ã€‚è¿™æ ·å°±ç¡®ä¿äº†æ— æ³•å†æ’å…¥æ–°çš„è®°å½•ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("è¿™é‡Œå¤šæä¸€å˜´ï¼Œupdateã€delete è¯­å¥ç”¨ä¸ä¸Šç´¢å¼•æ˜¯å¾ˆææ€–çš„ã€‚")]),s._v(" "),t("p",[s._v("å¯¹éç´¢å¼•å­—æ®µè¿›è¡Œ select .. for updateã€update æˆ–è€… delete æ“ä½œï¼Œç”±äºæ²¡æœ‰ç´¢å¼•ï¼Œèµ°å…¨è¡¨æŸ¥è¯¢ï¼Œå°±ä¼šå¯¹æ‰€æœ‰è¡Œè®°å½• ä»¥åŠ æ‰€æœ‰é—´éš” éƒ½è¿›è¡Œä¸Šé”ã€‚è€Œå¯¹äºç´¢å¼•å­—æ®µè¿›è¡Œä¸Šè¿°æ“ä½œï¼Œåªæœ‰ç´¢å¼•å­—æ®µæœ¬èº«å’Œé™„è¿‘çš„é—´éš”ä¼šè¢«åŠ é”ã€‚")])]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("æ€»ç»“ä¸‹ MySQL è§£å†³å¹»è¯»çš„æ‰‹æ®µï¼š")]),s._v(" "),t("p",[s._v("éš”ç¦»çº§åˆ«ï¼šå¯é‡å¤è¯»")]),s._v(" "),t("ul",[t("li",[t("u",[s._v("å¿«ç…§è¯» MVCC")]),s._v(" + "),t("u",[s._v("å½“å‰è¯» Next-Lock Key")]),s._v("(åªåœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ç”Ÿæ•ˆ)")])]),s._v(" "),t("p",[s._v("éš”ç¦»çº§åˆ«ï¼šSERIALIZABLE")]),s._v(" "),t("ul",[t("li",[s._v("åœ¨è¿™ä¸ªéš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡åœ¨è¯»æ“ä½œæ—¶ï¼Œå…ˆåŠ è¡¨çº§åˆ«çš„å…±äº«é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ï¼›äº‹åŠ¡åœ¨å†™æ“ä½œæ—¶ï¼Œå…ˆåŠ è¡¨çº§åˆ«çš„æ’å®ƒé”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸²è¡ŒåŒ–é”å®šäº†æ•´å¼ è¡¨ï¼Œå¹»è¯»ä¸å­˜åœ¨çš„")])]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š")]),s._v(" "),t("blockquote",[t("p",[s._v("ğŸ¥¸ "),t("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šå¹»è¯»æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŒMySQL æ˜¯å¦‚ä½•è§£å†³å¹»è¯»çš„")]),s._v(" "),t("p",[s._v("ğŸ˜ "),t("strong",[s._v("å°ç‰›è‚‰")]),s._v("ï¼šå¹»è¯»å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨å‰åä¸¤æ¬¡æŸ¥è¯¢åŒä¸€ä¸ªèŒƒå›´çš„æ—¶å€™ï¼Œåä¸€æ¬¡æŸ¥è¯¢çœ‹åˆ°äº†å‰ä¸€æ¬¡æŸ¥è¯¢æ²¡æœ‰çœ‹åˆ°çš„è¡Œã€‚")]),s._v(" "),t("p",[s._v("å¹»è¯»çš„åæœå°±æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®å’Œ binlog çš„æ‰§è¡Œç»“æœä¼šä¸ä¸€è‡´ï¼Œå…¶åŸå› å°±åœ¨äºï¼Œæˆ‘ä»¬æ— æ³•é˜»æ­¢æ–°æ’å…¥çš„æ•°æ®ã€‚å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨ç»™æ‰«æåˆ°çš„è¡ŒåŠ é”çš„æ—¶å€™ï¼Œä½ ç­‰ä¼šè¦æ’å…¥çš„è¡Œè¿˜ä¸å­˜åœ¨ï¼Œä¹Ÿå°±æ²¡æ³•å¯¹ä»–è¿›è¡ŒåŠ é”ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°æ’å…¥çš„æ•°æ®ï¼Œå¯èƒ½åœ¨ä¸»åº“ä¸­æ˜¯è¿™ä¸ªæ ·å­ï¼Œä»åº“æ‰§è¡Œå®Œ binlog åå…¶å®æ˜¯ä¼šè¢«ä¿®æ”¹çš„ã€‚")]),s._v(" "),t("p",[s._v("è¿™ä¹Ÿå°±æ˜¯ä¸ºå•¥å¹»è¯»ä¼šè¢«å•ç‹¬æ‹å‡ºæ¥è§£å†³çš„åŸå› äº†ã€‚")]),s._v(" "),t("p",[s._v('å¹»è¯»é—®é¢˜åœ¨ "å½“å‰è¯»" ä¸‹æ‰ä¼šå‡ºç°ã€‚')]),s._v(" "),t("p",[s._v("æ‰€è°“å½“å‰è¯»å°±æ˜¯ï¼Œè¯»å–çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®, å¹¶ä¸”å¯¹è¯»å–çš„è®°å½•åŠ é”, é˜»å¡å…¶ä»–äº‹åŠ¡åŒæ—¶æ”¹åŠ¨ç›¸åŒè®°å½•ï¼Œé¿å…å‡ºç°å®‰å…¨é—®é¢˜ã€‚")]),s._v(" "),t("p",[s._v("ä¸ä¹‹å¯¹åº”çš„ï¼Œå¿«ç…§è¯»ï¼Œè¯»å–çš„æ˜¯å¿«ç…§ä¸­çš„æ•°æ®ï¼Œä¸éœ€è¦è¿›è¡ŒåŠ é”ã€‚è¯»å–å·²æäº¤å’Œå¯é‡å¤è¯»è¿™ä¿©éš”ç¦»çº§åˆ«ä¸‹çš„æ™®é€š select æ“ä½œå°±æ˜¯å¿«ç…§è¯»ã€‚å…¶å®å°±æ˜¯ MVCC æœºåˆ¶ï¼Œæˆ–è€…è¯´ï¼Œåœ¨å¿«ç…§è¯»ä¸‹ï¼Œé‡‡ç”¨ MVCC æœºåˆ¶è§£å†³å¹»è¯»ã€‚")]),s._v(" "),t("p",[s._v("ç„¶åï¼Œå¯¹äºå½“å‰è¯»è¿™ç§æƒ…å†µï¼Œå‰é¢æˆ‘ä»¬è¯´ï¼Œç”±äºæ— æ³•é˜»æ­¢æ–°æ’å…¥çš„æ•°æ®ï¼Œæ‰€ä»¥æ— æ³•è§£å†³å¹»è¯»é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è€ƒè™‘ï¼Œä¸ä»…å¯¹æ‰«æåˆ°çš„è¡Œè¿›è¡ŒåŠ é”ï¼Œè¿˜å¯¹è¡Œä¹‹é—´çš„é—´éš™è¿›è¡ŒåŠ é”ï¼Œè¿™æ ·å°±èƒ½æœç»æ–°æ•°æ®çš„æ’å…¥å’Œæ›´æ–°ã€‚è¿™ä¸ªå…¶å®å°±æ˜¯è®°å½•é” Record Lock å’Œé—´éš™é” Gap Lockï¼Œä¹Ÿè¢«ç§°ä¸ºä¸´é”®é” Next-Lock Keyã€‚")]),s._v(" "),t("p",[s._v("é¢ä¸´é”®é”åªåœ¨å¯é‡å¤è¯»ä¹Ÿå°±æ˜¯ InnoDB çš„é»˜è®¤éš”ç¦»çº§åˆ«ä¸‹ç”Ÿæ•ˆã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨æ›´é«˜çš„å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œå¯ä»¥ç›´æ¥æœç»å¹»è¯»é—®é¢˜ã€‚")])])])}),[],!1,null,null,null);a.default=r.exports}}]);