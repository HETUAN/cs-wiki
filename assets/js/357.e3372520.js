(window.webpackJsonp=window.webpackJsonp||[]).push([[357],{825:function(e,t,s){"use strict";s.r(t);var a=s(29),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"ååƒ»åˆçƒ­é—¨-å¼•ç”¨ä¸å¼•ç”¨é˜Ÿåˆ—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ååƒ»åˆçƒ­é—¨-å¼•ç”¨ä¸å¼•ç”¨é˜Ÿåˆ—"}},[e._v("#")]),e._v(" ååƒ»åˆçƒ­é—¨ï¼Œå¼•ç”¨ä¸å¼•ç”¨é˜Ÿåˆ—")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("å‰æ–‡ä»‹ç»äº†ä¸¤ç§åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯å›æ”¶çš„æ–¹æ³•ï¼Œæ— è®ºæ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°ç®—æ³•åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡ï¼Œè¿˜æ˜¯é€šè¿‡å¯è¾¾æ€§åˆ†æç®—æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯è¾¾ï¼Œéƒ½å’Œ â€œå¼•ç”¨â€ ç¦»ä¸å¼€å…³ç³»ã€‚")]),e._v(" "),s("p",[e._v("é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯çœŸæ­£äº†è§£ â€œå¼•ç”¨â€ è¿™ä¸ªä¸œè¥¿äº†ï¼Ÿ")]),e._v(" "),s("p",[e._v("æ–‡ç« æœ‰äº›å›¾ç‰‡æ¥æºåœ¨è¿™é‡Œ Java Reference Objects - https://www.kdgregory.com/index.php?page=java.refobjï¼Œå¾ˆ niceï¼ŒçŸ¥è¯†ä½“ç³»éå¸¸å®Œæ•´ï¼Œæ¨èå¤§ä¼™èŠ±ç‚¹æ—¶é—´çœ‹ä¸‹ï¼Œå¥å­ä¸éš¾ï¼Œå°±æ˜¯ä¸“æœ‰åè¯å¤ªå¤šï¼Œç›´æ¥è°·æ­Œç¿»è¯‘çš„è¯ä¼šéå¸¸ç”Ÿç¡¬ï¼Œæœ‰äº›çŸ¥è¯†å‚¨å¤‡ç›´æ¥è¯»åŸæ–‡ä¼šå¾ˆè½»æ¾ã€‚")]),e._v(" "),s("blockquote",[s("p",[e._v("è€è§„çŸ©ï¼ŒèƒŒè¯µç‰ˆåœ¨æ–‡æœ«ã€‚ç‚¹å‡»é˜…è¯»åŸæ–‡å¯ä»¥ç›´è¾¾æˆ‘æ”¶å½•æ•´ç†çš„å„å¤§å‚é¢è¯•çœŸé¢˜")])]),e._v(" "),s("h2",{attrs:{id:"å¼•ç”¨å’Œå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼•ç”¨å’Œå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡"}},[e._v("#")]),e._v(" å¼•ç”¨å’Œå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡")]),e._v(" "),s("blockquote",[s("p",[e._v("A "),s("u",[s("code",[e._v("reference object")]),e._v("ï¼ˆå¼•ç”¨ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªä¸å¦‚ç›´æ¥å†™æˆ reference æ›´å®¹æ˜“ç†è§£ï¼‰")]),e._v(" is a layer of indirection between your program code and some other object, called a "),s("u",[s("code",[e._v("referent")]),e._v("ï¼ˆå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼‰")]),e._v(". Each reference object is constructed around its referent, and the referent cannot be changed.")])]),e._v(" "),s("p",[e._v("ç¿»è¯‘èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå¼•ç”¨ï¼ˆreference objectï¼‰æ˜¯ä¸€ä¸ªé—´æ¥å±‚ï¼Œæˆ‘ä»¬çš„ä»£ç é€šè¿‡å¼•ç”¨è®¿é—®å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼ˆreferentï¼‰")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.kdgregory.com/images/java.refobj/normal_refobj_relations.gif",alt:"relationships between application code, soft/weak reference, and referent"}})]),e._v(" "),s("p",[e._v("æ‰€æœ‰çš„å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯æŠ½è±¡ç±» java.lang.ref."),s("code",[e._v("Reference")]),e._v(" çš„å­ç±»ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220306202827.png",alt:""}})]),e._v(" "),s("p",[e._v("è¿™ä¸ªæŠ½è±¡ç±»æä¾›äº† "),s("code",[e._v("get")]),e._v(" æ–¹æ³•ç”¨æ¥"),s("strong",[e._v("è·å–å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡")]),e._v("ï¼ˆreferentï¼‰ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220306203342.png",alt:""}})]),e._v(" "),s("p",[e._v("ä¸¾ä¸ªä¾‹å­ï¼š")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SoftReference")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("List")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" ref "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SoftReference")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("List")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("LinkedList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// somewhere else in your code, you create a Foo that you want to add to the list")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("list "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("else")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// list is gone; do whatever is appropriate")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"å››ç§å¼•ç”¨çš„å®šä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å››ç§å¼•ç”¨çš„å®šä¹‰"}},[e._v("#")]),e._v(" å››ç§å¼•ç”¨çš„å®šä¹‰")]),e._v(" "),s("p",[e._v("æˆ‘æƒ³å¤§éƒ¨åˆ†äººéƒ½å¯ä»¥å¾ˆè½»æ¾çš„è¯´å‡ºå¼•ç”¨çš„å®šä¹‰ï¼šå¦‚æœæ ˆä¸­çš„å˜é‡å­˜å‚¨çš„æ•°å€¼ä»£è¡¨çš„æ˜¯å¦å¤–ä¸€å—å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå°±ç§°è¯¥å˜é‡ä»£è¡¨äº†è¿™å—å†…å­˜ or è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚")]),e._v(" "),s("p",[e._v("åœ¨ JDK 1.2 ä¹‹å‰ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œè¿™ä¸ªå®šä¹‰å¾ˆæ­£ç¡®ã€‚")]),e._v(" "),s("p",[e._v("ä¸è¿‡ç°åœ¨æ¥çœ‹æœ‰äº›è¿‡äºç‹­éš˜äº†ã€‚")]),e._v(" "),s("p",[e._v("ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¸Œæœ›å¼•ç”¨èƒ½å¤Ÿæè¿°è¿™æ ·ä¸€ç±»å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¿˜è¶³å¤Ÿæ—¶ï¼Œå°±ä¿ç•™åœ¨å†…å­˜ä¹‹ä¸­ï¼Œå¦‚æœåƒåœ¾æ”¶é›†åå†…å­˜ç©ºé—´æ¯”è¾ƒç´§å¼ ï¼Œé‚£å°±æŠ›å¼ƒè¿™äº›å¯¹è±¡é‡Šæ”¾ç©ºé—´ã€‚")]),e._v(" "),s("p",[e._v("å¯¹äºä¸Šè¿°çš„å®šä¹‰æ¥è¯´ï¼Œä¸€ä¸ªå¯¹è±¡åªæœ‰ â€œè¢«å¼•ç”¨â€ å’Œ â€œæœªè¢«å¼•ç”¨â€ ä¸¤ç§çŠ¶æ€ï¼Œå¯¹è¿™ç§æƒ…å†µæ˜¾ç„¶æ˜¯æ— èƒ½æ— åŠ›çš„ã€‚")]),e._v(" "),s("p",[e._v("æ‰€ä»¥ï¼ŒJDK 1.2 ä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼Œè¿™ 4 ç§å¼•ç”¨çš„å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±ï¼Œæ‰€è°“ â€œå¼ºåº¦â€ï¼Œå¯ä»¥è¿™æ ·ç®€å•ç†è§£ï¼Œå¼•ç”¨çš„å¼ºåº¦"),s("strong",[e._v("è¶Šå¼º")]),e._v("ï¼Œé‚£ä¹ˆè¿™ä¸ªè¢«å¼•ç”¨çš„å¯¹è±¡å°±"),s("strong",[e._v("è¶Šä¸å®¹æ˜“")]),e._v("è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶æ‰ï¼š")]),e._v(" "),s("p",[e._v("1ï¼‰"),s("strong",[e._v("å¼ºå¼•ç”¨ï¼ŒStrongly Re-ference")])]),e._v(" "),s("p",[e._v("å¼ºå¼•ç”¨éšå¤„å¯è§ï¼Œå°±æ˜¯æœ€ä¼ ç»Ÿçš„ â€œå¼•ç”¨â€ çš„å®šä¹‰ï¼Œé€šè¿‡ new è¿›è¡Œçš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼ "),s("code",[e._v("User user = new User()")]),e._v(" è¿™ç§å¼•ç”¨å…³ç³»ã€‚")]),e._v(" "),s("p",[e._v("åªè¦è¿˜æœ‰å¼ºå¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå°±èƒ½è¡¨æ˜å¯¹è±¡è¿˜ â€œæ´»ç€â€ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œ"),s("strong",[e._v("ä¸ä¼š")]),e._v("ç¢°è¿™ç§å¯¹è±¡ã€‚")]),e._v(" "),s("p",[e._v("æ¢å¥è¯è¯´ï¼Œå½“å†…å­˜ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼ŒJVM å®å¯æŠ›å‡º OOMï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šå›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡ã€‚")]),e._v(" "),s("p",[e._v("2ï¼‰"),s("strong",[e._v("è½¯å¼•ç”¨ï¼ŒSoft Reference")])]),e._v(" "),s("p",[e._v("è½¯å¼•ç”¨å°±å¯¹åº”æˆ‘ä»¬ä¸Šé¢ä¸¾çš„é‚£ä¸ªä¾‹å­ï¼Œå¯ä»¥è®©å¯¹è±¡è±å…ä¸€äº›åƒåœ¾æ”¶é›†ï¼Œç”¨æ¥æè¿°ä¸€äº›"),s("strong",[e._v("è¿˜æœ‰ç”¨ã€ä½†éå¿…é¡»")]),e._v("çš„å¯¹è±¡")]),e._v(" "),s("p",[e._v("å¦‚æœå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œé‚£ä¹ˆè½¯å¼•ç”¨å°±ä¸ä¼šè¢«å›æ”¶æ‰ï¼Œä½†æ˜¯å¦‚æœå¿«è¦å‘ç”Ÿ OOM äº†ï¼Œé‚£ä¹ˆ JVM å°±ä¼šå¯¹è¿™äº›è½¯å¼•ç”¨è¿›è¡Œå›æ”¶é‡Šæ”¾ç©ºé—´ï¼Œå¦‚æœå¯¹è¿™äº›è½¯å¼•ç”¨å›æ”¶å®Œäº†ä¹‹åè¿˜æ˜¯æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡º OOMã€‚")]),e._v(" "),s("p",[e._v("åœ¨ JDK 1.2 ä¹‹åæä¾›äº† "),s("code",[e._v("SoftReference")]),e._v(" ç±»æ¥å®ç°è½¯å¼•ç”¨")]),e._v(" "),s("p",[e._v("3ï¼‰"),s("strong",[e._v("å¼±å¼•ç”¨ï¼ŒWeak Reference")])]),e._v(" "),s("p",[e._v("å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°é‚£äº›éå¿…é¡»å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ã€‚")]),e._v(" "),s("p",[e._v("å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªä»…æŒæœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿçš„æ—¶å€™ï¼Œ"),s("strong",[e._v("æ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿ")]),e._v("ï¼Œè¿™ä¸ªå¯¹è±¡éƒ½ä¼šè¢«å›æ”¶æ‰ã€‚")]),e._v(" "),s("p",[e._v("æ¢å¥è¯è¯´ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚")]),e._v(" "),s("p",[e._v("åœ¨ JDK 1.2 ä¹‹åæä¾›äº† "),s("code",[e._v("WeakReference")]),e._v(" ç±»æ¥å®ç°å¼±å¼•ç”¨")]),e._v(" "),s("p",[e._v("4ï¼‰"),s("strong",[e._v("è™šå¼•ç”¨ï¼ŒPhantom Reference")])]),e._v(" "),s("p",[e._v("è™šå¼•ç”¨ä¹Ÿç§°ä¸º "),s("strong",[e._v("å¹½çµå¼•ç”¨")]),e._v("ã€"),s("strong",[e._v("å¹»å½±å¼•ç”¨")]),e._v("ã€"),s("strong",[e._v("å¹»è±¡å¼•ç”¨")]),e._v("ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚")]),e._v(" "),s("p",[e._v("å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰å¹»åƒå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±"),s("strong",[e._v("å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·")]),e._v("ï¼Œå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ²¡æœ‰ä»»ä½•å½±å“ï¼Œæˆ‘ä»¬ä¹Ÿ"),s("strong",[e._v("æ— æ³•")]),e._v("é€šè¿‡å¹»åƒå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼ˆçœ‹ä¸‹å›¾ï¼Œå®ƒçš„ get æ–¹æ³•æ°¸è¿œè¿”å› nullï¼‰")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220306203408.png",alt:"è™šå¼•ç”¨çš„ get æ–¹æ³•"}})]),e._v(" "),s("p",[e._v("æ»‘ç¨½äº†ï¼Œé‚£å¹»åƒå¼•ç”¨æœ‰å•¥ç”¨ï¼Ÿ")]),e._v(" "),s("p",[e._v("äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®å¹»åƒå¼•ç”¨å…³è”ä»è€Œ"),s("strong",[e._v("è·Ÿè¸ªè¿™ä¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„æ´»åŠ¨")]),e._v("ï¼ˆè¯¦ç»†è§ä¸‹æ–‡è§£é‡Šï¼‰")]),e._v(" "),s("p",[e._v("åœ¨ JDK 1.2 ä¹‹åæä¾›äº† "),s("code",[e._v("PhantomReference")]),e._v(" ç±»æ¥å®ç°å¹»åƒå¼•ç”¨")]),e._v(" "),s("h2",{attrs:{id:"å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"}},[e._v("#")]),e._v(" å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ")]),e._v(" "),s("p",[e._v("åœ¨ JDK1.2 ä¹‹å‰ï¼Œä¸€ä¸ª"),s("u",[e._v("å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼ˆobject life cycleï¼‰")]),e._v("å¯ä»¥ç®€å•çš„ç”¨ä¸‹å›¾è¡¨ç¤ºï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.kdgregory.com/images/java.refobj/object_life_cycle.gif",alt:"object life-cycle, without reference objects"}})]),e._v(" "),s("p",[e._v("è€Œåœ¨ JDK1.2 ä¸­ï¼Œå¼•å…¥äº† "),s("code",[e._v("java.lang.ref")]),e._v(" åŒ…ï¼Œä¸€ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­æ–°å¢äº†ä¸‰ä¸ª"),s("u",[e._v("çŠ¶æ€ï¼ˆstageï¼‰")]),e._v("ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307120610.png",alt:""}})]),e._v(" "),s("p",[e._v("å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†å¼ºå¼•ç”¨å¯¹åº”çš„å¼ºå¯è¾¾çŠ¶æ€ï¼ˆstrongly reachableï¼‰ä¹‹å¤–ï¼Œé¢å¤–æ·»åŠ äº†ä¸ªä¸‰ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«å¯¹åº”è½¯å¼•ç”¨ã€å¼±å¼•ç”¨å’Œè™šå¼•ç”¨ï¼ˆå¹»åƒå¼•ç”¨ï¼‰ï¼š")]),e._v(" "),s("ul",[s("li",[e._v("softly reachableï¼Œè½¯å¯è¾¾ï¼šå°±æ˜¯å½“æˆ‘ä»¬åªèƒ½é€šè¿‡è½¯å¼•ç”¨æ‰èƒ½è®¿é—®åˆ°å¯¹è±¡çš„çŠ¶æ€")]),e._v(" "),s("li",[e._v("weakly reachableï¼Œå¼±å¯è¾¾ï¼šå°±æ˜¯æ— æ³•é€šè¿‡å¼ºå¼•ç”¨æˆ–è€…è½¯å¼•ç”¨è®¿é—®ï¼Œåªèƒ½é€šè¿‡å¼±å¼•ç”¨è®¿é—®æ—¶çš„çŠ¶æ€ã€‚")]),e._v(" "),s("li",[e._v("phantom reachableï¼Œå¹»è±¡å¯è¾¾ï¼šä¸Šé¢æµç¨‹å›¾å·²ç»å¾ˆç›´è§‚äº†ï¼Œå°±æ˜¯æ²¡æœ‰å¼ºã€è½¯ã€å¼±å¼•ç”¨å…³è”ï¼Œå¹¶ä¸”è¢«å›æ”¶æ‰äº†ï¼Œåªæœ‰å¹»åƒå¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ã€‚")])]),e._v(" "),s("p",[e._v("é™¤äº†å¹»åƒå¼•ç”¨ï¼ˆå› ä¸º get æ°¸è¿œè¿”å› nullï¼‰ï¼Œå¦‚æœå¯¹è±¡è¿˜æ²¡æœ‰è¢«é”€æ¯ï¼Œéƒ½å¯ä»¥é€šè¿‡ get æ–¹æ³•è·å–åŸæœ‰å¯¹è±¡ã€‚è¿™æ„å‘³ç€ï¼Œåˆ©ç”¨è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œé‡æ–°æŒ‡å‘å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯äººä¸ºçš„æ”¹å˜äº†å¯¹è±¡çš„å¯è¾¾æ€§çŠ¶æ€ï¼è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸Šé¢å›¾é‡Œæœ‰äº›åœ°æ–¹ç”»äº†åŒå‘ç®­å¤´ã€‚")]),e._v(" "),s("h2",{attrs:{id:"å¼•ç”¨é˜Ÿåˆ—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼•ç”¨é˜Ÿåˆ—"}},[e._v("#")]),e._v(" å¼•ç”¨é˜Ÿåˆ—")]),e._v(" "),s("p",[e._v("å¼•ç”¨é˜Ÿåˆ— "),s("code",[e._v("ReferenceQueue")]),e._v(" æ˜¯ç”¨æ¥é…åˆå¼•ç”¨å·¥ä½œçš„ï¼Œæœ€å¸¸ä¸å¹»åƒå¼•ç”¨ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸º"),s("strong",[e._v("å¹»åƒå¼•ç”¨çš„æ„é€ å‡½æ•°å¿…é¡»æŒ‡å®šå¼•ç”¨é˜Ÿåˆ—")]),e._v("ï¼Œè€Œå…¶ä»–å¼•ç”¨ç±»å‹æ²¡æœ‰å¼•ç”¨é˜Ÿåˆ—ä¸€æ ·å¯ä»¥è¿è¡Œã€‚")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307111523.png",alt:""}})]),e._v(" "),s("p",[s("strong",[e._v("å½“æŸä¸ªè¢«å¼•ç”¨çš„å¯¹è±¡ï¼ˆreferentï¼‰è¢«å›æ”¶çš„æ—¶å€™ï¼ŒJVM ä¼šå°†æŒ‡å‘å®ƒçš„å¼•ç”¨ï¼ˆreferenceï¼‰åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—çš„é˜Ÿåˆ—æœ«å°¾ï¼Œè¿™ç›¸å½“äºæ˜¯ä¸€ç§é€šçŸ¥æœºåˆ¶")]),e._v("ã€‚è¿™ä¸ªæ“ä½œå…¶å®æ˜¯ç”± "),s("strong",[s("code",[e._v("ReferenceHandler")]),e._v(" å®ˆæŠ¤çº¿ç¨‹")]),e._v("æ¥åšçš„ï¼Œè¿™ä¸ªå®ˆæŠ¤çº¿ç¨‹æ˜¯åœ¨ "),s("code",[e._v("Reference")]),e._v(" é™æ€ä»£ç å—ä¸­å»ºç«‹å¹¶ä¸”è¿è¡Œçš„çº¿ç¨‹ï¼Œæ‰€ä»¥åªè¦ "),s("code",[e._v("Reference")]),e._v(" è¿™ä¸ªçˆ¶ç±»è¢«åˆå§‹åŒ–ï¼Œè¯¥çº¿ç¨‹å°±ä¼šåˆ›å»ºå’Œè¿è¡Œï¼Œå®ƒçš„è¿è¡Œæ–¹æ³•ä¸­ä¾èµ–äº†æ¯”è¾ƒå¤šçš„æœ¬åœ° (native) æ–¹æ³•ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307114209.png",alt:""}})]),e._v(" "),s("p",[e._v("ç”±äº ReferenceHandler æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œé™¤é JVM è¿›ç¨‹ç»ˆç»“ï¼Œå¦åˆ™å®ƒä¼šä¸€ç›´åœ¨åå°è¿è¡Œ(æ³¨æ„å®ƒçš„ "),s("code",[e._v("run()")]),e._v(" æ–¹æ³•é‡Œé¢ä½¿ç”¨äº†æ­»å¾ªç¯)ã€‚")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307114018.png",alt:""}})]),e._v(" "),s("p",[e._v("å®é™…ä¸Šå°±æ˜¯è°ƒç”¨äº†å¼•ç”¨é˜Ÿåˆ—çš„ "),s("code",[e._v("enqueue")]),e._v(" æ–¹æ³•æ¥æ‰§è¡Œå…¥é˜Ÿæ“ä½œï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307114346.png",alt:""}})]),e._v(" "),s("p",[e._v("è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ReferenceQueue ä¸­çš„å…ƒç´ ï¼ˆå¼•ç”¨ï¼‰æ¥çŸ¥é“å“ªäº›å¯¹è±¡ï¼ˆè¢«å¼•ç”¨çš„å¯¹è±¡ï¼‰è¢«å›æ”¶æ‰äº†ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¯¹è±¡è¢«å›æ”¶æ‰ä¹‹åï¼Œåšä¸€äº›æˆ‘ä»¬è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚")]),e._v(" "),s("blockquote",[s("p",[e._v("è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯´å¹»åƒå¼•ç”¨å­˜åœ¨çš„å”¯ä¸€ä½œç”¨å°±æ˜¯è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„æ´»åŠ¨")])]),e._v(" "),s("p",[e._v("å¦å¤–ï¼ŒReferenceQueue æä¾›äº†ä¸‰ç§æ–¹æ³•æ¥å¼¹å‡ºé˜Ÿå¤´å…ƒç´ ï¼š")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("poll()")]),e._v("ï¼šç”¨äºç§»é™¤å¹¶è¿”å›è¯¥é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›null")]),e._v(" "),s("li",[s("code",[e._v("remove()")]),e._v("ï¼šç”¨äºç§»é™¤å¹¶è¿”å›è¯¥é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨é˜Ÿåˆ—è¿”å›å¯ç”¨å¼•ç”¨å¯¹è±¡ä¹‹å‰ä¸€ç›´é˜»å¡")]),e._v(" "),s("li",[s("code",[e._v("remove (long timeout)")]),e._v("ï¼šç”¨äºç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ã€‚è¯¥æ–¹æ³•ä¼šåœ¨é˜Ÿåˆ—è¿”å›å¯ç”¨å¼•ç”¨å¯¹è±¡ä¹‹å‰ä¸€ç›´é˜»å¡ï¼Œæˆ–è€…åœ¨è¶…å‡ºæŒ‡å®šè¶…æ—¶åç»“æŸã€‚å¦‚æœè¶…å‡ºæŒ‡å®šè¶…æ—¶ï¼Œåˆ™è¿”å›nullã€‚å¦‚æœæŒ‡å®šè¶…æ—¶ä¸º0ï¼Œæ„å‘³ç€å°†æ— é™æœŸåœ°ç­‰å¾…ã€‚")])]),e._v(" "),s("h2",{attrs:{id:"ä¸åŒå¼•ç”¨ç±»å‹çš„åº”ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸åŒå¼•ç”¨ç±»å‹çš„åº”ç”¨åœºæ™¯"}},[e._v("#")]),e._v(" ä¸åŒå¼•ç”¨ç±»å‹çš„åº”ç”¨åœºæ™¯")]),e._v(" "),s("h3",{attrs:{id:"è½¯å¼•ç”¨çš„åº”ç”¨-æ–­è·¯å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è½¯å¼•ç”¨çš„åº”ç”¨-æ–­è·¯å™¨"}},[e._v("#")]),e._v(" è½¯å¼•ç”¨çš„åº”ç”¨ï¼šæ–­è·¯å™¨")]),e._v(" "),s("p",[e._v("æ–­è·¯å™¨ï¼ŒCircuit Breaker")]),e._v(" "),s("blockquote",[s("p",[e._v('A better use of soft references is to provide a "circuit breaker" for memory allocation: put a soft reference between your code and the memory it allocates, and you avoid the dreaded '),s("code",[e._v("OutOfMemoryError")]),e._v(".")])]),e._v(" "),s("p",[e._v("ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢è¿™æ®µ JDBC ä»£ç ï¼Œé€»è¾‘æ˜¯æŸ¥è¯¢æ•°æ®åº“çš„å¤šè¡Œæ•°æ®")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307114812.png",alt:""}})]),e._v(" "),s("p",[e._v("å¾€æ¯”è¾ƒæç«¯çš„æƒ…å†µæƒ³ï¼Œå¦‚æœæŸ¥è¯¢åˆ°çš„æ•°æ®æœ‰ä¸€ç™¾ä¸‡è¡Œï¼Œä½†ä½ çš„ç³»ç»Ÿçš„å¯ç”¨å†…å­˜èµ„æºå·²ç»ä¸è¶³ä»¥è£…å¾—ä¸‹è¿™ä¸€ç™¾ä¸‡è¡Œæ•°æ®ï¼Œæ­¤æ—¶ç¨‹åºè‚¯å®šå°±æŠ›é”™è¯¯äº†ã€‚")]),e._v(" "),s("p",[e._v("è¿™ä¸ªæ—¶å€™è½¯å¼•ç”¨çš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†ï¼šå¦‚æœåœ¨æŸ¥è¯¢æ•°æ®æœŸé—´ JVM å·²ç»è€—å°½äº†å†…å­˜ï¼Œé‚£ä¹ˆè¢«è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜å°±ä¼šè¢«é‡Šæ”¾æ‰ä»è€Œç»™æ–°çš„æ•°æ®æŒªå‡ºç©ºé—´ï¼ŒåŒæ—¶åœ¨ä¸šåŠ¡çº¿ç¨‹ä¸Šæˆ‘ä»¬å¯ä»¥æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸ä»¥ä¾¿æˆ‘ä»¬è¿›è¡Œç¨‹åºçš„åç»­å¤„ç†ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307115201.png",alt:""}})]),e._v(" "),s("h3",{attrs:{id:"å¼±å¼•ç”¨çš„åº”ç”¨-threadlocal-çš„-threadlocalmap-å®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼±å¼•ç”¨çš„åº”ç”¨-threadlocal-çš„-threadlocalmap-å®ç°"}},[e._v("#")]),e._v(" å¼±å¼•ç”¨çš„åº”ç”¨ï¼šThreadLocal çš„ ThreadLocalMap å®ç°")]),e._v(" "),s("p",[e._v("å¤§åé¼é¼ï¼Œè¿™ä¸ªæœ¬æ–‡å°±ä¸å¤šè¯´äº†ï¼Œåç»­ä¼šå¼€æ–‡ç« è¯¦ç»†è§£é‡Šã€‚")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307115424.png",alt:""}})]),e._v(" "),s("h3",{attrs:{id:"è™šå¼•ç”¨çš„åº”ç”¨-æ•°æ®åº“è¿æ¥æ± "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è™šå¼•ç”¨çš„åº”ç”¨-æ•°æ®åº“è¿æ¥æ± "}},[e._v("#")]),e._v(" è™šå¼•ç”¨çš„åº”ç”¨ï¼šæ•°æ®åº“è¿æ¥æ± ")]),e._v(" "),s("p",[e._v("æ•°æ®åº“è¿æ¥æ±  Connection Pool åº”è¯¥å…·å¤‡çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯èƒ½å¤Ÿæœ‰æ•ˆçš„é¿å…è¿æ¥èµ„æºæ³„éœ²ï¼ŒåŒæ—¶èƒ½å¤Ÿå¯¹è¿æ¥èµ„æºè¿›è¡Œå›æ”¶ï¼š")]),e._v(" "),s("p",[e._v("ä¸‹é¢è¿™ä¸ªç±»å¯ä»¥ä¸ç”¨æ€ä¹ˆçœ‹ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„ï¼Œç”¨æˆ·ä½¿ç”¨è¯¥è¿æ¥æ± æ—¶ä¸šåŠ¡çº¿ç¨‹æ‹¿åˆ°çš„è¿æ¥å¯¹è±¡æ­£æ˜¯è¿™ä¸ªPooledConnection å¯¹è±¡ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ Connection å¯¹è±¡")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307115656.png",alt:""}})]),e._v(" "),s("p",[e._v("é‡ç‚¹çœ‹ä¸‹ä¸‹é¢è¿™ä¸ªç±»çš„å®ç°ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307115923.png",alt:""}})]),e._v(" "),s("p",[e._v("å¦‚æœå¼•ç”¨é˜Ÿåˆ—ä¸­èƒ½å¤Ÿæ‹¿åˆ°å¼•ç”¨ï¼Œè¯´æ˜è¿æ¥å¯¹è±¡è¢« GC æ‰äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±åº”è¯¥å¯¹è¿æ¥æ± æ‰§è¡Œç›¸åº”çš„æ¸…ç†é€»è¾‘ï¼ˆé‡ç‚¹æ³¨æ„ä¸‹é¢çš„ releaseConnection æ–¹æ³•ï¼‰ï¼š")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220307120031.png",alt:""}})]),e._v(" "),s("p",[e._v("çœ‹èµ·æ¥æŒºå¤æ‚ï¼Œå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯å›´ç»•ç€è™šå¼•ç”¨çš„ç‰¹æ€§ï¼šä½ ä¸èƒ½é€šè¿‡å®ƒè®¿é—®å¯¹è±¡ï¼Œä½†æ˜¯å®ƒç»“åˆå¼•ç”¨é˜Ÿåˆ—æä¾›äº†ä¸€ç§å¯¹è±¡è¢«å›æ”¶ä»¥ååšæŸäº›äº‹æƒ…çš„æœºåˆ¶ã€‚")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š")]),e._v(" "),s("blockquote",[s("p",[e._v("ğŸ¥¸ "),s("strong",[e._v("é¢è¯•å®˜")]),e._v("ï¼šè®²ä¸€è®²å››ç§å¼•ç”¨")]),e._v(" "),s("p",[e._v("ğŸ˜ "),s("strong",[e._v("å°ç‰›è‚‰")]),e._v("ï¼šJDK 1.2 ä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼Œè¿™ 4 ç§å¼•ç”¨çš„å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±ï¼Œæ‰€è°“ â€œå¼ºåº¦â€ï¼Œå°±æ˜¯å¼•ç”¨çš„å¼ºåº¦è¶Šå¼ºï¼Œé‚£ä¹ˆè¿™ä¸ªè¢«å¼•ç”¨çš„å¯¹è±¡å°±è¶Šä¸å®¹æ˜“è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶æ‰ï¼š")]),e._v(" "),s("p",[e._v("1ï¼‰å¼ºå¼•ç”¨ï¼ŒStrongly Re-ference")]),e._v(" "),s("p",[e._v("å¼ºå¼•ç”¨éšå¤„å¯è§ï¼Œå°±æ˜¯æœ€ä¼ ç»Ÿçš„ â€œå¼•ç”¨â€ çš„å®šä¹‰ï¼Œé€šè¿‡ new è¿›è¡Œçš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼ "),s("code",[e._v("User user = new User()")]),e._v(" è¿™ç§å¼•ç”¨å…³ç³»ã€‚")]),e._v(" "),s("p",[e._v("åªè¦è¿˜æœ‰å¼ºå¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå°±èƒ½è¡¨æ˜å¯¹è±¡è¿˜ â€œæ´»ç€â€ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šç¢°è¿™ç§å¯¹è±¡ã€‚")]),e._v(" "),s("p",[e._v("2ï¼‰è½¯å¼•ç”¨ï¼ŒSoft Reference")]),e._v(" "),s("p",[e._v("è½¯å¼•ç”¨å°±æ˜¯ï¼Œå¦‚æœå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œé‚£ä¹ˆè½¯å¼•ç”¨å°±ä¸ä¼šè¢«å›æ”¶æ‰ï¼Œä½†æ˜¯å¦‚æœå¿«è¦å‘ç”Ÿ OOM äº†ï¼Œé‚£ä¹ˆ JVM å°±ä¼šå¯¹è¿™äº›è½¯å¼•ç”¨è¿›è¡Œå›æ”¶é‡Šæ”¾ç©ºé—´ï¼Œå¦‚æœå¯¹è¿™äº›è½¯å¼•ç”¨å›æ”¶å®Œäº†ä¹‹åè¿˜æ˜¯æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡º OOMã€‚")]),e._v(" "),s("p",[e._v("åœ¨ JDK 1.2 ä¹‹åæä¾›äº† "),s("code",[e._v("SoftReference")]),e._v(" ç±»æ¥å®ç°è½¯å¼•ç”¨")]),e._v(" "),s("p",[e._v("è½¯å¼•ç”¨çš„ç»å…¸åº”ç”¨å°±æ˜¯æ–­è·¯å™¨ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æŸ¥è¯¢åˆ°çš„æ•°æ®åº“æ•°æ®æœ‰ä¸€ç™¾ä¸‡è¡Œï¼Œä½†ç³»ç»Ÿçš„å¯ç”¨å†…å­˜èµ„æºå·²ç»ä¸è¶³ä»¥è£…å¾—ä¸‹è¿™ä¸€ç™¾ä¸‡è¡Œæ•°æ®ï¼Œæ­¤æ—¶ç¨‹åºè‚¯å®šå°±æŠ›é”™è¯¯äº†ã€‚")]),e._v(" "),s("p",[e._v("è¿™ä¸ªæ—¶å€™è½¯å¼•ç”¨çš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†ï¼šå¦‚æœåœ¨æŸ¥è¯¢æ•°æ®æœŸé—´ JVM å·²ç»è€—å°½äº†å†…å­˜ï¼Œé‚£ä¹ˆè¢«è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜å°±ä¼šè¢«é‡Šæ”¾æ‰ä»è€Œç»™æ–°çš„æ•°æ®æŒªå‡ºç©ºé—´ï¼ŒåŒæ—¶åœ¨ä¸šåŠ¡çº¿ç¨‹ä¸Šæˆ‘ä»¬å¯ä»¥æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸ä»¥ä¾¿æˆ‘ä»¬è¿›è¡Œç¨‹åºçš„åç»­å¤„ç†")]),e._v(" "),s("p",[e._v("3ï¼‰å¼±å¼•ç”¨ï¼ŒWeak Reference")]),e._v(" "),s("p",[e._v("å¼±å¼•ç”¨å°±æ˜¯ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªä»…æŒæœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿçš„æ—¶å€™ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œè¿™ä¸ªå¯¹è±¡éƒ½ä¼šè¢«å›æ”¶æ‰ã€‚")]),e._v(" "),s("p",[e._v("æ¢å¥è¯è¯´ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚")]),e._v(" "),s("p",[e._v("åœ¨ JDK 1.2 ä¹‹åæä¾›äº† "),s("code",[e._v("WeakReference")]),e._v(" ç±»æ¥å®ç°å¼±å¼•ç”¨")]),e._v(" "),s("p",[e._v("å¼±å¼•ç”¨çš„ç»å…¸åº”ç”¨å°±æ˜¯ ThreadLocal çš„ ThreadLocalMap å®ç°ï¼Œbalabala......")]),e._v(" "),s("p",[e._v("4ï¼‰å¹»è±¡å¼•ç”¨ï¼ŒPhantom Reference")]),e._v(" "),s("p",[e._v("å¹»è±¡å¼•ç”¨ä¹Ÿç§°ä¸ºè™šå¼•ç”¨ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚")]),e._v(" "),s("p",[e._v("å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰å¹»åƒå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ²¡æœ‰ä»»ä½•å½±å“ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•é€šè¿‡å¹»åƒå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼ˆå› ä¸ºå®ƒçš„ get æ–¹æ³•æ°¸è¿œè¿”å› nullï¼‰ã€‚æ‰€ä»¥æ„é€ å¹»åƒå¼•ç”¨çš„æ—¶å€™å¿…é¡»æŒ‡å®šå¼•ç”¨é˜Ÿåˆ— ReferenceQueueï¼Œä¸ç„¶å•¥ç”¨ä¹Ÿæ²¡æœ‰ã€‚")]),e._v(" "),s("p",[e._v("æ‰€è°“å¼•ç”¨é˜Ÿåˆ—å°±æ˜¯ï¼Œå½“æŸä¸ªè¢«å¼•ç”¨çš„å¯¹è±¡è¢«å›æ”¶çš„æ—¶å€™ï¼ŒJVM ä¼šå°†æŒ‡å‘å®ƒçš„å¼•ç”¨åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—çš„é˜Ÿåˆ—æœ«å°¾ã€‚è¿™ä¸ªæ“ä½œå…¶å®æ˜¯ç”± ReferenceHandler å®ˆæŠ¤çº¿ç¨‹æ¥åšçš„ï¼Œè¿™ä¸ªå®ˆæŠ¤çº¿ç¨‹æ˜¯åœ¨ "),s("code",[e._v("Reference")]),e._v(" é™æ€ä»£ç å—ä¸­å»ºç«‹å¹¶ä¸”è¿è¡Œçš„çº¿ç¨‹ï¼Œæ‰€ä»¥åªè¦ Reference è¿™ä¸ªçˆ¶ç±»è¢«åˆå§‹åŒ–ï¼Œè¯¥çº¿ç¨‹å°±ä¼šåˆ›å»ºå’Œè¿è¡Œï¼Œè€Œå…·ä½“çš„å¼•ç”¨å…¥é˜Ÿæ“ä½œå…¶å®å°±æ˜¯è°ƒç”¨äº† ReferenceQueue çš„ enquque æ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ ReferenceQueue ä¸­çš„å…ƒç´ ï¼ˆå¼•ç”¨ï¼‰æ¥çŸ¥é“å“ªäº›å¯¹è±¡ï¼ˆè¢«å¼•ç”¨çš„å¯¹è±¡ï¼‰è¢«å›æ”¶æ‰äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¯¹è±¡è¢«å›æ”¶æ‰ä¹‹åï¼Œæ¥åšä¸€äº›æˆ‘ä»¬è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚")]),e._v(" "),s("p",[e._v("å¹»åƒå¼•ç”¨çš„ç»å…¸åº”ç”¨å°±æ˜¯æ•°æ®åº“è¿æ¥æ± ï¼Œæ•°æ®åº“è¿æ¥æ± åº”è¯¥å…·å¤‡çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯èƒ½å¤Ÿæœ‰æ•ˆçš„é¿å…è¿æ¥èµ„æºæ³„éœ²ï¼ŒåŒæ—¶èƒ½å¤Ÿå¯¹è¿æ¥èµ„æºè¿›è¡Œå›æ”¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¹»åƒå¼•ç”¨æ¥å£°æ˜æ•°æ®åº“çš„è¿æ¥å¯¹è±¡ï¼Œè¿™æ ·ï¼Œå¦‚æœå¼•ç”¨é˜Ÿåˆ—ä¸­èƒ½å¤Ÿæ‹¿åˆ°å¼•ç”¨ï¼Œå°±è¯´æ˜å¯¹åº”çš„è¿æ¥å¯¹è±¡è¢« GC æ‰äº†ï¼Œæ­¤æ—¶å°±åº”è¯¥å¯¹è¿æ¥æ± æ‰§è¡Œç›¸åº”çš„æ¸…ç†é€»è¾‘ï¼Œé˜²æ­¢æˆ‘ä»¬å¿˜è®°é‡Šæ”¾èµ„æºå¯¼è‡´åç»­å‘ç”Ÿèµ„æºæ³„éœ²ã€‚")])])])}),[],!1,null,null,null);t.default=n.exports}}]);