(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{794:function(s,t,a){"use strict";a.r(t);var e=a(29),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"join-è¯­å¥æ‰§è¡Œè¿‡ç¨‹æ€§èƒ½å·®-åŸå› å¯èƒ½æ˜¯ä»€ä¹ˆ-å“ªé‡Œéœ€è¦å»ºç«‹ç´¢å¼•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#join-è¯­å¥æ‰§è¡Œè¿‡ç¨‹æ€§èƒ½å·®-åŸå› å¯èƒ½æ˜¯ä»€ä¹ˆ-å“ªé‡Œéœ€è¦å»ºç«‹ç´¢å¼•"}},[s._v("#")]),s._v(" Join è¯­å¥æ‰§è¡Œè¿‡ç¨‹æ€§èƒ½å·®ï¼ŒåŸå› å¯èƒ½æ˜¯ä»€ä¹ˆï¼Ÿå“ªé‡Œéœ€è¦å»ºç«‹ç´¢å¼•ï¼Ÿ")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("å°ä¼™ä¼´èš‚èšé‡‘æœäºŒé¢é‡åˆ°çš„ä¸‰é“é¢˜ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("SQL æŸ¥è¯¢è¯­å¥ï¼š"),a("code",[s._v("SELECT * FROM A JOIN B ON A.id = B.id")]),s._v("ï¼Œæ‰§è¡Œè¿‡ç¨‹æ€§èƒ½å·®ï¼ŒåŸå› å¯èƒ½æ˜¯ä»€ä¹ˆï¼Ÿ")]),s._v(" "),a("li",[s._v("ä¸Šè¿° SQL è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿå“ªé‡Œéœ€è¦å»ºç«‹ç´¢å¼•ï¼Ÿ")]),s._v(" "),a("li",[s._v("åœ¨ A.id è¿˜æ˜¯ B.id ä¸Šå»ºç«‹ç´¢å¼•å‘¢ï¼Ÿ")])]),s._v(" "),a("p",[s._v("å¯èƒ½ä½ ä¼šä¸€è„¸æ‡µé€¼ï¼ŒBut å®é™…ä¸Šï¼Œå…¶å®è€ƒçš„å°±æ˜¯ "),a("code",[s._v("join")]),s._v(" è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼Œä¸éš¾ï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« ä½ å°±ä¼šå•¦~")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211226111311.png",alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("è€è§„çŸ©ï¼ŒèƒŒè¯µç‰ˆåœ¨æ–‡æœ«ã€‚ç‚¹å‡»é˜…è¯»åŸæ–‡å¯ä»¥ç›´è¾¾æˆ‘æ”¶å½•æ•´ç†çš„å„å¤§å‚é¢è¯•çœŸé¢˜")])]),s._v(" "),a("h2",{attrs:{id:"join-åŸºæœ¬è¯­æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#join-åŸºæœ¬è¯­æ³•"}},[s._v("#")]),s._v(" join åŸºæœ¬è¯­æ³•")]),s._v(" "),a("p",[s._v("MySQL ä¸­å¸¸è§çš„æœ‰ä¸‰ç§ç”¨æ³•ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("inner")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" table2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" condition\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" table2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" condition\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("right")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" table2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" condition\n")])])]),a("ul",[a("li",[s._v("inner joinï¼šå†…è¿æ¥ï¼ˆç­‰å€¼è¿æ¥ï¼‰")]),s._v(" "),a("li",[s._v("left joinï¼šå·¦è¿æ¥")]),s._v(" "),a("li",[s._v("right joinï¼šå³è¿æ¥")])]),s._v(" "),a("p",[s._v("ä¸‹é¢ç”¨ä¾‹å­æ¥è§£é‡Šè¿™ä¸‰ç§ç”¨æ³•ï¼Œå‡è®¾æœ‰ä¸¤å¼ è¡¨ï¼Œç”¨æˆ·è¡¨ user å’Œéƒ¨é—¨è¡¨ departï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224105840.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"inner-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inner-join"}},[s._v("#")]),s._v(" inner join")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("inner")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])])]),a("p",[s._v("inner join è·å–åŒæ—¶ç¬¦åˆä¸¤å¼ è¡¨çš„æ•°æ®å¹¶ç»„åˆèµ·æ¥ã€‚")]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯åœ¨ user è¡¨å’Œ depart è¡¨ä¸­æ‰¾åˆ° name ç›¸åŒçš„è¡Œè®°å½•ï¼Œå¹¶ç»„åˆèµ·æ¥")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211226110731.png",alt:""}})]),s._v(" "),a("p",[s._v("æ¥çœ‹å®é™…çš„æ‰§è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224111647.png",alt:""}})]),s._v(" "),a("p",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸æŒ‡å®š on æ¡ä»¶è¿›è¡Œè¿‡æ»¤çš„è¯ï¼Œå–å¾—çš„ç»“æœå°±æ˜¯ä¸¤å¼ è¡¨çš„ç¬›å¡å°”ç§¯")]),s._v(" "),a("blockquote",[a("p",[s._v("ä»€ä¹ˆæ˜¯ç¬›å¡å°”ç§¯ ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¸¾ä¸ªä¾‹å­ï¼Œä¸¤ä¸ªé›†åˆ A{1, 2, 3} å’Œ B{a, b, c}ï¼Œåˆ™ä¸¤ä¸ªé›†åˆçš„ç¬›å¡å°”ç§¯ä¸º {1a, 1b, 1c, 2a, 2b, 2c, 3a, 3b, 3c}")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("inner")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224112015.png",alt:""}})]),s._v(" "),a("p",[s._v("å…‰çœ‹è¿™ä¸ªä¾‹å­å¤§ä¼™å„¿å¯èƒ½è§‰å¾—ç¬›å¡å°”ç§¯æ²¡å•¥ç”¨ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¸¸è§çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœ A è¡¨ç¤ºæŸå­¦æ ¡å­¦ç”Ÿçš„é›†åˆï¼ŒB è¡¨ç¤ºè¯¥å­¦æ ¡æ‰€æœ‰è¯¾ç¨‹çš„é›†åˆï¼Œåˆ™ A ä¸ B çš„ç¬›å¡å°”ç§¯å°±è¡¨ç¤ºè¿™ä¸ªå­¦æ ¡æ‰€æœ‰å¯èƒ½çš„é€‰è¯¾æƒ…å†µï¼ˆæ¢¦å›å¤§ä¸€è¢«æ•°æ®åº“æ”¯é…çš„ææƒ§ ğŸ¤¯ï¼‰ã€‚")]),s._v(" "),a("p",[s._v("å¦å¤–ï¼Œå¤šæä¸€å˜´ï¼Œå¯èƒ½æœ‰å°ä¼™ä¼´è¿˜è§è¿‡ cross joinï¼Œåœ¨ MySQL ä¸­ cross join ä¸ inner join çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚å¹¶ä¸”ï¼Œå¯ä»¥ç›´æ¥çœç•¥æ‰ cross æˆ–è€… inner å…³é”®å­—ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224112614.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"left-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#left-join"}},[s._v("#")]),s._v(" left join")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])])]),a("p",[s._v("left join å–å¾—å·¦è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¾¹è¿™ä¸ªè¡¨æ²¡æœ‰å¯¹åº”çš„åŒ¹é…è®°å½•(å¦‚æœæ²¡æœ‰ç›¸åŒ¹é…çš„è¯ï¼Œç”¨ null ä»£æ›¿)ã€‚")]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯è·å– user è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œç„¶åæ ¹æ® on æ¡ä»¶å» depart è¡¨ä¸­æŸ¥è¯¢ï¼Œå¦‚æœæœ‰ç›¸åŒçš„ nameï¼Œå°±ç»„åˆèµ·æ¥ï¼Œå¦‚æœ depart è¡¨ä¸­æ‰¾ä¸åˆ°å’Œ user è¡¨å…·æœ‰ç›¸åŒ name çš„è®°å½•ï¼Œå°±ç”¨ NULL ä»£æ›¿ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211226110742.png",alt:""}})]),s._v(" "),a("p",[s._v("æ¥çœ‹å®é™…çš„æ‰§è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224111502.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"right-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#right-join"}},[s._v("#")]),s._v(" right join")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("right")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])])]),a("p",[s._v("å’Œ left join ç›¸åï¼Œright  join å–å¾—å³è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¾¹è¿™ä¸ªè¡¨æ²¡æœ‰å¯¹åº”çš„åŒ¹é…è®°å½•(å¦‚æœæ²¡æœ‰ç›¸åŒ¹é…çš„è¯ï¼Œç”¨ null ä»£æ›¿)ã€‚")]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯è·å– depart è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œç„¶åæ ¹æ® on æ¡ä»¶å» user è¡¨ä¸­æŸ¥è¯¢ï¼Œå¦‚æœæœ‰ç›¸åŒçš„ nameï¼Œå°±ç»„åˆèµ·æ¥ï¼Œå¦‚æœ user è¡¨ä¸­æ‰¾ä¸åˆ°å’Œ depart è¡¨å…·æœ‰ç›¸åŒ name çš„è®°å½•ï¼Œå°±ç”¨ NULL ä»£æ›¿ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211226110754.png",alt:""}})]),s._v(" "),a("p",[s._v("æ¥çœ‹å®é™…çš„æ‰§è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224111624.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"full-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#full-join"}},[s._v("#")]),s._v(" full join")]),s._v(" "),a("p",[s._v("å›é¡¾ä¸‹ä¸Šé¢ä¸‰å¼ å›¾ï¼Œå°ä¼™ä¼´ä»¬ä¸çŸ¥é“æœ‰æ²¡æœ‰æ„Ÿè§‰ç¼ºäº†ç‚¹ä»€ä¹ˆï¼Œä¸ºå•¥æ²¡æœ‰æŠŠä¸¤ä¸ªåœ†éƒ½å¡«æ»¡çš„ï¼Ÿ")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211226110711.png",alt:""}})]),s._v(" "),a("p",[s._v("æŠŠä¸¤ä¸ªåœ†éƒ½å¡«æ»¡çš„å­¦åå«ä½œ "),a("strong",[s._v("full join")]),s._v("ï¼ŒButï¼ŒMySQL ä¸­å¹¶æ²¡æœ‰ full join çš„è¯­æ³•ï¼Œéœ€è¦å€ŸåŠ© "),a("code",[s._v("union")]),s._v(" å…³é”®å­—æ¥å®ç°ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("right")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224112841.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"é’ˆå¯¹-join-è¯­å¥è¯¥å¦‚ä½•å»ºç«‹ç´¢å¼•ã€å¦‚ä½•é€‰æ‹©é©±åŠ¨è¡¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é’ˆå¯¹-join-è¯­å¥è¯¥å¦‚ä½•å»ºç«‹ç´¢å¼•ã€å¦‚ä½•é€‰æ‹©é©±åŠ¨è¡¨"}},[s._v("#")]),s._v(" é’ˆå¯¹ join è¯­å¥è¯¥å¦‚ä½•å»ºç«‹ç´¢å¼•ã€å¦‚ä½•é€‰æ‹©é©±åŠ¨è¡¨")]),s._v(" "),a("p",[s._v("å…ˆæ¥è§£é‡Šä¸‹é©±åŠ¨è¡¨çš„æ¦‚å¿µï¼Œä»¥ left join ä¸ºä¾‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])])]),a("p",[s._v("å°±æ˜¯è·å– user è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œç„¶åæ ¹æ® on æ¡ä»¶å» depart è¡¨ä¸­æŸ¥è¯¢ï¼Œå¦‚æœæœ‰ç›¸åŒçš„ nameï¼Œå°±ç»„åˆèµ·æ¥ï¼Œå¦‚æœ depart è¡¨ä¸­æ‰¾ä¸åˆ°å’Œ user è¡¨å…·æœ‰ç›¸åŒ name çš„è®°å½•ï¼Œå°±ç”¨ NULL ä»£æ›¿ã€‚")]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ"),a("strong",[s._v("é©±åŠ¨è¡¨å°±æ˜¯ userï¼Œæ˜¯ä¸»åŠ¨å‘èµ·æŸ¥è¯¢çš„è¡¨ï¼Œè¢«é©±åŠ¨è¡¨æ˜¯ departï¼Œæ˜¯æ ¹æ® on æ¡ä»¶è¢«æŸ¥è¯¢çš„è¡¨")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("å½“ç„¶äº†ï¼ŒMySQL ä¼˜åŒ–å™¨å…¶å®ä¼šå¯¹é©±åŠ¨è¡¨æœ‰ä¸€ä¸ªé€‰æ‹©çš„è¿‡ç¨‹ï¼Œå¹¶ä¸ä¼šå›ºå®šè¯´å°±æ˜¯ user æˆ–è€…å°±æ˜¯ departï¼Œä¸ºäº†ä¾¿äºä¸‹é¢çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ "),a("code",[s._v("straight_join")]),s._v(" æ¥å›ºå®šé©±åŠ¨è¡¨ã€‚")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" straight_join depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("ç°åœ¨ï¼Œuser è¡¨æ˜¯é©±åŠ¨è¡¨ï¼Œdepart è¡¨æ˜¯è¢«é©±åŠ¨è¡¨")]),s._v(" "),a("p",[a("u",[s._v("å‡è®¾ï¼Œæˆ‘ä»¬å¾€ user è¡¨ä¸­æ’å…¥äº† 100 è¡Œæ•°æ®ï¼Œdepart è¡¨ä¸­æ’å…¥äº† 1000 è¡Œæ•°æ®")]),s._v("ã€‚ä¸‹é¢å¼€å§‹åˆ†æ ğŸ‘‡")]),s._v(" "),a("h3",{attrs:{id:"index-nested-loop-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-nested-loop-join"}},[s._v("#")]),s._v(" Index Nested-Loop Join")]),s._v(" "),a("p",[s._v("å¦‚æœæˆ‘ä»¬"),a("strong",[s._v("åœ¨è¢«é©±åŠ¨è¡¨ depart çš„å­—æ®µ name ä¸Šå»ºç«‹ç´¢å¼•")]),s._v("ï¼Œé‚£ä¹ˆï¼Œä¸Šé¢è¿™æ¡è¯­å¥çš„æ‰§è¡Œæµç¨‹å°±æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("ä» user è¡¨ä¸­è¯»å…¥ä¸€è¡Œæ•°æ® R")]),s._v(" "),a("li",[s._v("ä»æ•°æ®è¡Œ R ä¸­ï¼Œå–å‡º name å­—æ®µåˆ°è¡¨ depart çš„ name ç´¢å¼•æ ‘ä¸Šå»æ‰¾å¹¶å–å¾—å¯¹åº”çš„ä¸»é”®")]),s._v(" "),a("li",[s._v("æ ¹æ®ä¸»é”®å›è¡¨æŸ¥è¯¢ï¼Œå–å‡º depart è¡¨ä¸­æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œç„¶åè·Ÿ R ç»„æˆä¸€è¡Œï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†")]),s._v(" "),a("li",[s._v("é‡å¤æ‰§è¡Œæ­¥éª¤ 1 åˆ° 3ï¼Œç›´åˆ° user è¡¨çš„æœ«å°¾åˆ™å¾ªç¯ç»“æŸ")])]),s._v(" "),a("p",[s._v("æ–‡å­—çœ‹ä¸å¤ªæ‡‚ï¼Ÿæ²¡å…³ç³»ï¼Œæ¥çœ‹ä¸‹é¢ä»£ç çš„è¡¨ç¤ºï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211224130819.png",alt:""}})]),s._v(" "),a("p",[s._v("è¿™æ¡è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹å°±è·Ÿæˆ‘ä»¬å†™ç¨‹åºæ—¶çš„åµŒå¥—æŸ¥è¯¢ (Nested) ç±»ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥ç”¨ä¸Šè¢«é©±åŠ¨è¡¨ depart çš„ç´¢å¼• (Index)ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°ä¹‹ä¸º  "),a("code",[s._v("Index Nested-Loop Join")]),s._v("ï¼Œç®€ç§° "),a("code",[s._v("NLJ")])]),s._v(" "),a("p",[s._v("æ¥åˆ†æä¸‹è¿™å¥—æµç¨‹çš„æ—¶é—´å¤æ‚åº¦ï¼š")]),s._v(" "),a("p",[s._v("é¦–å…ˆï¼Œéå†äº†ä¸€é user è¡¨ï¼Œä¸€å…±æ‰«æäº† 100 è¡Œï¼›ç„¶åï¼Œå¯¹è¿™æ¯ä¸€è¡Œéƒ½å» depart è¡¨ä¸­æ ¹æ® name å­—ç¬¦è¿›è¡Œæœç´¢ï¼Œç”±äº depart è¡¨ä¸Šå»ºç«‹äº† name å­—æ®µçš„ç´¢å¼•ï¼Œæ‰€ä»¥æ¯æ¬¡æœç´¢åªéœ€è¦æ‰«æä¸€è¡Œå°±è¡Œäº†ï¼ˆå‡è®¾ depart è¡¨ä¸­çš„ name æ˜¯ uniqueï¼Œæ— é‡å¤ï¼‰ï¼Œè¿™æ ·ï¼Œdepart è¡¨ä¸Šä¸€å…±åªéœ€è¦æ‰«æ 100 è¡Œã€‚")]),s._v(" "),a("p",[s._v("æ‰€ä»¥ï¼Œè¿™å¥—æµç¨‹æ€»å…±éœ€è¦æ‰«æ 100 + 100 = 200 è¡Œã€‚")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("â“ å„ä½å°ä¼™ä¼´ä»¬å†æ¥æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœè¿™æ¡è¯­å¥ä¸ç”¨ joinï¼Œè¯¥æ€ä¹ˆå®ç°ã€‚")]),s._v(" "),a("p",[s._v("æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("æ‰§è¡Œ "),a("code",[s._v("select * from user")]),s._v("ï¼ŒæŸ¥å‡ºè¡¨ user çš„æ‰€æœ‰æ•°æ®ï¼Œè¿™é‡Œæœ‰ 100 è¡Œï¼Œå¯¹å§")])]),s._v(" "),a("li",[a("p",[s._v("å¾ªç¯éå†è¿™ 100 è¡Œæ•°æ®ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("ä»æ¯ä¸€è¡Œ R å–å‡ºå­—æ®µ age çš„å€¼ R.aï¼›")])]),s._v(" "),a("li",[a("p",[s._v("æ‰§è¡Œ "),a("code",[s._v("select * from depart where a = R.a")])])]),s._v(" "),a("li",[a("p",[s._v("æŠŠè¿”å›çš„ç»“æœå’Œ R ç»„åˆæ„æˆç»“æœé›†çš„ä¸€è¡Œ")])])])])]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œè¿™å¥—æµç¨‹ä¸€å…±éœ€è¦æ‰«æçš„è¡Œæ•°å…¶å®ä¹Ÿæ˜¯ 200 è¡Œ")]),s._v(" "),a("p",[s._v("ä½†æ˜¯ï¼è¿™å¥—æµç¨‹é‡Œï¼Œ"),a("code",[s._v("select * from user")]),s._v(" æ‰§è¡Œäº† 1 æ¬¡ï¼Œ"),a("code",[s._v("select * from depart where a = R.a")]),s._v(" æ‰§è¡Œäº† 100 æ¬¡ï¼Œæ€»å…±éœ€è¦å’Œæ•°æ®åº“è¿›è¡Œ 101 æ¬¡äº¤äº’ï¼Œè€Œä½¿ç”¨ join çš„é‚£å¥—æµç¨‹åªéœ€è¦ 1 æ¬¡äº¤äº’å°±å¯ä»¥äº†ã€‚")]),s._v(" "),a("p",[s._v("é«˜ä¸‹ç«‹è§ã€‚")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("âœ… ä¸Šé¢çš„è¯­å¥æ˜¯åŸºäº "),a("code",[s._v("straight_join")]),s._v(" æ¥å›ºå®šé©±åŠ¨è¡¨çš„ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸‹ï¼Œ"),a("strong",[s._v("æˆ‘ä»¬å…·ä½“è¯¥å¦‚ä½•é€‰å–é©±åŠ¨è¡¨å‘¢")]),s._v("ï¼Ÿ")]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸ª join è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé©±åŠ¨è¡¨èµ°çš„æ˜¯å…¨è¡¨æ‰«æï¼Œè€Œè¢«é©±åŠ¨è¡¨ç”±äºç”¨ä¸Šäº†ç´¢å¼•ï¼Œæ‰€ä»¥èµ°çš„æ˜¯ B+ ç´¢å¼•æ ‘çš„æœç´¢")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("å‡è®¾é©±åŠ¨è¡¨çš„è¡Œæ•°æ˜¯ N")]),s._v("ï¼Œæ‰§è¡Œè¿‡ç¨‹å°±è¦æ‰«æé©±åŠ¨è¡¨ N è¡Œï¼Œç„¶åå¯¹äºæ¯ä¸€è¡Œï¼Œåˆ°è¢«é©±åŠ¨è¡¨ä¸ŠåŒ¹é…ä¸€æ¬¡ã€‚æ—¶é—´å¤æ‚åº¦ N")]),s._v(" "),a("li",[a("strong",[s._v("å‡è®¾è¢«é©±åŠ¨è¡¨çš„è¡Œæ•°æ˜¯ M")]),s._v("ã€‚æ¯æ¬¡åœ¨è¢«é©±åŠ¨è¡¨æŸ¥ä¸€è¡Œæ•°æ®ï¼Œè¦å…ˆæœç´¢ name çš„è¾…åŠ©ç´¢å¼•æ ‘ï¼Œç„¶åå†å›è¡¨æœç´¢ä¸»é”®ç´¢å¼•æ ‘ï¼Œæœç´¢ä¸€æ£µæ ‘çš„è¿‘ä¼¼å¤æ‚åº¦æ˜¯ log2Mï¼Œæ‰€ä»¥åœ¨è¢«é©±åŠ¨è¡¨ä¸ŠæŸ¥ä¸€è¡Œçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ 2 * log2M")])]),s._v(" "),a("p",[s._v("å› æ­¤æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼Œè¿‘ä¼¼å¤æ‚åº¦æ˜¯ N + N * 2 * log2M")]),s._v(" "),a("p",[s._v("â­ æ˜¾ç„¶ï¼Œ"),a("strong",[s._v("é©±åŠ¨è¡¨è¡Œæ•° N å¯¹æ‰«æè¡Œæ•°çš„å½±å“æ›´å¤§ï¼Œå› æ­¤åº”è¯¥è®©å°è¡¨æ¥åšé©±åŠ¨è¡¨")]),s._v("ã€‚")]),s._v(" "),a("blockquote",[a("p",[s._v("å¤šæä¸€å˜´ï¼Œå¹¶ä¸æ˜¯å“ªä¸ªè¡¨çš„è¡Œæ•°å°‘å“ªä¸ªè¡¨å°±æ˜¯ â€œå°è¡¨â€ï¼Œéœ€è¦ç»“åˆè¿‡æ»¤æ¡ä»¶æ¥åˆ¤æ–­ï¼Œè®¡ç®—å‚ä¸ join çš„å„ä¸ªå­—æ®µçš„æ€»æ•°æ®é‡ï¼Œæ•°æ®é‡å°çš„é‚£ä¸ªè¡¨ï¼Œæ‰æ˜¯ â€œå°è¡¨â€")])]),s._v(" "),a("p",[s._v("Butï¼Œ"),a("strong",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç»“è®ºçš„å‰ææ˜¯ â€œå¯ä»¥ä½¿ç”¨è¢«é©±åŠ¨è¡¨çš„ç´¢å¼•â€")])]),s._v(" "),a("p",[s._v("æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹è¢«é©±åŠ¨è¡¨ç”¨ä¸ä¸Šç´¢å¼•çš„æƒ…å†µ ğŸ‘‡")]),s._v(" "),a("h3",{attrs:{id:"simple-nested-loop-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-nested-loop-join"}},[s._v("#")]),s._v(" Simple Nested-Loop Join")]),s._v(" "),a("p",[a("strong",[s._v("å‡è®¾ depart è¡¨ä¸Šå¹¶æ²¡æœ‰ name å­—æ®µçš„ç´¢å¼•")]),s._v("ï¼Œå†æ¥çœ‹è¿™æ¡è¯­å¥çš„æ‰§è¡Œæµç¨‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" straight_join depart \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" depart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("ç”±äºè¡¨ depart çš„å­—æ®µ name ä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œå› æ­¤æ¯æ¬¡åˆ° depart å»åŒ¹é…çš„æ—¶å€™ï¼Œå°±è¦åšä¸€æ¬¡å…¨è¡¨æ‰«æï¼Œæ•´ä¸ªæ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("ä» user è¡¨ä¸­è¯»å…¥ä¸€è¡Œæ•°æ® R")]),s._v(" "),a("li",[s._v("ä»æ•°æ®è¡Œ R ä¸­ï¼Œå–å‡º name å­—æ®µåˆ°è¡¨ depart ä¸Šåšå…¨è¡¨æŸ¥è¯¢ï¼Œå¹¶å–å¾—å¯¹åº”çš„ä¸»é”®")]),s._v(" "),a("li",[s._v("æ ¹æ®ä¸»é”®å›è¡¨æŸ¥è¯¢ï¼Œå–å‡º depart è¡¨ä¸­æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œç„¶åè·Ÿ R ç»„æˆä¸€è¡Œï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†")]),s._v(" "),a("li",[s._v("é‡å¤æ‰§è¡Œæ­¥éª¤ 1 åˆ° 3ï¼Œç›´åˆ° user è¡¨çš„æœ«å°¾åˆ™å¾ªç¯ç»“æŸ")])]),s._v(" "),a("p",[s._v("æ˜¾ç„¶ï¼Œè¿™æ¡è¯­å¥è¦å…¨è¡¨æ‰«æ depart è¡¨å¤šè¾¾ 100 æ¬¡ï¼Œæ€»å…±æ‰«æ 100 * 1000 = 10 ä¸‡è¡Œ")]),s._v(" "),a("p",[s._v("ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªç¬¨é‡çš„ç®—æ³•ä¹Ÿæœ‰ä¸ªåå­—ï¼Œå« "),a("code",[s._v("Simple Nested-Loop Join")]),s._v("ï¼Œç®€ç§° "),a("code",[s._v("SNL")])]),s._v(" "),a("p",[s._v("å½“ç„¶äº†ï¼Œè¿™ä¹ˆ ** çš„ç®—æ³•ä¸€å®šæ˜¯ä¸ä¼šè¢« MySQL ä½¿ç”¨çš„ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å¦ä¸€ä¸ªå«ä½œ "),a("code",[s._v("Block Nested-Loop Join")]),s._v(" çš„ç®—æ³•ï¼Œç®€ç§° "),a("code",[s._v("BNL")]),s._v(" ğŸ‘‡")]),s._v(" "),a("h3",{attrs:{id:"block-nested-loop-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#block-nested-loop-join"}},[s._v("#")]),s._v(" Block Nested-Loop Join")]),s._v(" "),a("p",[s._v("BNL å¼•å…¥äº† "),a("strong",[s._v("join_buffer")]),s._v(" çš„æ¦‚å¿µï¼ˆåˆ«æ…Œï¼Œå¾ˆç®€å•ï¼‰ï¼Œæ„Ÿè§‰ä¸éœ€è¦å¤šä½œè§£é‡Šï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ BNL çš„æ‰§è¡Œæµç¨‹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("æŠŠè¡¨ user ä¸­çš„æ•°æ®è¯»å…¥çº¿ç¨‹å†…å­˜ join_buffer ä¸­ï¼Œç”±äºæˆ‘ä»¬è¿™ä¸ªè¯­å¥ä¸­å†™çš„æ˜¯ "),a("code",[s._v("select *")]),s._v("ï¼Œå› æ­¤æ˜¯æŠŠæ•´ä¸ªè¡¨ user éƒ½æ”¾å…¥äº†å†…å­˜")]),s._v(" "),a("li",[s._v("æ‰«æè¡¨ departï¼ŒæŠŠè¡¨ depart ä¸­çš„æ¯ä¸€è¡Œå–å‡ºæ¥ï¼Œè·Ÿ join_buffer ä¸­çš„æ•°æ®åšå¯¹æ¯”ï¼Œæ»¡è¶³ on æ¡ä»¶çš„ï¼Œå°±ä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†è¿”å›")])]),s._v(" "),a("p",[s._v("ä¸Šå¼ å›¾çœ‹ä¸€ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211226110640.png",alt:""}})]),s._v(" "),a("p",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ"),a("strong",[s._v("join_buffer ä¸­çš„æ•°æ®éƒ½æ˜¯æ— åºå­˜å‚¨çš„")]),s._v("ã€‚åŸºäºè¿™ç‚¹ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹æ—¶é—´å¤æ‚åº¦ï¼š")]),s._v(" "),a("p",[s._v("é¦–å…ˆï¼Œæ‰«æ user è¡¨å…¨éƒ¨æ•°æ®å¹¶åŠ å…¥ join_bufferï¼Œä¸€å…± 100 è¡Œï¼›ç„¶åï¼Œå¯¹è¡¨ depart ä¸­çš„æ¯ä¸€è¡Œï¼Œå–å‡ºæ¥è·Ÿ join_buffer ä¸­çš„æ•°æ®åˆ†åˆ«åšåˆ¤æ–­ï¼Œæ¯è¡Œæ•°æ®éƒ½éœ€è¦åš 100 æ¬¡åˆ¤æ–­ï¼Œå› æ­¤ï¼Œæ€»å…±éœ€è¦åšçš„åˆ¤æ–­æ¬¡æ•°æ˜¯ï¼š100 * 1000 = 10 ä¸‡æ¬¡")]),s._v(" "),a("p",[s._v("è¿™ä¹ˆä¸€åˆ†æå¥½åƒå’Œ SNL çš„æ—¶é—´å¤æ‚åº¦å·®ä¸å¤šäº†ï¼Ÿ")]),s._v(" "),a("p",[s._v("ç¡®å®ï¼ŒButï¼Œ"),a("strong",[s._v("è¿™ä¸ªæ“ä½œæ˜¯åœ¨ join_buffer ä¹Ÿå°±æ˜¯å†…å­˜ä¸­åšçš„ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸Šä¼šå¿«å¾ˆå¤š")])]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("â“ ä¸è¿‡ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³å¤§ä¼™å„¿è¿˜æ˜¯æ²¡æ˜ç™½ï¼Œ"),a("strong",[s._v("è¿™ä¸ª Block Nested-Loop ä¸­çš„ Block ä½“ç°åœ¨å“ªé‡Œå‘¢")]),s._v("?")]),s._v(" "),a("p",[s._v("å¾ˆç®€å•ï¼Œjoin_buffer çš„å¤§å°è‚¯å®šæ˜¯æœ‰é™çš„å•Šï¼Œå®ƒæ˜¯ç”±å‚æ•° "),a("code",[s._v("join_buffer_size")]),s._v(" è®¾å®šçš„ï¼Œé»˜è®¤å€¼æ˜¯ 256kï¼Œå¦‚æœè¡¨ user ä¸­çš„æ•°æ®æ¯”è¾ƒå¤§ï¼Œjoin_buffer ä¸€æ¬¡æ€§æ”¾ä¸ä¸‹æ€ä¹ˆåŠï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("åˆ†å—")]),s._v("ï¼ï¼ï¼æˆ–è€…è¯´ï¼Œåˆ†å—å» join")]),s._v(" "),a("p",[a("u",[s._v("å‡è®¾æˆ‘ä»¬è°ƒå°äº† join_buffer_sizeï¼Œä½¿å¾— user è¡¨åœ¨å­˜å…¥ç¬¬ 60 è¡Œæ•°æ®çš„æ—¶å€™ join_buffer å°±å­˜ä¸ä¸‹äº†")]),s._v("ï¼Œæ¥çœ‹æ•´ä¸ªçš„æ‰§è¡Œæµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("æ‰«æè¡¨ userï¼Œé¡ºåºè¯»å–æ•°æ®è¡Œæ”¾å…¥ join_buffer ä¸­ï¼Œæ”¾å®Œç¬¬ 60 è¡Œ æ—¶ join_buffer æ»¡äº†ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥")]),s._v(" "),a("li",[s._v("æ‰«æè¡¨ departï¼ŒæŠŠ depart ä¸­çš„æ¯ä¸€è¡Œå–å‡ºæ¥ï¼Œè·Ÿ join_buffer ä¸­çš„æ•°æ®åšå¯¹æ¯”ï¼Œæ»¡è¶³ join æ¡ä»¶çš„ï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†è¿”å›")]),s._v(" "),a("li",[a("strong",[s._v("æ¸…ç©º join_buffer")]),s._v("ï¼ˆé‡ç‚¹å°±æ˜¯è¿™ä¸€æ­¥ï¼‰")]),s._v(" "),a("li",[s._v("ç»§ç»­æ‰«æè¡¨ userï¼Œé¡ºåºè¯»å–æœ€åçš„ 40 è¡Œæ•°æ®æ”¾å…¥ join_buffer ä¸­ï¼Œç„¶åç»§ç»­æ‰§è¡Œç¬¬ 2 æ­¥")])]),s._v(" "),a("p",[s._v("è¿™æ ·ï¼Œæ€»å…±éœ€è¦åšçš„åˆ¤æ–­æ¬¡æ•°ä»ç„¶æ˜¯ (60 + 40) * 1000 = 10 ä¸‡æ¬¡ã€‚")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("âœ… æˆ‘ä»¬å†æ¥çœ‹ä¸‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹è¯¥å¦‚ä½•é€‰æ‹©é©±åŠ¨è¡¨ï¼š")]),s._v(" "),a("p",[s._v("å‡è®¾ï¼Œé©±åŠ¨è¡¨çš„æ•°æ®è¡Œæ•°æ˜¯ Nï¼Œjoin_buffer è¢«åˆ†æˆäº† K æ®µï¼Œè¢«é©±åŠ¨è¡¨çš„æ•°æ®è¡Œæ•°æ˜¯ Mï¼š")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("å†…å­˜åˆ¤æ–­ N * M æ¬¡ã€‚æ˜¾ç„¶ï¼Œå†…å­˜åˆ¤æ–­æ¬¡æ•°æ˜¯ä¸å—é€‰æ‹©å“ªä¸ªè¡¨ä½œä¸ºé©±åŠ¨è¡¨å½±å“çš„")])]),s._v(" "),a("li",[a("p",[s._v("æ‰«æè¡Œæ•°æ˜¯ N + K * Mã€‚å¦å¤–ï¼ŒN è¶Šå¤§ K å°±è¶Šå¤§ï¼Œæ‰€ä»¥å¯ä»¥æŠŠ K è¡¨ç¤ºä¸º Î» * Nï¼ŒÎ» å–å€¼èŒƒå›´æ˜¯ 0~1ï¼Œä¹Ÿå³æ‰«æè¡Œæ•°æ˜¯ N + Î» * N * M")]),s._v(" "),a("p",[s._v("åœ¨ M å’Œ N å¤§å°ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œ"),a("strong",[s._v("N è¶Šå°ï¼Œæ•´ä¸ªç®—å¼çš„ç»“æœè¶Šå°ã€‚æ‰€ä»¥ç»“è®ºæ˜¯ï¼Œåº”è¯¥è®©å°è¡¨å½“é©±åŠ¨è¡¨ã€‚")])]),s._v(" "),a("p",[s._v("å¦å¤–ï¼ŒÎ» ä½œä¸ºå¼å­çš„å‚æ•°å…¶å®ä¹Ÿéå¸¸é‡è¦ï¼Œè¿™ä¸ªå€¼è¶Šå°å°±ä»£è¡¨åˆ†çš„æ®µè¶Šå°‘ï¼Œå³ä¸€æ¬¡å¯ä»¥æ”¾å…¥ join_buffer çš„è¡Œè¶Šå¤šï¼Œè¿™æ ·ï¼Œå¯¹è¢«é©±åŠ¨è¡¨çš„å…¨è¡¨æ‰«ææ¬¡æ•°å°±è¶Šå°‘ã€‚æ‰€ä»¥ï¼Œ"),a("strong",[s._v("è°ƒå¤§ join_buffer_size ä¹Ÿæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©")]),s._v("ã€‚")])])]),s._v(" "),a("h2",{attrs:{id:"å°ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[s._v("#")]),s._v(" å°ç»“")]),s._v(" "),a("p",[s._v("å°ç»“ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ"),a("strong",[s._v("å¯¹äº join è¯­å¥æ¥è¯´ï¼Œæœ€å¥½çš„æƒ…å†µå°±æ˜¯å¯ä»¥ç”¨ä¸Šè¢«é©±åŠ¨è¡¨çš„ç´¢å¼•")]),s._v("ï¼Œè¿™æ ·ç”¨çš„å°±æ˜¯ INL ç®—æ³•ï¼Œæ¯”ä¸ç”¨ join è¯­å¥çš„æ™®é€šåµŒå¥—æŸ¥è¯¢æ€§èƒ½è¦å¥½ã€‚è€Œå¦‚æœç”¨ä¸ä¸Šè¢«é©±åŠ¨è¡¨çš„ç´¢å¼•è¯ï¼Œæ— è®ºæ˜¯ SNL è¿˜æ˜¯ä½¿ç”¨ join_buffer çš„ BNLï¼Œå…¶å®ä»£ä»·éƒ½æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œéƒ½ä¼šå ç”¨å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚")]),s._v(" "),a("p",[s._v("è‡³äº join è¯­å¥çš„é©±åŠ¨è¡¨é—®é¢˜ï¼Œ"),a("strong",[s._v("æˆ‘ä»¬æ€»æ˜¯åº”è¯¥ä½¿ç”¨å°è¡¨åšé©±åŠ¨è¡¨")]),s._v("ï¼ˆå¹¶ä¸æ˜¯å“ªä¸ªè¡¨çš„è¡Œæ•°å°‘å“ªä¸ªè¡¨å°±æ˜¯ â€œå°è¡¨â€ï¼Œéœ€è¦ç»“åˆè¿‡æ»¤æ¡ä»¶æ¥åˆ¤æ–­ï¼Œè®¡ç®—å‚ä¸ join çš„å„ä¸ªå­—æ®µçš„æ€»æ•°æ®é‡ï¼Œæ•°æ®é‡å°çš„é‚£ä¸ªè¡¨ï¼Œæ‰æ˜¯ â€œå°è¡¨â€ï¼‰ã€‚")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("ğŸ¥¸ "),a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼š"),a("code",[s._v("select * from A join B on A.name = B.name;")]),s._v(" æ‰§è¡Œè¿‡ç¨‹æ€§èƒ½å·®ï¼ŒåŸå› å¯èƒ½æ˜¯ä»€ä¹ˆï¼Ÿå“ªé‡Œéœ€è¦å»ºç«‹ç´¢å¼•?")]),s._v(" "),a("p",[s._v("ğŸ˜ "),a("strong",[s._v("å°ç‰›è‚‰")]),s._v("ï¼šè¿™æ¡è¯­å¥æ€§èƒ½å·®çš„åŸå› å¯èƒ½æ˜¯è¢«é©±åŠ¨è¡¨ B æ²¡æœ‰å»ºç«‹ name ç´¢å¼•ã€‚")]),s._v(" "),a("p",[s._v("è¿™æ ·çš„è¯ï¼ŒMySQL ä½¿ç”¨çš„å°±æ˜¯ Block Nested-Loop ç®—æ³•ï¼Œå…·ä½“æ¥è¯´ï¼ŒMySQL é¦–å…ˆæŠŠè¡¨ A ä¸­çš„æ•°æ®è¯»å…¥çº¿ç¨‹å†…å­˜ join_buffer ä¸­ï¼›ç„¶åæ‰«æè¡¨ Bï¼ŒæŠŠè¡¨ B ä¸­çš„æ¯ä¸€è¡Œå–å‡ºæ¥ï¼Œè·Ÿ join_buffer ä¸­çš„æ•°æ®åšå¯¹æ¯”ï¼Œæ»¡è¶³ on æ¡ä»¶çš„ï¼Œå°±ä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†è¿”å›")]),s._v(" "),a("p",[s._v("join_buffer ä¸­çš„æ•°æ®éƒ½æ˜¯æ— åºå­˜å‚¨çš„ï¼Œç”±äºæ²¡æœ‰ç”¨ä¸Šè¢«é©±åŠ¨è¡¨çš„ç´¢å¼•ï¼Œæ‰€ä»¥å¯¹è¡¨ B ä¸­çš„æ¯ä¸€è¡Œï¼Œå–å‡ºæ¥åéœ€è¦è·Ÿ join_buffer ä¸­çš„æ‰€æœ‰æ•°æ®åˆ†åˆ«åšåˆ¤æ–­ï¼Œå‡è®¾ A è¡¨ 100 è¡Œï¼Œ B è¡¨ 1000 è¡Œï¼Œé‚£ä¹ˆæ€»å…±éœ€è¦åšçš„åˆ¤æ–­æ¬¡æ•°æ˜¯ï¼š100 * 1000 = 10 ä¸‡æ¬¡")]),s._v(" "),a("p",[s._v("ä¸ºä»€ä¹ˆè¯´ BNL ç®—æ³•çš„æ€§èƒ½æ¯”è¾ƒå·®å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹å¦‚æœèƒ½å¤Ÿç”¨ä¸Šè¢«é©±åŠ¨è¡¨ B çš„ç´¢å¼•çš„æƒ…å†µ")]),s._v(" "),a("p",[s._v("è¿™ä¸ªç®—æ³•å°±æ˜¯ Index Nested-Loop ç®—æ³•ï¼Œå…·ä½“æ­¥éª¤å…¶å®å°±æ˜¯ä¸€ä¸ªåµŒå¥—æŸ¥è¯¢ï¼Œé¦–å…ˆï¼Œéå† A è¡¨ï¼Œä¸€å…±éœ€è¦æ‰«æ 100 è¡Œï¼›ç„¶åï¼Œå¯¹è¿™æ¯ä¸€è¡Œéƒ½å» B è¡¨ä¸­æ ¹æ® name å­—æ®µè¿›è¡Œæœç´¢ï¼Œç”±äº B è¡¨ä¸Šå»ºç«‹äº† name å­—æ®µçš„ç´¢å¼•ï¼Œæ‰€ä»¥æ¯æ¬¡æœç´¢åªéœ€è¦åœ¨ name è¾…åŠ©ç´¢å¼•æ ‘ä¸Šæ‰«æä¸€è¡Œå°±è¡Œäº†ï¼ˆé¢è¿™é‡Œæˆ‘ä»¬å‡è®¾ B è¡¨ä¸­çš„ name æ˜¯ unique çš„ï¼Œæ— é‡å¤ï¼‰ï¼Œè¿™æ ·ï¼ŒB è¡¨ä¸Šä¸€å…±åªéœ€è¦æ‰«æ 100 è¡Œã€‚")]),s._v(" "),a("p",[s._v("æ‰€ä»¥ï¼ŒINL ç®—æ³•æ€»å…±åªéœ€è¦æ‰«æ 100 + 100 = 200 è¡Œã€‚")]),s._v(" "),a("p",[s._v("æ‰€ä»¥è¯´ï¼Œå¯¹äºè¿™æ¡è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ B è¡¨çš„ name å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ã€‚")]),s._v(" "),a("p",[s._v("å¦å¤–ï¼Œå¯¹äºç”¨ä¸ä¸Šè¢«é©±åŠ¨è¡¨ç´¢å¼•çš„ BNL ç®—æ³•æ¥è¯´ï¼Œè¿™ä¸ª join_buffer çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œç”±å‚æ•° "),a("code",[s._v("join_buffer_size")]),s._v(" è®¾å®šï¼Œå¦‚æœè¡¨ A ä¸­çš„æ•°æ®æ¯”è¾ƒå¤§ï¼Œjoin_buffer ä¸€æ¬¡æ€§æ”¾ä¸ä¸‹çš„è¯å°±ä¼šè¿›è¡Œåˆ†å—ï¼Œå°±æ˜¯æ¯æ¬¡ join_buffer å­˜æ»¡ä¹‹åï¼ŒæŠŠ B è¡¨ä¸­æ•°æ®å–å‡ºæ¥è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­å®Œäº†ä¹‹åæŠŠ join_buffer æ¸…ç©ºï¼Œç„¶åå†å–å‡º A è¡¨ä¸­å‰©ä¸‹çš„æ•°æ®æ”¾å…¥ join_bufferï¼Œå¦‚æ­¤å¾ªç¯ã€‚")]),s._v(" "),a("p",[s._v("æ‰€ä»¥å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ª join_buffer åˆ†çš„å—è¶Šå¤šï¼Œæˆ‘ä»¬éœ€è¦éå† B è¡¨çš„æ¬¡æ•°è¶Šå¤šï¼Œæ‰€ä»¥ï¼Œå¢å¤§ join_buffer_size ä¹Ÿå°±æ˜¯å‡å°‘åˆ†å—ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡è¿™æ¡è¯­å¥çš„æ€§èƒ½ã€‚")])])])}),[],!1,null,null,null);t.default=n.exports}}]);