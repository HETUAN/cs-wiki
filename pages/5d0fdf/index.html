<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>别再恐惧IP协议 | CS-Wiki</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="致力打造完善的 Java 后端知识体系. Not only an Interview-Guide, but also a Learning-Direction.">
    <meta name="keywords" content="java,algorithm,interview">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d4aaf2aa.css" as="style"><link rel="preload" href="/assets/js/app.64e84c66.js" as="script"><link rel="preload" href="/assets/js/2.36ce34d6.js" as="script"><link rel="preload" href="/assets/js/281.938f0b13.js" as="script"><link rel="prefetch" href="/assets/js/10.00a5281b.js"><link rel="prefetch" href="/assets/js/100.5d33777d.js"><link rel="prefetch" href="/assets/js/101.59d74ce5.js"><link rel="prefetch" href="/assets/js/102.48c2b759.js"><link rel="prefetch" href="/assets/js/103.d53e159a.js"><link rel="prefetch" href="/assets/js/104.8c496f4e.js"><link rel="prefetch" href="/assets/js/105.0c27095b.js"><link rel="prefetch" href="/assets/js/106.76a25d96.js"><link rel="prefetch" href="/assets/js/107.e583f778.js"><link rel="prefetch" href="/assets/js/108.94a60f25.js"><link rel="prefetch" href="/assets/js/109.fbefd19b.js"><link rel="prefetch" href="/assets/js/11.f4cb7270.js"><link rel="prefetch" href="/assets/js/110.a968dbce.js"><link rel="prefetch" href="/assets/js/111.e777e452.js"><link rel="prefetch" href="/assets/js/112.3eac2357.js"><link rel="prefetch" href="/assets/js/113.d9175487.js"><link rel="prefetch" href="/assets/js/114.054bbec2.js"><link rel="prefetch" href="/assets/js/115.cd911bdd.js"><link rel="prefetch" href="/assets/js/116.a505a342.js"><link rel="prefetch" href="/assets/js/117.37fb246b.js"><link rel="prefetch" href="/assets/js/118.428cdf40.js"><link rel="prefetch" href="/assets/js/119.a5ece163.js"><link rel="prefetch" href="/assets/js/12.98cb305c.js"><link rel="prefetch" href="/assets/js/120.2cde4a90.js"><link rel="prefetch" href="/assets/js/121.ce4d9b52.js"><link rel="prefetch" href="/assets/js/122.48a3b878.js"><link rel="prefetch" href="/assets/js/123.603974a4.js"><link rel="prefetch" href="/assets/js/124.c90bb392.js"><link rel="prefetch" href="/assets/js/125.16247db0.js"><link rel="prefetch" href="/assets/js/126.cd38b085.js"><link rel="prefetch" href="/assets/js/127.880e41ef.js"><link rel="prefetch" href="/assets/js/128.0ffd54f2.js"><link rel="prefetch" href="/assets/js/129.8cd8b52a.js"><link rel="prefetch" href="/assets/js/13.54e84ad5.js"><link rel="prefetch" href="/assets/js/130.f8da2806.js"><link rel="prefetch" href="/assets/js/131.00d6cdc1.js"><link rel="prefetch" href="/assets/js/132.82d494c3.js"><link rel="prefetch" href="/assets/js/133.531d14e4.js"><link rel="prefetch" href="/assets/js/134.2483357a.js"><link rel="prefetch" href="/assets/js/135.5d95a133.js"><link rel="prefetch" href="/assets/js/136.580bed30.js"><link rel="prefetch" href="/assets/js/137.8e7104df.js"><link rel="prefetch" href="/assets/js/138.4fd0a256.js"><link rel="prefetch" href="/assets/js/139.a6bc5d62.js"><link rel="prefetch" href="/assets/js/14.81b8a721.js"><link rel="prefetch" href="/assets/js/140.749d9897.js"><link rel="prefetch" href="/assets/js/141.2a37cfd4.js"><link rel="prefetch" href="/assets/js/142.1ec5ccdc.js"><link rel="prefetch" href="/assets/js/143.7d49cbeb.js"><link rel="prefetch" href="/assets/js/144.bb28b210.js"><link rel="prefetch" href="/assets/js/145.9b944e2a.js"><link rel="prefetch" href="/assets/js/146.59c6d197.js"><link rel="prefetch" href="/assets/js/147.11ae5b6f.js"><link rel="prefetch" href="/assets/js/148.483f2c8e.js"><link rel="prefetch" href="/assets/js/149.047b6998.js"><link rel="prefetch" href="/assets/js/15.d9eefb43.js"><link rel="prefetch" href="/assets/js/150.be3c50fc.js"><link rel="prefetch" href="/assets/js/151.a53145bf.js"><link rel="prefetch" href="/assets/js/152.eb6768d5.js"><link rel="prefetch" href="/assets/js/153.e42a6780.js"><link rel="prefetch" href="/assets/js/154.d26f55aa.js"><link rel="prefetch" href="/assets/js/155.7a114b10.js"><link rel="prefetch" href="/assets/js/156.7c29d763.js"><link rel="prefetch" href="/assets/js/157.36caa93c.js"><link rel="prefetch" href="/assets/js/158.c33d7cab.js"><link rel="prefetch" href="/assets/js/159.43a49041.js"><link rel="prefetch" href="/assets/js/16.35876531.js"><link rel="prefetch" href="/assets/js/160.a5a4fe7a.js"><link rel="prefetch" href="/assets/js/161.db89fcf6.js"><link rel="prefetch" href="/assets/js/162.08734acd.js"><link rel="prefetch" href="/assets/js/163.80ce66eb.js"><link rel="prefetch" href="/assets/js/164.30f56242.js"><link rel="prefetch" href="/assets/js/165.e9dda0c4.js"><link rel="prefetch" href="/assets/js/166.734146b2.js"><link rel="prefetch" href="/assets/js/167.6392c40d.js"><link rel="prefetch" href="/assets/js/168.6b9066a3.js"><link rel="prefetch" href="/assets/js/169.7dd5de92.js"><link rel="prefetch" href="/assets/js/17.d96afaee.js"><link rel="prefetch" href="/assets/js/170.bdeb8cda.js"><link rel="prefetch" href="/assets/js/171.1db0e6b2.js"><link rel="prefetch" href="/assets/js/172.c13b9904.js"><link rel="prefetch" href="/assets/js/173.13a1dcde.js"><link rel="prefetch" href="/assets/js/174.7f8acb3b.js"><link rel="prefetch" href="/assets/js/175.762d2f8a.js"><link rel="prefetch" href="/assets/js/176.2c0591fb.js"><link rel="prefetch" href="/assets/js/177.fcad1726.js"><link rel="prefetch" href="/assets/js/178.3de49387.js"><link rel="prefetch" href="/assets/js/179.64544840.js"><link rel="prefetch" href="/assets/js/18.1e9839c1.js"><link rel="prefetch" href="/assets/js/180.bc9d1447.js"><link rel="prefetch" href="/assets/js/181.9494a496.js"><link rel="prefetch" href="/assets/js/182.83582ffa.js"><link rel="prefetch" href="/assets/js/183.9cdf9846.js"><link rel="prefetch" href="/assets/js/184.d33036e9.js"><link rel="prefetch" href="/assets/js/185.85d32ec5.js"><link rel="prefetch" href="/assets/js/186.2fc9d086.js"><link rel="prefetch" href="/assets/js/187.cc532894.js"><link rel="prefetch" href="/assets/js/188.f099572a.js"><link rel="prefetch" href="/assets/js/189.2f32c5fe.js"><link rel="prefetch" href="/assets/js/19.8e67c978.js"><link rel="prefetch" href="/assets/js/190.9fbc0f39.js"><link rel="prefetch" href="/assets/js/191.50cc5319.js"><link rel="prefetch" href="/assets/js/192.98961099.js"><link rel="prefetch" href="/assets/js/193.bceabc75.js"><link rel="prefetch" href="/assets/js/194.d66c7bc7.js"><link rel="prefetch" href="/assets/js/195.12ad0871.js"><link rel="prefetch" href="/assets/js/196.64344a60.js"><link rel="prefetch" href="/assets/js/197.a09fec63.js"><link rel="prefetch" href="/assets/js/198.c8c4ec54.js"><link rel="prefetch" href="/assets/js/199.c7b1c6a1.js"><link rel="prefetch" href="/assets/js/20.9b15a87e.js"><link rel="prefetch" href="/assets/js/200.be89c275.js"><link rel="prefetch" href="/assets/js/201.c19a0e1f.js"><link rel="prefetch" href="/assets/js/202.ce6c17d7.js"><link rel="prefetch" href="/assets/js/203.0cc1803a.js"><link rel="prefetch" href="/assets/js/204.d685d65c.js"><link rel="prefetch" href="/assets/js/205.5b6f3366.js"><link rel="prefetch" href="/assets/js/206.2b375ff8.js"><link rel="prefetch" href="/assets/js/207.fc4b0ea6.js"><link rel="prefetch" href="/assets/js/208.4ed23190.js"><link rel="prefetch" href="/assets/js/209.43bf423d.js"><link rel="prefetch" href="/assets/js/21.fc793013.js"><link rel="prefetch" href="/assets/js/210.3c44524f.js"><link rel="prefetch" href="/assets/js/211.a2a19f7c.js"><link rel="prefetch" href="/assets/js/212.37b2d685.js"><link rel="prefetch" href="/assets/js/213.610764dc.js"><link rel="prefetch" href="/assets/js/214.4695e6ed.js"><link rel="prefetch" href="/assets/js/215.9c7047a1.js"><link rel="prefetch" href="/assets/js/216.fd0bdbaf.js"><link rel="prefetch" href="/assets/js/217.5c4b6e7d.js"><link rel="prefetch" href="/assets/js/218.7b68d085.js"><link rel="prefetch" href="/assets/js/219.f5fb056e.js"><link rel="prefetch" href="/assets/js/22.d9902dcd.js"><link rel="prefetch" href="/assets/js/220.aecd1a7f.js"><link rel="prefetch" href="/assets/js/221.2b6d7d18.js"><link rel="prefetch" href="/assets/js/222.d1c27742.js"><link rel="prefetch" href="/assets/js/223.044fd353.js"><link rel="prefetch" href="/assets/js/224.936c5e35.js"><link rel="prefetch" href="/assets/js/225.7e4796b7.js"><link rel="prefetch" href="/assets/js/226.7f863e3c.js"><link rel="prefetch" href="/assets/js/227.76af06b0.js"><link rel="prefetch" href="/assets/js/228.2cfc86c6.js"><link rel="prefetch" href="/assets/js/229.1a030199.js"><link rel="prefetch" href="/assets/js/23.6b9cb2c3.js"><link rel="prefetch" href="/assets/js/230.05ba6a73.js"><link rel="prefetch" href="/assets/js/231.7e209887.js"><link rel="prefetch" href="/assets/js/232.53ced428.js"><link rel="prefetch" href="/assets/js/233.0e925cd2.js"><link rel="prefetch" href="/assets/js/234.ad0b5a3c.js"><link rel="prefetch" href="/assets/js/235.d0dd43b3.js"><link rel="prefetch" href="/assets/js/236.0f9c9e70.js"><link rel="prefetch" href="/assets/js/237.4a4882f9.js"><link rel="prefetch" href="/assets/js/238.8a43ca69.js"><link rel="prefetch" href="/assets/js/239.a82dcb30.js"><link rel="prefetch" href="/assets/js/24.ee6c8c2c.js"><link rel="prefetch" href="/assets/js/240.91563d44.js"><link rel="prefetch" href="/assets/js/241.4d3de866.js"><link rel="prefetch" href="/assets/js/242.454c196d.js"><link rel="prefetch" href="/assets/js/243.68af64ba.js"><link rel="prefetch" href="/assets/js/244.7e24c604.js"><link rel="prefetch" href="/assets/js/245.6cc0113e.js"><link rel="prefetch" href="/assets/js/246.c7c7918a.js"><link rel="prefetch" href="/assets/js/247.21ce4413.js"><link rel="prefetch" href="/assets/js/248.a75e5215.js"><link rel="prefetch" href="/assets/js/249.1a961c4e.js"><link rel="prefetch" href="/assets/js/25.51ab5cd0.js"><link rel="prefetch" href="/assets/js/250.9c8db8d1.js"><link rel="prefetch" href="/assets/js/251.026b300e.js"><link rel="prefetch" href="/assets/js/252.992e70b8.js"><link rel="prefetch" href="/assets/js/253.94c2dd89.js"><link rel="prefetch" href="/assets/js/254.aea84f8c.js"><link rel="prefetch" href="/assets/js/255.89714c44.js"><link rel="prefetch" href="/assets/js/256.12fb3ed9.js"><link rel="prefetch" href="/assets/js/257.021a9dfb.js"><link rel="prefetch" href="/assets/js/258.02c838ea.js"><link rel="prefetch" href="/assets/js/259.9dce4f6b.js"><link rel="prefetch" href="/assets/js/26.9916d3bd.js"><link rel="prefetch" href="/assets/js/260.2ef2c5f6.js"><link rel="prefetch" href="/assets/js/261.2275daeb.js"><link rel="prefetch" href="/assets/js/262.12751fad.js"><link rel="prefetch" href="/assets/js/263.abfaa75e.js"><link rel="prefetch" href="/assets/js/264.25835c2e.js"><link rel="prefetch" href="/assets/js/265.de516794.js"><link rel="prefetch" href="/assets/js/266.ff272f0c.js"><link rel="prefetch" href="/assets/js/267.a35b1e86.js"><link rel="prefetch" href="/assets/js/268.b00831d1.js"><link rel="prefetch" href="/assets/js/269.9f12ad86.js"><link rel="prefetch" href="/assets/js/27.b8e11949.js"><link rel="prefetch" href="/assets/js/270.8c55ebfe.js"><link rel="prefetch" href="/assets/js/271.fda18f77.js"><link rel="prefetch" href="/assets/js/272.7e6304ca.js"><link rel="prefetch" href="/assets/js/273.f24bd7ca.js"><link rel="prefetch" href="/assets/js/274.6cda3fe1.js"><link rel="prefetch" href="/assets/js/275.e4232ddf.js"><link rel="prefetch" href="/assets/js/276.f95557cf.js"><link rel="prefetch" href="/assets/js/277.433c23fc.js"><link rel="prefetch" href="/assets/js/278.fb30e7c3.js"><link rel="prefetch" href="/assets/js/279.b8d71d6d.js"><link rel="prefetch" href="/assets/js/28.d3efd4c4.js"><link rel="prefetch" href="/assets/js/280.75a5f245.js"><link rel="prefetch" href="/assets/js/282.abd1e165.js"><link rel="prefetch" href="/assets/js/283.2045f3c4.js"><link rel="prefetch" href="/assets/js/284.1bfb0a38.js"><link rel="prefetch" href="/assets/js/285.3787ec9d.js"><link rel="prefetch" href="/assets/js/286.7298360f.js"><link rel="prefetch" href="/assets/js/287.5f5447a4.js"><link rel="prefetch" href="/assets/js/288.829528c9.js"><link rel="prefetch" href="/assets/js/289.4d1a75f1.js"><link rel="prefetch" href="/assets/js/29.b9d838cd.js"><link rel="prefetch" href="/assets/js/290.be6d8e01.js"><link rel="prefetch" href="/assets/js/291.710f4805.js"><link rel="prefetch" href="/assets/js/292.edea675b.js"><link rel="prefetch" href="/assets/js/293.41f609fc.js"><link rel="prefetch" href="/assets/js/294.3fefa898.js"><link rel="prefetch" href="/assets/js/295.690baf89.js"><link rel="prefetch" href="/assets/js/296.9b0e777a.js"><link rel="prefetch" href="/assets/js/297.1ec2ac61.js"><link rel="prefetch" href="/assets/js/298.ea0c6626.js"><link rel="prefetch" href="/assets/js/299.7d94ab85.js"><link rel="prefetch" href="/assets/js/3.0bce7c16.js"><link rel="prefetch" href="/assets/js/30.4f1acd15.js"><link rel="prefetch" href="/assets/js/300.e71a5fa1.js"><link rel="prefetch" href="/assets/js/301.81bc9b7a.js"><link rel="prefetch" href="/assets/js/302.554ee21f.js"><link rel="prefetch" href="/assets/js/303.2bfc8eeb.js"><link rel="prefetch" href="/assets/js/304.9a6c1747.js"><link rel="prefetch" href="/assets/js/305.2a950d2b.js"><link rel="prefetch" href="/assets/js/306.5a7e6bf0.js"><link rel="prefetch" href="/assets/js/307.db6e9303.js"><link rel="prefetch" href="/assets/js/308.2cb09f32.js"><link rel="prefetch" href="/assets/js/309.8807b742.js"><link rel="prefetch" href="/assets/js/31.a97c133b.js"><link rel="prefetch" href="/assets/js/310.435eee82.js"><link rel="prefetch" href="/assets/js/311.e1e2208b.js"><link rel="prefetch" href="/assets/js/312.4a3786ee.js"><link rel="prefetch" href="/assets/js/313.b3a2d447.js"><link rel="prefetch" href="/assets/js/314.a3472d60.js"><link rel="prefetch" href="/assets/js/315.c26ae0b1.js"><link rel="prefetch" href="/assets/js/316.4c0c30ef.js"><link rel="prefetch" href="/assets/js/317.e1812e05.js"><link rel="prefetch" href="/assets/js/318.d6bcc10b.js"><link rel="prefetch" href="/assets/js/319.83c19f3c.js"><link rel="prefetch" href="/assets/js/32.eed60f7c.js"><link rel="prefetch" href="/assets/js/320.3bb0c7eb.js"><link rel="prefetch" href="/assets/js/321.00908b6d.js"><link rel="prefetch" href="/assets/js/322.40512c90.js"><link rel="prefetch" href="/assets/js/323.8c369ff2.js"><link rel="prefetch" href="/assets/js/324.23f125de.js"><link rel="prefetch" href="/assets/js/325.da20903e.js"><link rel="prefetch" href="/assets/js/326.3de69f4b.js"><link rel="prefetch" href="/assets/js/327.db2d3f6c.js"><link rel="prefetch" href="/assets/js/328.95abcf8c.js"><link rel="prefetch" href="/assets/js/329.5e85e9a8.js"><link rel="prefetch" href="/assets/js/33.5cbd51dc.js"><link rel="prefetch" href="/assets/js/330.fe9c1ed4.js"><link rel="prefetch" href="/assets/js/331.ea3b89a9.js"><link rel="prefetch" href="/assets/js/332.8120e01f.js"><link rel="prefetch" href="/assets/js/333.ce18aa76.js"><link rel="prefetch" href="/assets/js/334.68fbbbec.js"><link rel="prefetch" href="/assets/js/335.472f7600.js"><link rel="prefetch" href="/assets/js/336.cc5f7c7a.js"><link rel="prefetch" href="/assets/js/337.ab6f5ca6.js"><link rel="prefetch" href="/assets/js/338.847b7fe3.js"><link rel="prefetch" href="/assets/js/339.03a8ed3f.js"><link rel="prefetch" href="/assets/js/34.40775c37.js"><link rel="prefetch" href="/assets/js/340.13ed2b46.js"><link rel="prefetch" href="/assets/js/341.09ec18f7.js"><link rel="prefetch" href="/assets/js/342.6a1dc3e9.js"><link rel="prefetch" href="/assets/js/343.e4859c08.js"><link rel="prefetch" href="/assets/js/344.c20983de.js"><link rel="prefetch" href="/assets/js/345.8578e988.js"><link rel="prefetch" href="/assets/js/346.c7157951.js"><link rel="prefetch" href="/assets/js/347.d384c9eb.js"><link rel="prefetch" href="/assets/js/348.78996b96.js"><link rel="prefetch" href="/assets/js/349.072f528e.js"><link rel="prefetch" href="/assets/js/35.bddd45df.js"><link rel="prefetch" href="/assets/js/350.2c955aee.js"><link rel="prefetch" href="/assets/js/351.a67cd79f.js"><link rel="prefetch" href="/assets/js/352.69724ddc.js"><link rel="prefetch" href="/assets/js/353.7ba3dd00.js"><link rel="prefetch" href="/assets/js/354.c4b72824.js"><link rel="prefetch" href="/assets/js/355.fe82ec5f.js"><link rel="prefetch" href="/assets/js/356.c08e73bd.js"><link rel="prefetch" href="/assets/js/357.e3372520.js"><link rel="prefetch" href="/assets/js/358.0bff86e2.js"><link rel="prefetch" href="/assets/js/359.5be64507.js"><link rel="prefetch" href="/assets/js/36.79c33ae9.js"><link rel="prefetch" href="/assets/js/360.d0c4343b.js"><link rel="prefetch" href="/assets/js/361.ab9a1842.js"><link rel="prefetch" href="/assets/js/37.ca71d964.js"><link rel="prefetch" href="/assets/js/38.17c6d053.js"><link rel="prefetch" href="/assets/js/39.951c4bc4.js"><link rel="prefetch" href="/assets/js/4.3ac11e77.js"><link rel="prefetch" href="/assets/js/40.b82c1dc6.js"><link rel="prefetch" href="/assets/js/41.0d5ea224.js"><link rel="prefetch" href="/assets/js/42.b0af664b.js"><link rel="prefetch" href="/assets/js/43.0b8772f1.js"><link rel="prefetch" href="/assets/js/44.6b9a2653.js"><link rel="prefetch" href="/assets/js/45.cc8bbd85.js"><link rel="prefetch" href="/assets/js/46.679a9cd8.js"><link rel="prefetch" href="/assets/js/47.641fb78d.js"><link rel="prefetch" href="/assets/js/48.6e209a7a.js"><link rel="prefetch" href="/assets/js/49.d828aa3f.js"><link rel="prefetch" href="/assets/js/5.99a5f9e2.js"><link rel="prefetch" href="/assets/js/50.06aa1010.js"><link rel="prefetch" href="/assets/js/51.2ffbb2d1.js"><link rel="prefetch" href="/assets/js/52.abb900f2.js"><link rel="prefetch" href="/assets/js/53.92c527dc.js"><link rel="prefetch" href="/assets/js/54.da958e10.js"><link rel="prefetch" href="/assets/js/55.f87eb35c.js"><link rel="prefetch" href="/assets/js/56.4733e8b0.js"><link rel="prefetch" href="/assets/js/57.4d2ee743.js"><link rel="prefetch" href="/assets/js/58.c4ab6ddf.js"><link rel="prefetch" href="/assets/js/59.b63a92bb.js"><link rel="prefetch" href="/assets/js/6.d7cf9f46.js"><link rel="prefetch" href="/assets/js/60.1883ecb4.js"><link rel="prefetch" href="/assets/js/61.b26ba2f2.js"><link rel="prefetch" href="/assets/js/62.a1ac2d2c.js"><link rel="prefetch" href="/assets/js/63.17e1719b.js"><link rel="prefetch" href="/assets/js/64.f9360a9d.js"><link rel="prefetch" href="/assets/js/65.b761a64c.js"><link rel="prefetch" href="/assets/js/66.3e4bcd48.js"><link rel="prefetch" href="/assets/js/67.90268134.js"><link rel="prefetch" href="/assets/js/68.29b9c67d.js"><link rel="prefetch" href="/assets/js/69.7479b5eb.js"><link rel="prefetch" href="/assets/js/7.0188934d.js"><link rel="prefetch" href="/assets/js/70.505a52d6.js"><link rel="prefetch" href="/assets/js/71.c7db6e10.js"><link rel="prefetch" href="/assets/js/72.88db01f5.js"><link rel="prefetch" href="/assets/js/73.25a4aab2.js"><link rel="prefetch" href="/assets/js/74.e8d5cb88.js"><link rel="prefetch" href="/assets/js/75.00c0b016.js"><link rel="prefetch" href="/assets/js/76.246ab692.js"><link rel="prefetch" href="/assets/js/77.d53b1fd3.js"><link rel="prefetch" href="/assets/js/78.7739f92f.js"><link rel="prefetch" href="/assets/js/79.9ab374be.js"><link rel="prefetch" href="/assets/js/8.c594fb67.js"><link rel="prefetch" href="/assets/js/80.b23ca9d8.js"><link rel="prefetch" href="/assets/js/81.f7174c04.js"><link rel="prefetch" href="/assets/js/82.d78091dc.js"><link rel="prefetch" href="/assets/js/83.926ac4d8.js"><link rel="prefetch" href="/assets/js/84.0f55e5e6.js"><link rel="prefetch" href="/assets/js/85.2adad1d5.js"><link rel="prefetch" href="/assets/js/86.f8d8d518.js"><link rel="prefetch" href="/assets/js/87.44e38322.js"><link rel="prefetch" href="/assets/js/88.fe6dc77d.js"><link rel="prefetch" href="/assets/js/89.1776544d.js"><link rel="prefetch" href="/assets/js/9.74787951.js"><link rel="prefetch" href="/assets/js/90.4f257d85.js"><link rel="prefetch" href="/assets/js/91.e9ebff3f.js"><link rel="prefetch" href="/assets/js/92.7bad2eb1.js"><link rel="prefetch" href="/assets/js/93.6bab1801.js"><link rel="prefetch" href="/assets/js/94.37a0a375.js"><link rel="prefetch" href="/assets/js/95.fe34024c.js"><link rel="prefetch" href="/assets/js/96.8df06b68.js"><link rel="prefetch" href="/assets/js/97.59954f95.js"><link rel="prefetch" href="/assets/js/98.32cbda8c.js"><link rel="prefetch" href="/assets/js/99.ce14eb03.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d4aaf2aa.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CS-Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pages/first/" class="nav-link">唠唠嗑儿</a></div><div class="nav-item"><a href="/pages/integer/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/net/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/os/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/sql/" class="nav-link">MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/java/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/javalist/" class="nav-link">Java 集合</a></li><li class="dropdown-item"><!----> <a href="/pages/javaconcurrent/" class="nav-link">Java 并发</a></li><li class="dropdown-item"><!----> <a href="/pages/jvm/" class="nav-link">Java 虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/spring/" class="nav-link">Spring</a></li></ul></div></div> <a href="https://github.com/veal98/cs-wiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pages/first/" class="nav-link">唠唠嗑儿</a></div><div class="nav-item"><a href="/pages/integer/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/net/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/os/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/sql/" class="nav-link">MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/java/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/javalist/" class="nav-link">Java 集合</a></li><li class="dropdown-item"><!----> <a href="/pages/javaconcurrent/" class="nav-link">Java 并发</a></li><li class="dropdown-item"><!----> <a href="/pages/jvm/" class="nav-link">Java 虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/spring/" class="nav-link">Spring</a></li></ul></div></div> <a href="https://github.com/veal98/cs-wiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/net/" class="sidebar-link">小牛肉的计网知识体系结构</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>入门</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络层</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/5d0fdf/" aria-current="page" class="active sidebar-link">别再恐惧IP协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_0-前言" class="sidebar-link">0. 前言</a></li><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_1-从网络层说起" class="sidebar-link">1. 从网络层说起</a></li><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_2-什么是-ip-协议" class="sidebar-link">2. 什么是 IP 协议</a></li><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_3-ip-协议的重要内容-ip-地址" class="sidebar-link">3. IP 协议的重要内容：IP 地址</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_1-ip-地址初探" class="sidebar-link">① IP 地址初探</a></li><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_2-ip-地址和-mac-地址" class="sidebar-link">② IP 地址和 MAC 地址</a></li><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_4-ip-地址的分类" class="sidebar-link">④ IP 地址的分类</a></li><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_4-ip-单播-广播-多播" class="sidebar-link">④ IP 单播/广播/多播</a></li><li class="sidebar-sub-header level4"><a href="/pages/5d0fdf/#i-ip-广播" class="sidebar-link">Ⅰ IP 广播</a></li><li class="sidebar-sub-header level4"><a href="/pages/5d0fdf/#i-ip-单播" class="sidebar-link">Ⅰ IP 单播</a></li><li class="sidebar-sub-header level4"><a href="/pages/5d0fdf/#iii-ip-多播" class="sidebar-link">Ⅲ IP 多播</a></li><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_5-子网划分" class="sidebar-link">⑤ 子网划分</a></li><li class="sidebar-sub-header level4"><a href="/pages/5d0fdf/#i-为什么要进行子网划分" class="sidebar-link">Ⅰ 为什么要进行子网划分</a></li><li class="sidebar-sub-header level4"><a href="/pages/5d0fdf/#i-子网划分初探" class="sidebar-link">Ⅰ 子网划分初探</a></li><li class="sidebar-sub-header level4"><a href="/pages/5d0fdf/#ii-子网掩码" class="sidebar-link">Ⅱ 子网掩码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_4-拯救枯竭的-ipv4-地址" class="sidebar-link">4. 拯救枯竭的 IPV4 地址</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_1-无分类-ip-地址-cidr" class="sidebar-link">① 无分类 IP 地址 CIDR</a></li><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_2-nat-地址转换" class="sidebar-link">② NAT 地址转换</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_6-路由控制" class="sidebar-link">6. 路由控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_1-路由控制初探" class="sidebar-link">① 路由控制初探</a></li><li class="sidebar-sub-header level3"><a href="/pages/5d0fdf/#_2-路由协议" class="sidebar-link">② 路由协议</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5d0fdf/#_7-总结" class="sidebar-link">7. 总结</a></li></ul></li><li><a href="/pages/65e53e/" class="sidebar-link">戏说不是胡说-高铁换乘之IP地址与MAC地址</a></li><li><a href="/pages/17e7b2/" class="sidebar-link">几幅图拿下ARP协议</a></li><li><a href="/pages/7e5285/" class="sidebar-link">所谓ICMP-不过将军与士卒而已</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>传输层</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>应用层</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><span data-v-0c557b5e>计算机网络</span></li><li data-v-0c557b5e><span data-v-0c557b5e>网络层</span></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>小牛肉</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-03-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">别再恐惧IP协议<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="🍉-别再恐惧-ip-协议-万字长文-多图预警"><a href="#🍉-别再恐惧-ip-协议-万字长文-多图预警" class="header-anchor">#</a> 🍉 别再恐惧 IP 协议（万字长文 | 多图预警）</h1> <hr> <h2 id="_0-前言"><a href="#_0-前言" class="header-anchor">#</a> 0. 前言</h2> <p>对我个人来说，本科的时候，除去计算机组成原理，计算机网络堪称复习难度最大的一门课，其中无穷无尽的 IP 地址的计算、子网划分、路由转发简直就是梦靥。现在回过头来再看，其实真的不难，只不过是当时的知识体系实在太乱。👏 本篇耗时长达十几个小时，呕心沥血，相信大家看完必定有所收获。</p> <blockquote><p>📢 计算机网络的细碎知识点真的是越扣越多......，本文主要讲解 IP 协议相关的重要知识点，一些相对来说比较冷门的就不再说了</p></blockquote> <h2 id="_1-从网络层说起"><a href="#_1-从网络层说起" class="header-anchor">#</a> 1. 从网络层说起</h2> <p>众所周知，IP 协议属于网络层，回顾一下之前文章 <a href="https://mp.weixin.qq.com/s/oZtmmRYkYdtU7OX0k1CAuA" target="_blank" rel="noopener noreferrer">一文读懂两台计算机之间是如何通信的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 所说的，网络层的作用：</p> <p>在计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。<strong>网络层的任务就是选择合适的网间路由和交换结点， 确保数据及时传送</strong>。</p> <p>通俗点来说吧，数据链路层的作用很简单，它是无脑的，只负责在两个相邻节点之间传送数据，它并不知道它所传送的数据最终目的地是哪。而网络层便是它的大脑，网络层负责指定源地址和目的地址，并告诉数据链路层该走哪条路线。下面这张图可以说是非常形象了 👍：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114143919.png" alt=""></p> <p>运输层交付给网络层的数据格式是 TCP/UDP 报文段，那么网络层会将这些报文封装成 <strong>IP 数据报</strong>交付给数据链路层。在之前的文章中我们说过，每个数据链路上会规定一个最大传输单元 MTU，如果 IP 数据报的长度超过 MTU，那么网络层就会把这些报文分割成一个一个的小组（分组）进行传送。数据链路层收到 IP 数据报之后将其封装成帧。</p> <p>为什么网络层的传输单元（协议单元）称为 IP 数据报呢？那是因为在 TCP/IP 体系结构中，网络层使用 IP 协议，因此称为 IP 数据报 ，简称数据报。下面我们就来详细讲解 <strong>IP 协议</strong> 👇</p> <h2 id="_2-什么是-ip-协议"><a href="#_2-什么是-ip-协议" class="header-anchor">#</a> 2. 什么是 IP 协议</h2> <p>IP 协议是整个 TCP/IP 协议族的核心，也是构成互联网的基础，位于 TCP/IP 模型的网络层。</p> <p>IP 协议用于<strong>屏蔽下层物理网络的差异，为上层提供统一的 IP 数据报</strong>。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114161019.png" alt=""></p> <p>⭐ IP 协议提供无连接的、不可靠的、尽力的数据报投递服务：</p> <ul><li><p>1）<strong>无连接</strong>的投递服务</p> <p>发送端可于任何时候自由发送数据，而接收端永远不知道自己会在何时从哪里接收到数据。每个 IP 数据报独立处理和传输， <strong>一台主机发出的数据报序列，可能会走不同的路径</strong>， 甚至有可能其中的一部分数据报会在传输过程中丢失</p></li> <li><p>2）<strong>不可靠</strong>的投递服务</p> <p>IP 协议本身不保证 IP 数据报投递的结果。 在传输的过程中，IP 数据报可能会丢失、重复、延迟和乱序等， IP 协议不对内容作任何检测，也不将这些结果通知收发双方</p> <blockquote><p>IP 数据报的丢失，通过路由器发 <code>ICMP 报文</code> 告知（后续文章会详细讲解 <strong>ICMP 协议</strong>，敬请期待）； 必要时，由高层实体（如 TCP）负责差错恢复动作</p></blockquote></li> <li><p>3）<strong>尽力</strong>投递服务</p> <p>每个数据链路上会规定一个最大传输单元 MTU，如果 IP 数据报的长度超过 MTU，那么网络层就会把这些报文分割成一个一个的小组（分组）进行传送，以适应具体的传输网络</p></li></ul> <h2 id="_3-ip-协议的重要内容-ip-地址"><a href="#_3-ip-协议的重要内容-ip-地址" class="header-anchor">#</a> 3. IP 协议的重要内容：IP 地址</h2> <h3 id="_1-ip-地址初探"><a href="#_1-ip-地址初探" class="header-anchor">#</a> ① IP 地址初探</h3> <p>IP 地址是 IP 协议中非常重要的内容，<strong>IP 数据报中含有收/发方的 IP 地址</strong>。 那么什么是 IP 地址呢？</p> <p>那就是给因特网上的每台设备都规定了其<strong>全世界唯一</strong>的地址，叫做 “IP 地址”，正是由于有了 IP 地址，才保证了用户在连网的计算机上操作时，能够高效而且方便地从千千万万台计算机中选出自己所需的对象来。</p> <p>IP 地址就好像电话号码（地址码）：有了某人的电话号码，你就能与他通话了。同样，有了某台主机的 IP 地址，你就能与这台主机通信了。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115145253.png" alt=""></p> <p>按照 TCP/IP 协议规定，IP 地址用二进制来表示，每个 IP 地址长 <strong>32 比特</strong>，也就是 4 个字节（<u>这里说的是 IPV4 地址长 32 比特 / 4 字节，而 IPV6 地址占 128 比特 / 16 字节</u>）。那么，IPV4 地址的最大值就是 $2^{32} = 4294967296$，也就是说：最多给大约 43 亿台接入互联网的设备配置其独一无二的 IPV4 地址。</p> <p>一个采用二进制形式的 IP 地址是一串很长的数字，人们处理起来也太费劲了。为了方便人们的使用，IP 地址习惯性地被写成十进制的形式，<strong>使用 “<code>.</code>” 分开不同的字节</strong>。这种表示法叫做<strong>点分十进制表示法</strong>，这显然比一连串二进制地 1 和 0 容易记忆得多。举个例子：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114154101.png" alt=""></p> <h3 id="_2-ip-地址和-mac-地址"><a href="#_2-ip-地址和-mac-地址" class="header-anchor">#</a> ② IP 地址和 MAC 地址</h3> <p>🚨 可能有些小伙伴会以为，一台计算机只能有一个 IP 地址，这种观点是<strong>错误</strong>的。实际上，<strong>IP 地址并不是根据主机台数来配置的，而是根据网卡（网络适配器）来的</strong>。像服务器、路由器等设备都是有 2 个以上的网卡，也就是它们会有 2 个以上的 IP 地址。</p> <p>说到这里，不知大家有没有想起我们之前说的 MAC 地址，没错，MAC 地址（链路层地址）也是根据网卡来配置的，一台主机拥有多少个网卡就有多少个 MAC 地址。</p> <p>那么，<strong>既然有了 MAC 地址用来唯一标识这台计算机了，那还需要 IP 地址干啥</strong>？回答这个问题只需要我们回到本文的第一幅图：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114143919.png" alt=""></p> <ul><li><p>网络层指定了从哪个主机（「源 IP 地址」）发送到哪个主机（「目的 IP 地址」）。<strong>源 IP 地址和目标 IP 地址在传输过程中是不会变化的</strong></p></li> <li><p>而数据链路层则是根据 MAC 地址在一个接一个的区间中进行传输的，每个区间内的出发地址即「源 MAC 地址」，每个区间内的目的地址即「目的 MAC 地址」。显然，随着数据的传输，<strong>源 MAC 地址和目的 MAC 地址会不断的发生变化</strong></p> <p>比如上图，网络层告知了 1-2-3 路线，那么数据链路层就会根据 MAC 地址依次找到 1、2、3，并在他们之间传输数据。</p></li></ul> <p>🍉 这么说吧，举个形象点的例子：我们把数据链路层当成乘坐高铁从苏州到南京，再在南京转乘到北京，再在北京转乘到西藏的旅客，那么网络层就相当于每个车站的工作人员，<strong>在数据链路层每次转乘时，网络层为其购买了一张标有下一个 MAC 地址的车票</strong>。因此，即使旅客（数据链路层）不知道其最终目的地也没有关系，工作人员（网络层）会给你做出指引。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115151809.png" alt=""></p> <p>而实际上，网络层做出指引的过程，我们将其称为<strong>路由控制</strong> （下文会详细讲解）</p> <h3 id="_4-ip-地址的分类"><a href="#_4-ip-地址的分类" class="header-anchor">#</a> ④ IP 地址的分类</h3> <p>互联网诞生之初，32 位的 IP 地址（也就是 IPV4 地址）显得很充裕，于是大佬们对这些看似庞大的 IP 地址进行了分类：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114161835.png" alt=""></p> <p>上图中我们可以看到，A 类 IP 地址的首位是 <code>0</code>，B 类 IP 地址的前几位是 <code>10</code>，C 类 IP 地址的前几位是 <code>110</code>......，我们将这些称之为<strong>分类号</strong>，用于区分 IP 地址的类别。</p> <p>其中，A、B、C 类地址主要分为网络号和主机号两个部分：</p> <ul><li>什么是网络号：网络号表示其属于互联网的哪一个网络</li> <li>什么是主机号：主机号表示其属于该网络中的哪一台主机</li></ul> <p>大 🔥 可能有这个疑问：<strong>为什么要分离网络号和主机号</strong>？</p> <p>因为两台计算机要通讯，首先要判断是否处于同一个广播域内，即网络地址（网络号）是否相同：</p> <ul><li>如果网络地址相同，表明接受方在本网络上（<strong>本地网络主机</strong>），那么可以把数据包直接发送到目标主机，无需转发给其他的网络</li> <li>网络号不相同的主机称之为<strong>远程网络主机</strong>，远程网络中的主机要相互通信必须通过本地网关（Gateway）来传递转发数据</li></ul> <p>路由器寻址工作中，也就是通过这样的方式来找到对应的网络号的，进而把数据包转发给对应的网络内。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114201905.png" alt=""></p> <p>👍 IP 地址分类的优点显而易见，不管是路由器还是主机解析到一个 IP 地址时候，可以很快的找出网络地址和主机地址：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115123811.png" alt=""></p> <p>💻 A、B、C 类地址对应的地址范围和最大主机个数如下：</p> <table><thead><tr><th>网络类别</th> <th>第一个可用的网络号</th> <th>最后一个可用的网络号</th> <th>每个网络中的最大主机数</th></tr></thead> <tbody><tr><td>A</td> <td>1</td> <td>126</td> <td>$2^{24} - 2$</td></tr> <tr><td>B</td> <td>128.1</td> <td>191.255</td> <td>$2^{16} - 2$</td></tr> <tr><td>C</td> <td>192.0.1</td> <td>223.255.255</td> <td>$2^{8} - 2$</td></tr></tbody></table> <p>OK，看完上表大家必定有很多疑惑，下面一一为大家解答：</p> <p>❓ 1）**第一个可用的网络号如何计算出来的？**很简单，网络号全为 0 即可，看下图，以 B 类地址为例：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114165107.png" alt=""></p> <p>由上图，B 类地址的第一个可用的网络号应该是 <code>128.0</code> 啊，为什么是 <code>128.1</code> 呢？</p> <p>💡 其实这是一个历史问题，RFC 791 中说：<u>A value of zero in the network field means this network</u>. 即网络号全 0 代表本网络。因此真正可用的网络号应该是从 1 开始。</p> <p>所以，B 类地址的第一个可用的网络号就是 <code>128.1</code>：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114165306.png" alt=""></p> <p>A 类和 C 类地址同理，这里我就不再画图了。</p> <blockquote><p>不过实际上 128.0.0.1-128.0.0.255 这段地址已经有明确的归属，国家是 NL。而 128.0.1.0/24 这段同样也分掉了，国家是 RO。而 192.0.0.1 这个地址查出来是没有被分配的。在 RFC 3330 中里有关于这两段地址的明确说明：</p> <div class="language-text extra-class"><pre class="language-text"><code>128.0.0.0/16 - This block, corresponding to the numerically lowest of
the former Class B addresses, was initially and is still reserved by
the IANA.  Given the present classless nature of the IP address
space, the basis for the reservation no longer applies and addresses
in this block are subject to future allocation to a Regional Internet
Registry for assignment in the normal manner.
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>192.0.0.0/24 - This block, corresponding to the numerically lowest of
the former Class C addresses, was initially and is still reserved by
the IANA.  Given the present classless nature of the IP address
space, the basis for the reservation no longer applies and addresses
in this block are subject to future allocation to a Regional Internet
Registry for assignment in the normal manner.
</code></pre></div><p>这个 RFC 发表于 2002 年，对于这两段地址明确表示因为无类地址空间的原因，不再需要保留，地址将在今后进行分配。</p></blockquote> <p>❓ 2）**最后一个可用的网络号如何计算出来的？**同理，网络号全为 1 即可，看下图，以 B 类地址为例：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114170036.png" alt=""></p> <p>❓ 3）<strong>每个网络中的最大主机数为什么都要减 2 呢？</strong></p> <p>首先我们要明白，计算网络中的最大主机数就是要看主机号的位数，比如 B 类地址的主机号占 8 位，那么 B 类地址的最大主机个数就是 $2^8 - 2$ 个。为什么要减 2 呢？</p> <p>⭐ 那是因为<strong>主机号全为 0 和主机号全为 1 的这两个 IP 地址是特殊的，在主机号的分配过程中，应该去掉这两种情况</strong>：</p> <ul><li><p>第一种情况：<strong>主机号全为 1 指定某个网络下的所有主机，用于广播</strong></p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114171029.png" alt=""></p></li> <li><p>第二种情况：<strong>主机号全为 0 指定某个网络</strong></p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114170923.png" alt=""></p></li></ul> <h3 id="_4-ip-单播-广播-多播"><a href="#_4-ip-单播-广播-多播" class="header-anchor">#</a> ④ IP 单播/广播/多播</h3> <h4 id="i-ip-广播"><a href="#i-ip-广播" class="header-anchor">#</a> Ⅰ IP 广播</h4> <p>上文中我们提到了主机号全为 1 指定某个网络下的所有主机，用于广播，那么什么是广播呢？</p> <p>广播地址用于在<strong>同一个链路中相互连接的主机之间发送数据包，即一个发送方对应多个接收方</strong>。接收方在接收到数据包之后，可以根据自己的需要选择接收还是丢弃。</p> <blockquote><p>💬 比如说学校的广播通知哪几个同学来办公室，那么虽然所有同学都接收到了这条消息，但是不需要去办公室的同学就不必理会</p></blockquote> <p>当主机号全为 1 时，就表示该网络的广播地址。例如把 <code>172.20.0.0/16</code> 用二进制表示如下：</p> <div class="language- extra-class"><pre class="language-text"><code>10101100.00010100.00000000.00000000
</code></pre></div><p>将这个地址的<strong>主机部分全部改为 1</strong>，则形成广播地址：</p> <div class="language- extra-class"><pre class="language-text"><code>10101100.00010100.11111111.11111111
</code></pre></div><p>再将这个地址用十进制表示，则为 <code>172.20.255.255</code>。</p> <p>广播地址可以分为本地广播和直接广播两种：</p> <p>1）<strong>在本网络内广播的叫做本地广播</strong>。例如网络地址为 <code>192.168.0.0/24</code> 的情况下，广播地址是 <code>192.168.0.255</code>。因为这个广播地址的 IP 包会被路由器屏蔽（即路由器不转发该广播包，广播包无法穿透路由器），所以不会到达 <code>192.168.0.0/24</code> 以外的其他链路上。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114180518.png" alt=""></p> <p>2）<strong>在不同网络之间的广播叫做直接广播</strong>。例如网络地址为 <code>192.168.0.0/24</code> 的主机向 <code>192.168.1.255/24</code> 的目标地址发送 IP 包。收到这个包的路由器，将数据转发给 <code>192.168.1.0/24</code>，从而使得所有 <code>192.168.1.1</code>  ~ <code>192.168.1.254</code> 的主机都能收到这个包。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114180542.png" alt=""></p> <blockquote><p>🚨 由于直接广播有一定的安全问题，<strong>多数情况下会在路由器上设置为不转发广播包</strong>，即本地广播，广播包无法穿透路由</p></blockquote> <h4 id="i-ip-单播"><a href="#i-ip-单播" class="header-anchor">#</a> Ⅰ IP 单播</h4> <p>广播模式下，有一个发送方，多个接收方，而在单播模式下，<strong>只有一个发送方和一个接收方</strong>。单播是<strong>可以穿透路由器</strong>的，也即路由器会对数据包其进行转发：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114183755.png" alt=""></p> <h4 id="iii-ip-多播"><a href="#iii-ip-多播" class="header-anchor">#</a> Ⅲ IP 多播</h4> <p>上面我们讲了 A、B、C 类地址，D、E 类还没讲。D 类和 E 类地址是没有主机号的，所以不可用于主机 IP。</p> <p><strong>多播使用 D 类地址</strong>，因此如果首位是 1110，就可以认为是多播地址，而剩下的 28 位可以称为多播的组编号。E 类是预留的分类，暂时未使用。</p> <p>那么什么是多播（组播）呢？多播用于<strong>将包发送给特定组内的所有主机（可以穿透路由器），即一个发送方，特定的多个接收方</strong>。由于其直接使用 IP 协议，因此也不存在可靠传输。</p> <p>👍 在人们使用多播功能之前，一直采用广播的方式。<u>通过广播将数据发送给所有终端主机，再由这些主机 IP 之上的一层去判断是否有必要接收数据。这种方式会给那些毫无关系的网络或主机带来影响，造成网络上很多不必要的流量</u>。再者，由于我们在大部分情况下使用的本地广播是无法穿透路由的，所以多播这种既能够穿透路由，又可以实现只给那些必要的组发送数据包的技术就成为必选之路了。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114183958.png" alt=""></p> <h3 id="_5-子网划分"><a href="#_5-子网划分" class="header-anchor">#</a> ⑤ 子网划分</h3> <p>子网划分应该是整个 IP 协议中最让人头大的部分，写这部分的时候我也参考了很多资料，对于如何能够循序渐进讲完这部分知识点绞尽脑汁，构思了很久，相信大家看完一定能够有所收获 😄</p> <h4 id="i-为什么要进行子网划分"><a href="#i-为什么要进行子网划分" class="header-anchor">#</a> Ⅰ 为什么要进行子网划分</h4> <p>为什么要进行子网划分呢？那是因为<strong>传统的 IP 地址分类可能会造成资源浪费</strong>：😣</p> <p>上文我们说过，网络号相同的计算机属于同一个链路，以 B 类网络为例，网络号 16 位（除首位 “10”，啊hi有 14 位），也就是说理论上一个链路上允许大约 $2^{16} ≈ 6$ 万台计算机连接。然而，在实际架构中，一般不会出现一个链路上连接这么多计算机的情况。因此，直接使用 A 类、B 类或 C 类地址，确实有些浪费资源。</p> <p>为此，人们开始一种新的组合方式以减少这种浪费。</p> <h4 id="i-子网划分初探"><a href="#i-子网划分初探" class="header-anchor">#</a> Ⅰ 子网划分初探</h4> <p>所谓子网划分就是：将传统的两级 IP 地址（网络号 + 主机号）转换成粒度更小的三级 IP 地址（网络号 + <strong>子网号</strong> + 主机号），也就是<strong>将主机地址划分为子网号和子网内的主机号</strong>。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115105312.png" alt=""></p> <p>同样的，<strong>子网主机号不能全 0 或全 1</strong>。</p> <p>🚨 注意：<strong>某单位划分子网后，对外仍表现为一个网络，即本单位外的网络看不见本单位内的子网划分</strong>。如下图所示，将网络地址 <code>145.13.0.0</code> 划分成 3 个子网，子网的网络地址分别为 <code>145.13.3.0</code>、<code>145.13.7.0</code>、<code>145.13.21.0</code>：</p> <blockquote><ul><li>所谓网络地址就是只指定了网络号，未指定主机号，主机号全 0。</li> <li>子网的网络地址就是指定了网络号和子网号，未指定主机号，主机号全 0。</li></ul></blockquote> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114214525.png" alt=""></p> <h4 id="ii-子网掩码"><a href="#ii-子网掩码" class="header-anchor">#</a> Ⅱ 子网掩码</h4> <p>那么，子网具体是怎么划分的呢？</p> <p>这里就需要引出一个新的概念：<strong>子网掩码 subnet mask</strong>。<strong>子网掩码只有一个作用，就是将某个 IP 地址划分成网络地址和主机地址两部分</strong>（为什么需要将 IP 地址分成网络地址和主机地址两部分，在上文我们已经说过了，这里不再赘述）。</p> <p>子网掩码由一连串的 0 和 1 构成（0 或 1 必须连续），二级 IP 地址中的网络号和三级 IP 地址中的网络号 + 子网号对应到子网掩码中都用 1 来表示，而主机号对应到子网掩码中用 0 来表示。因此 A、B、C 类的子网掩码如下：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114210200.png" alt=""></p> <p><strong>将 IP 地址与子网掩码做按位 AND（与）运算（只有两个都为 1，结果才为 1，否则为 0），得出的就是网络地址</strong>：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115113818.png" alt=""></p> <p>💬 举个子网划分的例子：假设对 C 类地址进行子网划分，网络地址 <code>192.168.1.0</code>（二级 IP 地址），使用子网掩码 <code>255.255.255.192</code> 对其进行子网划分：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115121233.png" alt=""></p> <p>子网掩码 255.255.255.192 中共有 26 个 1，即代表网络号 + 子网号共 26 位，而 C 类地址的网络号（加上分类号）共 24 位，由此可知，需要<strong>从 8 位主机号中借用 2 位作为子网号</strong>。由于子网网络地址被划分成 2 位，那么子网地址就有 $2^2 = 4$ 个，分别是 00、01、10、11，具体划分如下图：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114213245.png" alt=""></p> <p>划分后的 4 个子网如下表格：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/ca2896a22b3e4ab56192e5075fa1737e.png" alt=""></p> <p>👍 另外说明一点，子网掩码还有一种更为简单明了的写法，子网掩码的作用不就是用来分离网络号和主机号的嘛，我们直接在 IP 地址的后面注明网络号的位数（网络号 + 子网号）不就行了。</p> <p>以网络地址 <code>192.168.1.0</code>（C 类二级 IP 地址），子网掩码 <code>255.255.255.192</code> 为例，我们可以写成：<code>192.168.1.0/26</code>，表示网络号 + 子网号共 26 位。</p> <h2 id="_4-拯救枯竭的-ipv4-地址"><a href="#_4-拯救枯竭的-ipv4-地址" class="header-anchor">#</a> 4. 拯救枯竭的 IPV4 地址</h2> <p>随着全球上网用户量越来越大，现行的 IPV4 地址越来越不够用，拯救枯竭的 IPV4 地址势在必行：</p> <ul><li>方案一：无分类 IP 地址 CIDR</li> <li>方案二：NAT 地址转换</li> <li>........</li></ul> <p>然而，这些方案仅仅是解决燃煤之急，相对缓解了 IPV4 地址不够用的问题，但是 IPV4 地址的数量本身有限的事实无法改变，最根本的解决办法还是使用 128 比特的 IPV6 地址（本文最后会粗略讲解）</p> <h3 id="_1-无分类-ip-地址-cidr"><a href="#_1-无分类-ip-地址-cidr" class="header-anchor">#</a> ① 无分类 IP 地址 CIDR</h3> <p>直到 20 世纪 90 年代中期，向各种组织分配 IP 地址都以 A、B、C 等分类为单位进行。对于架构大规模的组织，一般会分配一个 A 类地址；反之，对于小规模的组织，分配一个 C 类地址。😷 然而，A 类地址的派发在全世界最多也无法超过 128 个，加上 C 类地址最多允许 254 台计算机相连，导致众多组织开始申请 B 类地址。其结果就是 B 类地址也开始严重缺乏，无法满足需求。</p> <p>于是，人们开始<strong>放弃 IP 地址的分类，采用任意长度分割 IP 地址的网络号和主机号</strong>，这种方式叫作无分类 IP 地址 <strong>CIDR</strong>，意为 “无类型域间选路”。</p> <p>CIDR 的表现形式为 <code>a.b.c.d/x</code>，其中 <code>/x</code> 表示前 x 位属于网络号（网络前缀），<strong>网络号的长度可以根据需要变化</strong>。例如 <code>128.14.35.7/20</code> 表示该 IP 地址的前 20 位为网络号，剩余 12 位是主机号。</p> <p>⭐ <strong>CIDR 把网络号（这里用网络前缀可能更好理解，大家看下面这个例子就明白了）都相同的连续 IP 地址组成一个 CIDR 地址块</strong>。这样，我们就可以把原来的多个 IP 地址合并成同一个网络，更有效的利用 IPV4 地址。举个例子，应用 CIDR 技术将 <code>203.183.224.1</code> 到 <code>203.183.225.254</code> 的地址合并为同一个网络（它们本来是 2 个 C 类地址）：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115130435.png" alt=""></p> <p>上例中，合并该区间的地址后，主机数为 $2^9 - 2 = 510$ 个，也就是说从 <code>203.183.224.1</code> 到 <code>203.183.225.254</code> 的这个网络内允许接入 510 台主机：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115144042.png" alt=""></p> <h3 id="_2-nat-地址转换"><a href="#_2-nat-地址转换" class="header-anchor">#</a> ② NAT 地址转换</h3> <p>上文我们说过，<strong>IP 地址并不是根据主机台数来配置的，而是根据网卡（网络适配器）来的</strong>。像服务器、路由器等设备都是有 2 个以上的网卡，也就是它们会有 2 个以上的 IP 地址。32 位的 IPV4 地址最多给大约 43 亿台接入互联网的设备配置其独一无二的 IP 地址。</p> <p>现在家家户户连入互联网远不止一台电脑吧，再加上若干部手机、若干部平板......，如果这些设备都被分配了全球独一无二的 IP 地址，43 亿的 IP 地址容量显然是不够的，尽管我们采用了无分类 IP 地址（CIDR）的方法来减缓 IPV4 地址的消耗速度，但是互联网的用户增速是非常惊人的，所以 IPv4 地址依然有被耗尽的危险。</p> <p>于是就诞生了一种可以更换 IP 地址的技术： <code>NAT</code>，使得可连接的计算机数能够远远超过 43 亿台。</p> <p><strong>NAT（Network Address Translator 网络地址转换）</strong>：用于在本地网络中使用私有地址，在连接互联网时使转而使用全局 IP 地址的技术。虽然说 NAT 实际上是为正在面临地址枯竭的 IPV4 而开发的技术，不过在 IPV6 中，为了提高网络安全也在使用 NAT。</p> <p>NAT 的工作机制如下图所示：</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210114194127.png" alt=""></p> <p>以 10.0.0.10 主机与 163.221.120.9 主机的通信为例。利用 NAT，途中的 <strong>NAT 路由器</strong>将发送源 IP 地址 10.0.0.10 转化为全局唯一的 IP 地址 202.244.174.37 后，再发送数据。反过来，当数据包从地址 163.221.120.9 发送过来时，目标 IP 地址 202.244.174.37 先被转换成私有 IP 地址 10.0.0.10 后，再被转发。</p> <p>很显然，实现网络地址转换的关键就在于 NAT 路由器。在 NAT 路由器的内部，有一张自动生成的用来转换地址的表，当 10.0.0.10 主机向 163.221.120.9 主机发送第一个数据包的时候生成这张表，并按照表中的映射关系进行处理。</p> <blockquote><p>💡 现在很多互联网服务都仍然基于 IPV4，如果这些服务不能放到 IPV6 中，那么 IPV6 网络环境的优势也就无从谈起了。为了解决这个问题，就产生了 <strong>NAT-PT</strong> 规范，NAT-PT 是<strong>将 IPV6 的首部转换成 IPV4 首部</strong>的一种技术，这样，那些只有 IPV6 地址的主机也能够与 IPV4 地址的主机进行通信了。</p></blockquote> <h2 id="_6-路由控制"><a href="#_6-路由控制" class="header-anchor">#</a> 6. 路由控制</h2> <p>😉 把路由控制放到最后面讲的原因就是，大家对 IP 地址有了一个健全的认识之后，再来学习路由控制，会比较容易上手。</p> <h3 id="_1-路由控制初探"><a href="#_1-路由控制初探" class="header-anchor">#</a> ① 路由控制初探</h3> <p><strong>路由控制 Routing</strong> 是指将 IP 数据报发送给最终目标地址的功能。即使网络非常复杂，也可以通过路由控制确定到达最终目的地的通路。一旦这个路由控制的运行出现异常，分组数据极有可能迷失方向，无法到达目标地址。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115145718.png" alt=""></p> <p>为了将数据包发送给目标主机，所有主机和路由器都维护着一张<strong>路由控制表</strong>（Routing Table），该表记录着如下两个字段：</p> <ul><li>IP 地址</li> <li>如果想要到达这个 IP 地址，在当前路由器，数据包的下一步应该是发送到哪个路由器</li></ul> <p>在发送 IP 数据报时，首先要确定 IP 数据报首部中的目标地址，再从路由控制表中找到与该地址具有<strong>相同网络地址</strong>的记录，根据该记录将 IP 数据报转发给相应的下一个路由器。如果路由控制表中存在多条相同网络地址的记录，就选择相同位数最多的网络地址，也就是<strong>最长匹配</strong>。</p> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115154930.png" alt=""></p> <p>用于进行路由控制的是IP 地址中的<strong>网络地址</strong>这一部分。💬 举个例子：</p> <ul><li>主机 A 要发送一个 IP 数据报，其源地址是 <code>10.1.1.30</code> ，目标地址是 <code>10.1.2.10</code>，由于没有在主机 A 的路由表找到与目标地址 <code>10.1.2.10</code> 的网络地址，于是把包被转发到<strong>默认路由</strong>（路由器 <code>1</code> ）</li> <li>路由器 <code>1</code> 收到 IP 数据报后，也<strong>在路由器 <code>1</code> 的路由表匹配与目标地址相同的网络地址记录</strong>，发现匹配到了，于是就把 IP 数据报转发到了 <code>10.1.0.2</code> 这台路由器 <code>2</code></li> <li>路由器 <code>2</code> 收到后，同样对比自身的路由表，发现匹配到了，于是把 IP 数据报从路由器 <code>2</code> 的 <code>10.1.2.1</code> 这个接口出去，最终经过交换机把 IP 数据报转发到了目标主机</li></ul> <p><img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210115161425.png" alt=""></p> <p>上面我们提到了<strong>默认路由</strong>，什么是默认路由呢？</p> <ul><li><strong>默认路由 Default Route</strong> 就是指路由表中任何一个地址都能与之匹配的记录。如果一张路由表中包含所有的网络和子网信息，将会造成无端的浪费。这时，默认路由就是一个不错的选择。默认路由一般标记为 <code>0.0.0.0/0</code> 或 <code>default</code></li></ul> <p>此外，我们还需要注意一个地址：<strong>环回地址</strong>。大家对于 <code>localhost</code> 和 <code>127.0.0.1</code> 一定不陌生吧，没错，这就是环回地址，环回地址是同一台计算机上的程序之间在进行网络通信时所使用的一个默认地址。当计算机使用这个特殊的 IP 地址或主机名时，<strong>数据包就不会流向网络</strong>。</p> <h3 id="_2-路由协议"><a href="#_2-路由协议" class="header-anchor">#</a> ② 路由协议</h3> <p>路由控制表的形成有两种方式：</p> <ul><li>一种是管理员手动设置，也叫<strong>静态路由控制</strong></li> <li>另一种是路由器与其他路由器相互交换信息时自动刷新，也叫<strong>动态路由控制</strong></li></ul> <p>为了让<strong>动态路由</strong>即时刷新路由控制表，在网络上互联的路由器之间必须设置好某种协议，保证正常读取路由控制信息。这种协议就称为<strong>路由协议</strong>。</p> <p>当然，随着 IP 网络的发展，只使用一种协议对所有网络进行统一管理是不可能的。因此，人们根据路由控制的范围将路由协议大致分为两类：</p> <ul><li>外部网关协议 EGP（包含 RIP、OSPF 等协议）</li> <li>内部网关协议 IGP（包含 BGP 等协议）</li></ul> <p><strong>没有 EGP 就不可能有世界上各个不同组织机构之间的通信，没有 IGP 就不可能有机构内部的通信</strong>。</p> <blockquote><p>路由协议其实又是一个重难点，不过在面试中鲜有人问津，大多出现在考试卷上，本文的拉锯时间确实有点太久了，此处就不再详细解释，后续可能会单独出一篇路由协议的文章（如果大家需要的话）。</p></blockquote> <h2 id="_7-总结"><a href="#_7-总结" class="header-anchor">#</a> 7. 总结</h2> <p>🎉 这篇文章花费的时间长达十多个小时，很大一部分时间都花在理顺整篇文章的逻辑上，让别人懂和让自己懂真的是天壤之别。OK，关于 IP 协议本身的重要内容至此就基本说完了，不过和 IP 协议相关的技术（比如 ICMP 网际报文控制协议，IGMP 网际组管理协议，DNS 域名解析协议，ARP 地址解析协议，DHCP 动态主机配置协议）还有很多，诸位任重而道远，我们下期再见 👋</p></div></div> <div class="page-slot page-slot-bottom"><div style="padding: 0.00rem">
    <p style="
      color: var(--textColor);
      opacity: 0.9;
      font-size: 20px;
      font-weight: bold;
      margin: 0 0 8px 0;
    ">🎁 公众号</p>
    <img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210915114831.png"  style="width:30%;" />
    <p>
    各位小伙伴大家好呀，叫我小牛肉就行，目前在读东南大学硕士，上方扫码关注公众号「飞天小牛肉」，与你分享我的成长历程与技术感悟~
    </p>
    </div></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/04/09, 12:49:21</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/eb16c9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">数据传输方式和交换方式</div></a> <a href="/pages/65e53e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">戏说不是胡说-高铁换乘之IP地址与MAC地址</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/eb16c9/" class="prev">数据传输方式和交换方式</a></span> <span class="next"><a href="/pages/65e53e/">戏说不是胡说-高铁换乘之IP地址与MAC地址</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>小牛肉 | 心之所愿，素履以往</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.64e84c66.js" defer></script><script src="/assets/js/2.36ce34d6.js" defer></script><script src="/assets/js/281.938f0b13.js" defer></script>
  </body>
</html>
